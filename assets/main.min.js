function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iDisqus$1={exports:{}},hasRequiredIDisqus;function requireIDisqus(){return hasRequiredIDisqus||(hasRequiredIDisqus=1,function(module,exports){var factory;window,factory=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="./src/iDisqus.js")}({"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js!./src/iDisqus.scss":function(module,exports,__webpack_require__){eval('exports = module.exports = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js")(false);\n// Module\nexports.push([module.i, ".comment{position:relative;font:13.5px/1.6 \\"Helvetica Neue\\", Helvetica, Arial, \\"微软雅黑\\", \\"Microsoft YaHei\\", sans-serif;color:#2a2e2e;margin:5px auto;word-wrap:break-word;padding:0;box-sizing:border-box}.comment#disqus_thread{display:none}.comment input,.comment textarea,.comment select,.comment button{font:13.5px/1.6 \\"Helvetica Neue\\", Helvetica, Arial, \\"微软雅黑\\", \\"Microsoft YaHei\\", sans-serif}.comment a{text-decoration:none}.comment .icon{max-width:20px}.comment *{margin:0;padding:0;box-sizing:border-box}.comment strong,.comment b{font-weight:bold;color:#000}.comment :focus{outline:none}.comment abbr[title]{text-decoration:none}.comment .hide{display:none}.comment .init-bg{display:none}.comment.init{display:block}.comment.init>*{display:none}.comment.init .init-container{margin:20px auto 20px;color:#9d9ea1;text-align:center;display:block;position:relative;height:100px;line-height:40px;width:250px}.comment.init .init-container .init-bg{display:block;transform:rotate(-135deg);margin:0 auto}.comment.init .init-container:before,.comment.init .init-container:after{display:block;position:absolute}.comment.init .init-container:before{content:attr(data-tips);top:64px;left:0;width:100%;height:30px;line-height:30px}.comment.init .init-container:after{content:\\"\\";box-sizing:border-box;width:26px;height:26px;top:20px;left:115px;border-width:3px;border-style:solid;border-color:#9d9ea1 transparent;border-radius:13px;transform-origin:50% 50% 0;-webkit-animation:disqus-loader-spinner-animation .7s infinite linear;animation:disqus-loader-spinner-animation .7s infinite linear}.comment.loading .comment-order{pointer-events:none}.comment-box{display:flex;margin:0 0 20px}.comment-navbar{display:flex;justify-content:space-between;align-items:center;height:48px}.comment-navbar .comment-navbar-item{display:flex}.comment-navbar .comment-recommend{display:flex;align-items:center;line-height:27px;height:27px;border:1px solid #656c7a;padding:0 5px;border-radius:3px;color:#656c7a;font-size:12px}.comment-navbar .comment-recommend .icon{fill:#656c7a;width:16px;height:16px}.comment-navbar .comment-recommend.voted .icon{fill:#f05f70}.comment-navbar .comment-recommend-text{margin:0 5px}.comment-navbar .comment-order-label{display:block;height:20px;line-height:20px;margin-right:10px;font-size:12px;border-radius:2px;padding:0 5px;background-color:#e7e9ee;cursor:pointer}.comment-navbar .comment-order-label:last-child{margin-right:0}.comment-navbar .comment-order-radio{display:none}.comment-navbar .comment-order-radio:checked+.comment-order-label{color:#fff;background-color:#c2c6cc}.comment-header{display:flex;justify-content:space-between;border-bottom:2px solid #e7e9ee}.comment-header .comment-header-item{height:36px;line-height:36px;font-weight:bold;font-size:15px;color:#656c7a;display:inline-block;border-bottom:2px solid #656c7a;margin-bottom:-2px;margin-right:10px;padding:0 5px}.comment-header .comment-header-item:last-child{margin-right:0;border-bottom-color:transparent}.comment-header .comment-header-item:last-child:hover{color:#2a2a2a}.comment-header #comment-user{display:none}.comment-header #comment-user:checked+.comment-user{color:#2a2a2a}.comment-header #comment-user:checked+.comment-user:after{border-top-color:#2a2a2a}.comment-header #comment-user:checked+.comment-user .comment-logout{display:block}.comment-header .comment-login{cursor:pointer}.comment-header .comment-user{cursor:pointer;position:relative;padding-right:15px}.comment-header .comment-user:after{content:\\"\\";display:block;position:absolute;height:0;width:0;border:5px solid transparent;border-top-color:#656c7a;top:50%;right:0;margin-top:0}.comment-header .comment-user:hover:after{border-top-color:#2a2a2a}.comment-header .comment-logout{cursor:pointer;z-index:1;display:none;position:absolute;border-radius:3px;border:2px solid #c2c6cc;width:80px;background-color:#fff;height:32px;line-height:28px;text-align:center;right:0;top:80%;color:#656c7a;font-size:13px}.comment-header .comment-logout:hover{color:#0095dd}.comment-header .comment-show{width:120px;text-align:center;position:relative;transition:all 0.2s ease-in-out;color:#2a2e2e;text-transform:capitalize;cursor:pointer;display:none}.comment-header .comment-header-count{width:120px;text-align:center;transition:all 0.2s ease-in-out;text-transform:capitalize;display:inline-block}.comment-header .comment-header-count:after{content:\\" \\";display:block;height:2px;position:absolute;bottom:-2px;left:0px;right:0px;background:#2e9fff}.comment-form{display:flex;flex-direction:column;width:calc(100% - 60px)}.comment-item-child .comment-form{width:calc(100% - 42px)}.placeholder{color:#7f919e;line-height:30px;font-size:12px;position:absolute;top:7px;left:10px;right:9px;white-space:nowrap;text-overflow:ellipsis;cursor:text;overflow:hidden}.comment-form-wrapper{display:flex;flex-direction:column;border:2px solid #dbdfe4;border-radius:4px;width:100%}.comment-actions{background:#f6f8f9;border-radius:0 0 2px 2px;display:flex;justify-content:space-between;height:0;transition:opacity linear .2s;opacity:0;filter:alpha(opacity=0);visibility:hidden}.comment-actions .comment-actions-group{display:flex;position:relative}.comment-actions .comment-actions-input{display:none}.comment-actions .comment-actions-input[type=\\"checkbox\\"]:checked+.comment-actions-label .icon{fill:#1d2f3a}.comment-actions .comment-actions-label{display:inline-block;width:34px;height:34px;cursor:pointer}.comment-actions .comment-actions-label .icon{height:18px;margin:8px;display:inline-block;color:#737474;cursor:pointer;fill:#c2c6cc;transition:all .2s}.comment-actions .comment-actions-label:hover .icon{fill:#1d2f3a !important}.comment-actions .emojione-list{cursor:default;position:absolute;opacity:0;filter:alpha(opacity=0);visibility:hidden;list-style:none;width:125px;background-color:#fff;padding:5px 0 0 5px;border-radius:2px;border:2px solid #c2c6cc;bottom:100%;left:-2px;margin-left:0;display:flex;flex-wrap:wrap}.comment-actions .emojione-item{position:relative;height:24px;width:24px;margin:0 5px 5px 0}.comment-actions .emojione-item:before{content:\\"\\";display:inline-block;position:absolute;left:0;top:0;bottom:0;right:0;z-index:4}.comment-actions .emojione-item-image{height:24px;width:24px}.comment-actions .comment-actions-input[type=\\"checkbox\\"]:checked+.emojione:before{position:fixed;top:0;left:0;width:100%;height:100%;content:\\"\\";display:block;cursor:default}.comment-actions .comment-actions-input[type=\\"checkbox\\"]:checked+.emojione .emojione-list{opacity:1;filter:alpha(opacity=100);visibility:visible !important}.expanded .comment-image{display:flex;overflow-x:auto}.expanded .comment-image .comment-image-progress{position:relative;height:80px;width:0;background:url(\\"https://a.disquscdn.com/next/embed/assets/img/loader.5cc23909da9c4a9874500d7a85c4125f.gif\\") center no-repeat;margin:0 5px;overflow:hidden}.expanded .comment-image .comment-image-progress:before{position:absolute;content:\\"\\";display:block;top:55px;bottom:20px;left:0;right:0;height:5px;width:100%;background-color:#dbdfe4}.expanded .comment-image .comment-image-progress .comment-image-loaded{position:absolute;background-color:#7f919e;top:55px;left:0;right:0;bottom:20px;height:5px;width:0}.expanded .comment-image .comment-image-list{list-style:none;display:flex}.expanded .comment-image .comment-image-item{height:80px;margin-left:5px;position:relative;border-radius:3px;overflow:hidden;flex:none}.expanded .comment-image .comment-image-item .comment-image-object{display:block;height:100%;border-radius:3px;overflow:hidden}.expanded .comment-image .comment-image-item.loading .comment-image-object{width:20px;margin:0 30px}.comment-form-wrapper.editing+.comment-form-user{opacity:1;height:auto;margin-top:10px}.comment-form-wrapper.editing .comment-form-textarea{height:74px;font-size:13.5px;line-height:16px}.comment-form-wrapper.editing .comment-image{transition:padding-bottom .15s ease-in-out;background-color:rgba(16,48,68,0.03)}.comment-form-wrapper.editing .comment-actions{transition:all 0.2s ease-in-out;border-top:solid 2px #dbdfe4;opacity:1;height:36px;filter:alpha(opacity=100);visibility:visible !important}.comment-form-wrapper.editing .comment-actions-form{transition:all .3s .5s;margin:87px -2px -2px}.comment-form-wrapper.editing .comment-form-submit{opacity:1}.comment-form-wrapper.focus{border:2px solid #c2c6cc}.comment-form-wrapper.focus .comment-actions{border-top:2px solid #c2c6cc}.comment-form-wrapper.focus .comment-actions-label .icon{fill:#656c7a}.comment-form-wrapper.focus.expanded .comment-image{border-top:2px solid #c2c6cc}.comment-form-wrapper.preview{border:2px solid #c2c6cc}.comment-form-wrapper.preview .comment-actions{border-top:2px solid #c2c6cc}.comment-form-wrapper.preview .comment-actions-label{pointer-events:none}.comment-form-wrapper.preview .comment-actions-label[for^=\\"preview-input\\"]{pointer-events:auto}.comment-form-wrapper.preview .comment-actions-label[for^=\\"preview-input\\"] .icon{fill:#656c7a}.comment-form-wrapper.expanded .comment-image{border-top:2px solid #dbdfe4;padding:10px 0 8px}.comment-form-wrapper.logged-in .comment-form-submit{border-radius:0 0 4px;transition:none;opacity:1}.comment-form-wrapper.logged-in .comment-actions-form{margin:0;transition:all .5s}.comment-form-wrapper.logged-in+.comment-form-user{height:0;opacity:0;margin-top:-40px}.comment-form-wrapper.logged-in .exit{display:block}.comment-form-wrapper .comment-form-preview{border-radius:4px;display:none;min-height:74px;padding:7px;white-space:pre-wrap}.comment-form-wrapper .comment-form-textarea{width:100%;display:block;border:none;font-size:18px;line-height:30px;border-radius:4px;color:#2a2e2e;cursor:text;resize:none;height:44px;padding:7px;transition:all .2s ease-in-out;background-color:#fefefe}.comment-form-wrapper .comment-form-textarea::-webkit-input-placeholder{color:#7f919e}.comment-form-wrapper .comment-form-textarea::-moz-placeholder{color:#7f919e}.comment-form-wrapper .comment-form-alert:not(:empty){background-color:#f05f70;padding:10px;line-height:20px;font-size:13px;font-weight:700;color:#fff;margin:0 -2px;border-top:2px solid #dbdfe4}.comment-actions-form{display:flex}.comment-actions-form .comment-form-cancel{line-height:36px;padding:0 15px;font-size:12px}.comment-actions-form .comment-form-submit{z-index:1;border:none;opacity:0;margin:-2px;white-space:nowrap;border-radius:4px;height:38px;width:80px;display:inline-block;background-color:rgba(29,47,58,0.6);cursor:pointer;line-height:38px}.comment-actions-form .comment-form-submit .icon{margin:9px;fill:#fff;cursor:pointer;width:20px;height:20px}.comment-actions-form .comment-form-submit:hover{background-color:rgba(29,47,58,0.75)}.comment-form-user{display:flex;opacity:0;transition:all .5s .2s;height:0;margin:-40px -5px 40px;overflow:hidden;line-height:32px}.comment-form-user .comment-form-guest{display:flex;flex-wrap:wrap;flex:1}.comment-form-user .comment-form-auth{height:32px}.comment-form-user .comment-form-login{background-color:transparent;border:none;height:32px;width:32px;margin:0 0 0 5px;cursor:pointer}.comment-thread-form{text-align:center;color:#656c7a;line-height:32px}.comment-thread-form .comment-form-submit{background-color:rgba(29,47,58,0.6);border:none;white-space:nowrap;border-radius:4px;height:38px;width:120px;display:inline-block;cursor:pointer;line-height:38px;margin:10px 0;color:#fff;font-size:15px}.comment-thread-form .comment-form-submit:hover{background-color:rgba(29,47,58,0.75)}.comment-form-item{display:flex;margin:10px 0}.comment-form-item .comment-form-label{display:block;height:32px;line-height:32px;color:#656c7a;width:100px;text-align:right;font-weight:bold}.comment-form-item .comment-form-textarea{background-color:#fff;border:2px solid #dbdfe4;transition:all .2s linear;padding:2px 10px;border-radius:4px;height:64px;margin:0 5px;width:30px;line-height:20px;flex:auto}.comment-form-item .comment-form-textarea:focus{border:2px solid #c2c6cc}.comment-form-input{background-color:#fff;border:2px solid #dbdfe4;transition:all .2s linear;padding:0 7px;border-radius:4px;height:32px;margin:0 5px;width:30px;line-height:32px;flex:auto}.comment-form-input::-webkit-input-placeholder{color:#7f919e}.comment-form-input::-moz-placeholder{color:#7f919e}.comment-form-input:focus{border:2px solid #c2c6cc}.comment-form-input[disabled]{color:#656c7a}.comment-list:empty:after{content:attr(data-tips);display:block;opacity:.6;line-height:80px;text-align:center}.comment-list p{margin:0}.comment-list a{text-decoration:none;color:#288ce4}.comment-list a[href=\\"javascript:void(0);\\"]{color:#000;cursor:default}.comment-list code{line-height:20px;font-size:12px;font-family:monaco,menlo,monospace;padding:0 .3em;display:inline-block;vertical-align:top;margin:2px}.comment-list pre{overflow-x:auto;margin:0 0 15px;border-left:4px solid #7f919e;padding:0 0 0 12px}.comment-list pre code{display:block;overflow-y:hidden;white-space:pre;line-height:1.1}.comment-list #comment-preview{opacity:.6}.comment-list .comment-item{padding-top:6px}.comment-list .comment-item-body{display:flex;margin-bottom:5px}.comment-list .comment-item-header,.comment-list .comment-item-footer{line-height:1.2;color:#c2c6cc}.comment-list .comment-item-header .comment-item-bullet,.comment-list .comment-item-footer .comment-item-bullet{padding:0 2px}.comment-list .comment-item-header{font-size:13px}.comment-list .comment-item-header .comment-item-pname{color:#656c7a;position:relative}.comment-list .comment-item-header .comment-item-pname .icon{width:12px;height:12px;margin:1px 2px;vertical-align:top;fill:#656c7a}.comment-list .comment-item-header .comment-item-pname:hover{color:#2a2e2e}.comment-list .comment-item-header .comment-item-pname:hover .icon{fill:#656c7a}.comment-list .comment-item-header .comment-item-pname:hover .comment-item-parent{display:flex}.comment-list .comment-item-header .comment-item-parent{display:none;position:absolute;border-radius:3px;border:2px solid #dbdfe4;padding:5px;width:250px;background-color:#fff;align-items:center;height:48px;top:50%;margin-top:-24px;left:15px;line-height:18px;box-shadow:0 1px 1px 0 rgba(0,0,0,0.1)}.comment-list .comment-item-header .comment-item-parent .comment-item-pmain{width:calc(100% - 42px)}.comment-list .comment-item-header .comment-item-parent .comment-item-pheader{color:#656c7a}.comment-list .comment-item-header .comment-item-parent .comment-item-pcontent{font-size:12px;padding:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.comment-list .comment-item-header .comment-item-badge{color:#fff;background:#7f919e;padding:1px 3px;margin:0 2px;font-size:10px;line-height:1.1;font-weight:700;border-radius:3px;display:inline-block}.comment-list .comment-item-header .comment-item-time{font-size:12px;color:#7f919e;word-spacing:-2px;font-weight:400}.comment-list .comment-item-header .comment-item-name{color:#0095dd;font-weight:700}.comment-list .comment-item-header .comment-item-name[href^=\\"javascript\\"]{cursor:text;color:#000}.comment-list .comment-item-footer{font-size:12px;padding:5px 0}.comment-list .comment-item-footer .comment-item-reply,.comment-list .comment-item-footer .comment-item-edit,.comment-list .comment-item-footer .comment-item-delete{color:#656c7a;font-weight:500}.comment-list .comment-item-footer .comment-item-reply:hover,.comment-list .comment-item-footer .comment-item-edit:hover,.comment-list .comment-item-footer .comment-item-delete:hover{color:#2a2e2e}.comment-list .comment-item-footer .comment-item-cancel{color:#0095dd;font-weight:700}.comment-list .comment-item-image a{display:inline-block}.comment-list .comment-item-image img{display:block;border-radius:3px;max-width:100%;max-height:480px}.comment-list iframe{width:100%}.comment-list .comment-item.transparent{opacity:.4}.comment-list .comment-item-content{padding-top:5px;letter-spacing:.5px}.comment-list .comment-item-content spoiler{display:inline;background-color:#687a86;color:transparent;white-space:pre-wrap}.comment-list .comment-item-content spoiler:hover{color:#2e2e2e;background-color:transparent}.comment-list .comment-item-content p{margin-bottom:5px}.comment-list .comment-item-content p:last-child{margin-bottom:0}.comment-list .comment-item-content a[data-dsq-mention]:before{content:\\"@\\"}.comment-list .comment-item-content .comment-item-content{min-height:20px}.comment-list .comment-item-content img.emojione{vertical-align:top;width:24px;height:24px;margin:0 3px}.comment-list .comment-item-children .comment-item-avatar,.comment-list .comment-item-children .comment-item-avatar img,.comment-list .comment-item-children .comment-box .comment-avatar,.comment-list .comment-item-children .comment-box .comment-avatar-image,.comment-list .comment-item-body+.comment-box .comment-avatar,.comment-list .comment-item-body+.comment-box .comment-avatar-image{width:36px;height:36px;margin-right:6px;box-shadow:0 0.5px 0.5px 0 rgba(0,0,0,0.05)}.comment-list .comment-form-textarea{height:32px;padding:5px;line-height:22px;font-size:15px}.comment-list .comment-item-main{width:calc(100% - 60px)}.comment-list .comment-item-main:empty{line-height:48px}.comment-list .comment-item-main:empty:after{content:attr(data-message);line-height:36px;color:#7f919e}.comment-list .comment-box{margin:0}.comment-list .comment-box+.comment-item-body{display:none}.comment-list .comment-item-body+.comment-box{padding-left:60px;padding-top:6px;margin-bottom:20px}.comment-list .comment-item-children{padding-left:60px}.comment-list .comment-item-children .comment-item-main{width:calc(100% - 42px)}.comment-list .comment-item-children .comment-item-main:empty{line-height:36px}.comment-list .comment-item-children .comment-item-children,.comment-list .comment-item-children .comment-item-body+.comment-box{padding-left:42px}.comment-list .comment-item-children .comment-item-children .comment-item-children .comment-item-children,.comment-list .comment-item-children .comment-item-children .comment-item-children .comment-box,.comment-list .comment-item-children .comment-item-body+.comment-box .comment-item-children .comment-item-children,.comment-list .comment-item-children .comment-item-body+.comment-box .comment-item-children .comment-box{padding-left:0}.comment-list .comment-item-loadmore{font-size:13px;text-decoration:underline;display:block;margin:10px 0}.comment-loadmore{font-weight:500;display:block;text-align:center;padding:11px 14px;background-color:rgba(29,47,58,0.6);color:#fff !important;line-height:1.1;border-radius:3px;transition:background .2s;text-shadow:none}.comment-loadmore:hover{background-color:rgba(29,47,58,0.7)}.comment-loadmore.loading{background-color:#edeff2;color:#444 !important;cursor:wait}.comment-form-error{position:absolute;background-color:#fff;padding:10px;line-height:20px;border-radius:3px;box-shadow:0 0 5px 1px rgba(0,0,0,0.3);margin-top:40px;margin-left:2px;z-index:10}.comment-form-error:before{content:\\"\\";display:block;position:absolute;width:10px;height:10px;transform:rotate(45deg);background-color:#fff;box-shadow:0 0 5px 1px rgba(0,0,0,0.3);top:-4px;left:15px}.comment-form-error:after{content:\\"\\";display:block;position:absolute;width:20px;height:12px;top:0;left:10px;background-color:#fff}.comment-list,.comment-item-children{text-align:left;list-style:none;margin-left:0;line-height:20px}.comment-avatar,.comment-item-avatar{display:block;width:48px;height:48px;margin-right:12px}.comment-avatar img,.comment-item-avatar img{border-radius:3px;width:48px;height:48px}.mention-user{background-color:#fff;border-radius:2px;box-shadow:1px 1px 2px 1px rgba(29,47,58,0.2);position:absolute;overflow:hidden}.mention-user .mention-user-list{list-style:none}.mention-user .mention-user-item{height:30px;padding:3px;line-height:24px;font-size:12px;display:flex;cursor:default}.mention-user .mention-user-item.active{background-color:#2e9fff;color:#fff}.mention-user .mention-user-item.active .mention-user-name{color:#fff}.mention-user .mention-user-avatar{width:24px;height:24px;border-radius:3px;display:block}.mention-user .mention-user-username{font-weight:600;padding-left:4px}.mention-user .mention-user-name{color:#656c7a;padding-left:4px}.comment-related{color:#444;margin-top:20px;width:100%}.comment-related .comment-related-title{font-weight:700;text-transform:uppercase;color:rgba(34,59,74,0.5);margin-bottom:5px;white-space:nowrap;text-overflow:ellipsis}.comment-related .comment-related-forumname{color:#413a3a}.comment-related .related-list{display:flex;flex-wrap:wrap;list-style:none}.comment-related .related-list .related-item{width:48%;margin-bottom:10px}.comment-related .related-list .related-item:nth-child(odd){margin-right:4%}.comment-related .related-list .related-item-link{color:#000}.comment-related .related-list .related-item-link:hover .related-item-avatar{opacity:.8}.comment-related .related-list .related-item-link:hover .related-item-name{color:#aaa}.comment-related .related-list .related-item-title{display:block;overflow:hidden;font-weight:700}.comment-related .related-list .related-item-desc{color:rgba(30,55,70,0.4);font-weight:500;font-size:12px}.comment-related .related-list .related-item-post{padding:5px 0;display:flex}.comment-related .related-list .related-item-avatar{width:30px;height:30px;margin-right:5px;flex:none}.comment-related .related-list .related-item-avatar img{display:block;width:100%;border-radius:3px}.comment-related .related-list .related-item-main{flex:1;height:30px;line-height:15px;overflow:hidden;font-size:13px}.comment-related .related-list .related-item-name{color:rgba(30,55,70,0.4);font-weight:600}.comment-related .related-list .related-item-message{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.comment-reaction{display:flex;flex-direction:column}.comment-reaction .comment-reaction-header{text-align:center;line-height:25px}.comment-reaction .comment-reaction-list{display:flex;justify-content:center;list-style-type:none;flex-wrap:wrap;align-items:center}.comment-reaction .comment-reaction-list:not(:empty){padding:10px 0}.comment-reaction .comment-reaction-list .comment-reaction-item{display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:12px;color:#656c7a;margin-right:10px}.comment-reaction .comment-reaction-list .comment-reaction-item:last-child{margin-right:0}.comment-reaction .comment-reaction-list .comment-reaction-btn{display:flex;align-items:center;padding:0 5px;border:1px solid #c2c6cc;border-radius:3px;height:30px;line-height:30px;max-width:100px;color:#656c7a}.comment-reaction .comment-reaction-list .comment-reaction-btn.selected{border-color:#656c7a}.comment-reaction .comment-reaction-list .comment-reaction-count{padding:5px 0}.comment-reaction .comment-reaction-list .comment-reaction-text{margin-left:5px}.comment-reaction .comment-reaction-list img{width:20px;height:20px}@-webkit-keyframes disqus-loader-spinner-animation{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes disqus-loader-spinner-animation{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@media screen and (max-width: 450px){.comment-reaction-text{display:none}.comment-form-wrapper.editing .comment-actions-form{margin:180px 0 0}.comment-form-wrapper.logged-in .comment-actions-form{margin:0}.comment-item .at{display:none}.comment-item .comment-avatar{display:none}.comment-item .comment-form{width:100%}.comment-item .comment-item-children .comment-item-children,.comment-item .comment-item-children .comment-box{padding-left:0 !important}.comment-item .comment-item-children .comment-item-avatar{display:none}.comment-item .comment-item-children .comment-item-main,.comment-item .comment-item-children .comment-form{width:100%}.comment-form-user{line-height:42px}.comment-form-user .comment-form-auth{margin:5px}.comment-form-user .comment-form-input{margin:5px;width:100%}.comment-related .related-list .related-item{width:100%;padding-left:10px}}\\n", ""]);\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/iDisqus.scss?./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??ref--4-2!./node_modules/sass-loader/dist/cjs.js')},"./node_modules/css-loader/dist/runtime/api.js":function(module,exports,__webpack_require__){eval("\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}\n\n//# sourceURL=webpack://%5Bname%5D/./node_modules/css-loader/dist/runtime/api.js?")},"./node_modules/style-loader/lib/addStyles.js":function(module,exports,__webpack_require__){eval('/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === "undefined") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve "head" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector("#foo").shadowRoot }\n                // }\n                if (typeof target === \'function\') {\n                        return target();\n                }\n                if (typeof memo[target] === "undefined") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(/*! ./urls */ "./node_modules/style-loader/lib/urls.js");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== "undefined" && DEBUG) {\n\t\tif (typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === "object" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== "boolean") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = "head";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = "bottom";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error("Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === "top") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === "bottom") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === "object" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error("[Style Loader]\\n\\n Invalid value for parameter \'insertAt\' (\'options.insertAt\') found.\\n Must be \'top\', \'bottom\', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement("style");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = "text/css";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement("link");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = "text/css";\n\t}\n\toptions.attrs.rel = "stylesheet";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (false) {}\n\n\treturn __webpack_require__.nc;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === \'function\'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don\'t add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === "function" &&\n\t\ttypeof URL.createObjectURL === "function" &&\n\t\ttypeof URL.revokeObjectURL === "function" &&\n\t\ttypeof Blob === "function" &&\n\t\ttypeof btoa === "function"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join(\'\\n\');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? "" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute("media", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn\'t defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += "\\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";\n\t}\n\n\tvar blob = new Blob([css], { type: "text/css" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n//# sourceURL=webpack://%5Bname%5D/./node_modules/style-loader/lib/addStyles.js?')},"./node_modules/style-loader/lib/urls.js":function(module,exports){eval('\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function "fixes" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== "undefined" && window.location;\n\n  if (!location) {\n    throw new Error("fixUrls requires window.location");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== "string") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + "//" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, "/");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word "url" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn\'t a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn\'t a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn\'t a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^"(.*)"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^\'(.*)\'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf("//") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf("/") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with \'/\'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, ""); // Strip leading \'./\'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn "url(" + JSON.stringify(newUrl) + ")";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n//# sourceURL=webpack://%5Bname%5D/./node_modules/style-loader/lib/urls.js?')},"./node_modules/webpack/buildin/module.js":function(module,exports){eval('module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, "loaded", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, "id", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n//# sourceURL=webpack://%5Bname%5D/(webpack)/buildin/module.js?')},"./src/iDisqus.js":function(module,exports,__webpack_require__){eval("/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_RESULT__;/*!\r\n * \r\n * @author fooleap\r\n * @email fooleap@gmail.com\r\n * @create 2017-06-17 20:48:25\r\n * @update 2021-05-11 11:58:38\r\n * @version 0.2.31\r\n * Copyright 2017-2021 fooleap\r\n * Released under the MIT license\r\n */\r\n__webpack_require__(/*! ./iDisqus.scss */ \"./src/iDisqus.scss\");\r\n(function (global) {\r\n    'use strict';\r\n\r\n    var d = document,\r\n        l = localStorage,\r\n        scripts = d.scripts,\r\n        lasturl = scripts[scripts.length - 1].src,\r\n        filepath = lasturl.substring(0, lasturl.lastIndexOf('/')),\r\n        isEdge = navigator.userAgent.indexOf(\"Edge\") > -1,\r\n        isIE = !!window.ActiveXObject || \"ActiveXObject\" in window;\r\n\r\n    function getLocation(href) {\r\n        var link = d.createElement('a');\r\n        link.href = href;\r\n        return link;\r\n    }\r\n\r\n    function getAjax(url, success, error) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('GET', encodeURI(url));\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                success(xhr.responseText);\r\n            }\r\n        }\r\n        xhr.onerror = error;\r\n        xhr.withCredentials = true;\r\n        xhr.send();\r\n        return xhr;\r\n    }\r\n\r\n    function postAjax(url, data, success, error) {\r\n        var params = typeof data == 'string' ? data : Object.keys(data).filter(function (k) {\r\n            return data[k] != null;\r\n        }).map(function (k) {\r\n            return encodeURIComponent(k) + '=' + encodeURIComponent(data[k])\r\n        }).join('&');\r\n\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('POST', url);\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                success(xhr.responseText);\r\n            }\r\n        };\r\n        xhr.onerror = error;\r\n        xhr.withCredentials = true;\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n        xhr.send(params);\r\n        return xhr;\r\n    }\r\n\r\n    function generateGUID() {\r\n        var time = Number(new Date().getTime().toString().substring(3));\r\n        var guid = Math.abs(time + Math.floor(Math.random() * 1e5) - 48 * 1e6 + Math.floor(Math.random() * 1e6)).toString(32);\r\n        guid += Math.floor(Math.random() * 1e9).toString(32);\r\n        return guid;\r\n    }\r\n\r\n    (function (ElementProto) {\r\n        // matches & closest polyfill https://github.com/jonathantneal/closest\r\n        if (typeof ElementProto.matches !== 'function') {\r\n            ElementProto.matches = ElementProto.msMatchesSelector || ElementProto.mozMatchesSelector || ElementProto.webkitMatchesSelector || function matches(selector) {\r\n                var element = this;\r\n                var elements = (element.document || element.ownerDocument).querySelectorAll(selector);\r\n                var index = 0;\r\n\r\n                while (elements[index] && elements[index] !== element) {\r\n                    ++index;\r\n                }\r\n\r\n                return Boolean(elements[index]);\r\n            };\r\n        }\r\n\r\n        if (typeof ElementProto.closest !== 'function') {\r\n            ElementProto.closest = function closest(selector) {\r\n                var element = this;\r\n\r\n                while (element && element.nodeType === 1) {\r\n                    if (element.matches(selector)) {\r\n                        return element;\r\n                    }\r\n\r\n                    element = element.parentNode;\r\n                }\r\n\r\n                return null;\r\n            };\r\n        }\r\n\r\n        // 事件委托\r\n        ElementProto.on = function on(eventName, selector, handler) {\r\n            this.addEventListener(eventName, function (e) {\r\n                for (var target = e.target; target && target != this; target = target.parentNode) {\r\n                    if (target.matches(selector)) {\r\n                        handler.call(null, e, target);\r\n                        break;\r\n                    }\r\n                }\r\n            }, true);\r\n        };\r\n\r\n    })(window.Element.prototype);\r\n\r\n    // 访客信息\r\n    var User = function () {\r\n        this.dom = arguments[0];\r\n        this.opts = arguments[1];\r\n        this.init();\r\n        this.autologin();\r\n    }\r\n\r\n    User.prototype = {\r\n        // 初始化访客信息\r\n        init: function () {\r\n            var _ = this;\r\n            // 读取访客信息\r\n            _.name = l.getItem('name');\r\n            _.email = l.getItem('email');\r\n            _.url = l.getItem('url');\r\n            _.avatar = l.getItem('avatar');\r\n            _.type = l.getItem('type');\r\n            _.logged_in = l.getItem('logged_in');\r\n            _.unique = l.getItem('disqus_unique')\r\n            if (!l.getItem('vote')) {\r\n                l.setItem('vote', JSON.stringify({}));\r\n            }\r\n            if (!l.getItem('reaction_vote')) {\r\n                l.setItem('reaction_vote', JSON.stringify({}));\r\n            }\r\n            _.vote = JSON.parse(l.getItem('vote'));\r\n            _.reactionVote = JSON.parse(l.getItem('reaction_vote'));\r\n\r\n            var boxarr = _.dom.getElementsByClassName('comment-box');\r\n            if (_.logged_in == 'true') {\r\n                [].forEach.call(boxarr, function (item) {\r\n                    if (_.type == '1') {\r\n                        item.querySelector('.comment-form-wrapper').classList.add('logged-in');\r\n                    }\r\n                    item.querySelector('.comment-form-name').value = _.name;\r\n                    item.querySelector('.comment-form-email').value = _.email;\r\n                    item.querySelector('.comment-form-url').value = _.url;\r\n                    item.querySelector('.comment-avatar-image').src = _.avatar;\r\n                });\r\n            } else {\r\n                [].forEach.call(boxarr, function (item) {\r\n                    item.querySelector('.comment-form-wrapper').classList.remove('logged-in');\r\n                    item.querySelector('.comment-form-name').value = '';\r\n                    item.querySelector('.comment-form-email').value = '';\r\n                    item.querySelector('.comment-form-url').value = '';\r\n                    item.querySelector('.comment-avatar-image').src = _.dom.querySelector('.comment-avatar-image').dataset.avatar;\r\n                });\r\n                l.setItem('logged_in', 'false');\r\n            }\r\n\r\n            if (_.type == '1' && _.logged_in == 'true') {\r\n                var $login = _.dom.querySelector('.comment-login');\r\n                if (!!$login) {\r\n                    $login.innerHTML = _.name + '<label class=\"comment-logout\"  title=\"退出\" for=\"comment-user\">退出登录</label>';\r\n                    $login.title = _.name;\r\n                    $login.classList.add('comment-user');\r\n                    $login.classList.remove('comment-login');\r\n                    _.dom.querySelector('#comment-user').checked = false;\r\n                }\r\n            } else {\r\n                var $user = _.dom.querySelector('.comment-user');\r\n                if (!!$user) {\r\n                    $user.innerHTML = '登录';\r\n                    $user.title = '使用 Disqus 帐号授权登录';\r\n                    $user.classList.add('comment-login');\r\n                    $user.classList.remove('comment-user');\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        // 自动登录\r\n        autologin: function () {\r\n            var _ = this;\r\n            getAjax(_.opts.api + '/user.php', function (resp) {\r\n                var data = JSON.parse(resp);\r\n                if (data.code == 0) {\r\n                    var user = data.response;\r\n                    _.avatar = user.avatar;\r\n                    _.name = user.name;\r\n                    _.username = user.username;\r\n                    _.url = user.url;\r\n                    _.type = user.type\r\n                    _.submit();\r\n                } else {\r\n                    if (_.type == '1') {\r\n                        l.setItem('logged_in', 'false');\r\n                        _.init();\r\n                    } else {\r\n                        l.setItem('type', '0');\r\n                        if (!_.unique) {\r\n                            l.setItem('disqus_unique', generateGUID());\r\n                        }\r\n                        _.init();\r\n                    }\r\n                }\r\n            }, function () {\r\n            })\r\n        },\r\n\r\n        // 登录\r\n        login: function () {\r\n\r\n            var _ = this;\r\n            var popup = window.open(_.opts.api + '/login.php', 'Disqus Oauth', 'width=470,height=508');\r\n            var timer;\r\n            function isLogged() {\r\n                if (!popup || !popup.closed) return;\r\n                clearInterval(timer);\r\n                _.user.autologin();\r\n            }\r\n            timer = setInterval(isLogged, 100);\r\n\r\n        },\r\n\r\n        // 退出登录\r\n        logout: function () {\r\n            var _ = this;\r\n            postAjax(_.opts.api + '/logout.php', {}, function (resp) {\r\n                l.setItem('logged_in', 'false');\r\n                l.removeItem('type');\r\n                l.removeItem('email');\r\n                l.removeItem('avatar');\r\n                l.removeItem('name');\r\n                l.removeItem('url');\r\n                l.removeItem('disqus_unique');\r\n                l.removeItem('vote');\r\n                l.removeItem('reaction_vote');\r\n                _.user.init();\r\n            })\r\n        },\r\n\r\n        // 提交访客信息\r\n        submit: function () {\r\n            var _ = this;\r\n            l.setItem('email', _.email);\r\n            l.setItem('type', _.type);\r\n            l.setItem('name', _.name);\r\n            l.setItem('url', _.url);\r\n            l.setItem('avatar', _.avatar);\r\n            l.setItem('disqus_unique', _.unique);\r\n            l.setItem('logged_in', 'true');\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    var iDisqus = function () {\r\n        var _ = this;\r\n\r\n        // 配置\r\n        _.opts = typeof (arguments[1]) == 'object' ? arguments[1] : arguments[0];\r\n        _.dom = d.getElementById(typeof (arguments[0]) == 'string' ? arguments[0] : 'comment');\r\n        _.opts.api = _.opts.api.slice(-1) == '/' ? _.opts.api.slice(0, -1) : _.opts.api;\r\n        _.opts.site = _.opts.site || location.origin;\r\n        if (!!_.opts.url) {\r\n            var optsUrl = _.opts.url.replace(_.opts.site, '');\r\n            _.opts.url = optsUrl.slice(0, 1) != '/' ? '/' + optsUrl : optsUrl;\r\n        } else if (isEdge || isIE) {\r\n            _.opts.url = encodeURI(location.pathname) + encodeURI(location.search);\r\n        } else {\r\n            _.opts.url = location.pathname + location.search;\r\n        }\r\n        _.opts.identifier = _.opts.identifier || _.opts.url;\r\n        _.opts.link = _.opts.site + _.opts.url;\r\n        _.opts.title = _.opts.title || d.title;\r\n        _.opts.slug = !!_.opts.slug ? _.opts.slug.replace(/[^A-Za-z0-9_-]+/g, '') : '';\r\n        _.opts.desc = _.opts.desc || (!!d.querySelector('[name=\"description\"]') ? d.querySelector('[name=\"description\"]').content : '');\r\n        _.opts.mode = _.opts.mode || 1;\r\n        _.opts.timeout = _.opts.timeout || 3000;\r\n        _.opts.toggle = !!_.opts.toggle ? d.getElementById(_.opts.toggle) : null;\r\n        _.opts.autoCreate = !!_.opts.autoCreate || !!_.opts.auto;\r\n        _.opts.relatedType = _.opts.relatedType || 'related'\r\n\r\n        // emoji 表情\r\n        _.opts.emojiPath = _.opts.emojiPath || _.opts.emoji_path || 'https://github.githubassets.com/images/icons/emoji/unicode/';\r\n        _.emojiList = _.opts.emojiList || _.opts.emoji_list || [{\r\n            code: 'smile',\r\n            title: '笑脸',\r\n            unicode: '1f604'\r\n        }, {\r\n            code: 'mask',\r\n            title: '生病',\r\n            unicode: '1f637'\r\n        }, {\r\n            code: 'joy',\r\n            title: '破涕为笑',\r\n            unicode: '1f602'\r\n        }, {\r\n            code: 'stuck_out_tongue_closed_eyes',\r\n            title: '吐舌',\r\n            unicode: '1f61d'\r\n        }, {\r\n            code: 'flushed',\r\n            title: '脸红',\r\n            unicode: '1f633'\r\n        }, {\r\n            code: 'scream',\r\n            title: '恐惧',\r\n            unicode: '1f631'\r\n        }, {\r\n            code: 'pensive',\r\n            title: '失望',\r\n            unicode: '1f614'\r\n        }, {\r\n            code: 'unamused',\r\n            title: '无语',\r\n            unicode: '1f612'\r\n        }, {\r\n            code: 'grin',\r\n            title: '露齿笑',\r\n            unicode: '1f601'\r\n        }, {\r\n            code: 'heart_eyes',\r\n            title: '色',\r\n            unicode: '1f60d'\r\n        }, {\r\n            code: 'sweat',\r\n            title: '汗',\r\n            unicode: '1f613'\r\n        }, {\r\n            code: 'smirk',\r\n            title: '得意',\r\n            unicode: '1f60f'\r\n        }, {\r\n            code: 'relieved',\r\n            title: '满意',\r\n            unicode: '1f60c'\r\n        }, {\r\n            code: 'rolling_eyes',\r\n            title: '翻白眼',\r\n            unicode: '1f644'\r\n        }, {\r\n            code: 'ok_hand',\r\n            title: 'OK',\r\n            unicode: '1f44c'\r\n        }, {\r\n            code: 'v',\r\n            title: '胜利',\r\n            unicode: '270c'\r\n        }];\r\n\r\n        if (!!_.opts.emoji_preview || !!_.opts.emojiPreview) {\r\n            getAjax(_.opts.api + '/eac.php', function (resp) {\r\n                _.eac = JSON.parse(resp);\r\n            }, function () {\r\n            })\r\n        }\r\n\r\n        // 默认状态\r\n        _.stat = {\r\n            current: 'idisqus', // 当前显示评论框\r\n            loaded: false,      // 评论框已加载\r\n            loading: false,     // 评论加载中\r\n            editing: false,     // 评论编辑中\r\n            offsetTop: 0,       // 高度位置\r\n            next: null,         // 下条评论\r\n            message: null,      // 新评论\r\n            mediaHtml: null,    // 新上传图片\r\n            forum: {},          // 站点信息\r\n            thread: {},         // 文章信息\r\n            post: {},           // 评论数据\r\n            media: {},          // 媒体信息\r\n            root: [],           // 根评论\r\n            order: 'desc',      // 排序\r\n            users: [],          // Disqus 会员\r\n            imageSize: [],      // 已上传图片大小\r\n            disqusLoaded: false // Disqus 已加载\r\n        };\r\n\r\n        // Disqus 评论框设置\r\n        window.disqus_config = function () {\r\n            this.page.identifier = _.opts.identifier;\r\n            this.page.title = _.opts.title;\r\n            this.page.url = _.opts.link;\r\n            this.callbacks.onReady.push(function () {\r\n                _.stat.current = 'disqus';\r\n                _.stat.disqusLoaded = true;\r\n                _.dom.querySelector('#idisqus').style.display = 'none';\r\n                _.dom.querySelector('#disqus_thread').style.display = 'block';\r\n                if (_.opts.mode == 3 && !!_.opts.toggle) {\r\n                    _.opts.toggle.disabled = '';\r\n                    _.opts.toggle.checked = true;\r\n                    _.opts.toggle.addEventListener('change', _.handle.toggle, false);\r\n                }\r\n            });\r\n            // 原生评论框发邮件\r\n            this.callbacks.onNewComment = [function (comment, a) {\r\n                var postData = {\r\n                    id: comment.id\r\n                }\r\n                // 异步发送邮件\r\n                setTimeout(function () {\r\n                    postAjax(_.opts.api + '/sendemail.php', postData, function (resp) {\r\n                        console.info('邮件发送成功！');\r\n                    })\r\n                }, 2000);\r\n            }];\r\n        }\r\n\r\n        // 自动初始化\r\n        if (!!_.opts.init) {\r\n            _.init();\r\n            //console.log(_);\r\n        }\r\n    }\r\n\r\n    // TimeAgo https://coderwall.com/p/uub3pw/javascript-timeago-func-e-g-8-hours-ago\r\n    iDisqus.prototype.timeAgo = function () {\r\n\r\n        var _ = this;\r\n        var templates = {\r\n            prefix: \"\",\r\n            suffix: \"前\",\r\n            seconds: \"几秒\",\r\n            minute: \"1分钟\",\r\n            minutes: \"%d分钟\",\r\n            hour: \"1小时\",\r\n            hours: \"%d小时\",\r\n            day: \"1天\",\r\n            days: \"%d天\",\r\n            week: \"1周\",\r\n            weeks: \"%d周\",\r\n            month: \"1个月\",\r\n            months: \"%d个月\",\r\n            year: \"1年\",\r\n            years: \"%d年\"\r\n        };\r\n        var template = function (t, n) {\r\n            return templates[t] && templates[t].replace(/%d/i, Math.abs(Math.round(n)));\r\n        };\r\n\r\n        var timer = function (time) {\r\n            if (!time) return;\r\n            time = time.replace(/\\.\\d+/, \"\"); // remove milliseconds\r\n            time = time.replace(/-/, \"/\").replace(/-/, \"/\");\r\n            time = time.replace(/T/, \" \").replace(/Z/, \" UTC\");\r\n            time = time.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\r\n            time = new Date(time * 1000 || time);\r\n\r\n            var now = new Date();\r\n            var seconds = ((now.getTime() - time) * .001) >> 0;\r\n            var minutes = seconds / 60;\r\n            var hours = minutes / 60;\r\n            var days = hours / 24;\r\n            var weeks = days / 7;\r\n            var months = days / 30;\r\n            var years = days / 365;\r\n\r\n            return templates.prefix + (seconds < 45 && template('seconds', seconds) || seconds < 90 && template('minute', 1) || minutes < 45 && template('minutes', minutes) || minutes < 90 && template('hour', 1) || hours < 24 && template('hours', hours) || hours < 42 && template('day', 1) || days < 30 && template('days', days) || days < 45 && template('month', 1) || days < 365 && template('months', months) || years < 1.5 && template('year', 1) || template('years', years)) + templates.suffix;\r\n        };\r\n\r\n        var elements = _.dom.querySelectorAll('time[datetime]');\r\n        for (var i in elements) {\r\n            var $this = elements[i];\r\n            if (typeof $this === 'object') {\r\n                $this.title = new Date($this.getAttribute('datetime'));\r\n                $this.innerHTML = timer($this.getAttribute('datetime'));\r\n            }\r\n        }\r\n\r\n        // update time every minute\r\n        setTimeout(_.timeAgo.bind(_), 60000);\r\n\r\n    }\r\n\r\n    // 初始化评论框\r\n    iDisqus.prototype.init = function () {\r\n        var _ = this;\r\n        if (!_.dom) {\r\n            //console.log('该页面没有评论框！');\r\n            return\r\n        }\r\n        // 表情\r\n        var emojiList = '';\r\n        _.emojiList.forEach(function (item) {\r\n            emojiList += '<li class=\"emojione-item\" title=\"' + item.title + '\" data-code=\":' + item.code + ':\"><img class=\"emojione-item-image\" src=\"' + _.opts.emojiPath + item.unicode + '.png\" /></li>';\r\n        })\r\n        _.dom.innerHTML = `<div class=\"comment init\" id=\"idisqus\">\r\n            <div class=\"comment-reaction\">\r\n                <div class=\"comment-reaction-header\">\r\n                    <div class=\"comment-reaction-prompt\"></div>\r\n                    <div class=\"comment-reaction-total\"></div>\r\n                </div>\r\n                <div class=\"comment-reaction-list\"></div>\r\n            </div>\r\n            <div class=\"init-container\" data-tips=\"正在初始化……\"><svg class=\"init-bg\" width=\"72\" height=\"72\" viewBox=\"0 0 720 720\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path class=\"ring\" fill=\"none\" stroke=\"#9d9ea1\" d=\"M 0 -260 A 260 260 0 1 1 -80 -260\" transform=\"translate(400,400)\" stroke-width=\"50\" /><polygon transform=\"translate(305,20)\" points=\"50,0 0,100 18,145 50,82 92,145 100,100\" style=\"fill:#9d9ea1\"/></svg></div>\r\n            <div class=\"comment-header\">\r\n                <div class=\"comment-header-primary\">\r\n                    <span class=\"comment-header-item\" id=\"comment-count\">评论</span>\r\n                    <a class=\"comment-header-item\" id=\"comment-link\" target=\"_blank\">在线讨论</a>\r\n                </div>\r\n                <div class=\"comment-header-menu\">\r\n                    <input class=\"comment-header-checkbox\" type=\"checkbox\" id=\"comment-user\">\r\n                    <label class=\"comment-header-item comment-login\" title=\"使用 Disqus 帐号授权登录\" for=\"comment-user\">登录</label>\r\n                </div>\r\n            </div>\r\n            <div class=\"comment-navbar\">\r\n                <div class=\"comment-navbar-item\">\r\n                    <a class=\"comment-recommend\" href=\"javascript:;\"><svg t=\"1537508059126\" class=\"icon\" style=\"\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"3234\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"24\" height=\"24\"><path d=\"M489.993 887.107 177.906 586.021c-4.002-3.501-114.033-104.031-114.033-224.063 0-146.54 89.526-234.065 239.069-234.065 87.523 0 169.546 69.019 209.058 108.03 39.512-39.011 121.535-108.03 209.059-108.03 149.542 0 239.068 87.525 239.068 234.065 0 120.033-110.031 220.563-114.533 225.065L534.007 887.107c-6 6-14.003 9-22.007 9C503.997 896.107 495.993 893.107 489.993 887.107z\" p-id=\"3235\"></path></svg><span class=\"comment-recommend-text\">推荐</span><span class=\"comment-recommend-count\"></span></a>\r\n                </div>\r\n                <div class=\"comment-navbar-item comment-order\">\r\n                  <input class=\"comment-order-radio\" id=\"order-popular\" type=\"radio\" name=\"comment-order\" value=\"popular\" />\r\n                  <label class=\"comment-order-label\" for=\"order-popular\" title=\"按评分高低排序\">最佳</label>\r\n                  <input class=\"comment-order-radio\" id=\"order-desc\" type=\"radio\" name=\"comment-order\" value=\"desc\" />\r\n                  <label class=\"comment-order-label\" for=\"order-desc\" title=\"按从新到旧排序\">最新</label>\r\n                  <input class=\"comment-order-radio\" id=\"order-asc\" type=\"radio\" name=\"comment-order\" value=\"asc\" />\r\n                  <label class=\"comment-order-label\" for=\"order-asc\" title=\"按从旧到新排序\">最早</label>\r\n                </div>\r\n            </div>\r\n            <div class=\"comment-box\">\r\n                <div class=\"comment-avatar avatar\"><img class=\"comment-avatar-image\" src=\"//a.disquscdn.com/images/noavatar92.png\" data-avatar=\"//a.disquscdn.com/images/noavatar92.png\"></div>\r\n                <div class=\"comment-form\">\r\n                    <div class=\"comment-form-wrapper\">\r\n                        <textarea class=\"comment-form-textarea\" placeholder=\"加入讨论……\"></textarea>\r\n                        <div class=\"comment-form-alert\"></div>\r\n                        <div class=\"comment-image\">\r\n                            <ul class=\"comment-image-list\"></ul>\r\n                            <div class=\"comment-image-progress\"><div class=\"comment-image-loaded\"></div></div>\r\n                        </div>\r\n        \r\n                        <div class=\"comment-actions\">\r\n        \r\n                            <div class=\"comment-actions-group\">\r\n                                <input id=\"emoji-input\" class=\"comment-actions-input\" type=\"checkbox\">\r\n                                <label class=\"comment-actions-label emojione\" for=\"emoji-input\">\r\n                                    <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\r\n                                        <g>\r\n                                            <title>选择表情</title>\r\n                                            <path d=\"M512 1024c-282.713043 0-512-229.286957-512-512s229.286957-512 512-512c282.713043 0 512 229.286957 512 512S792.486957 1024 512 1024zM512 44.521739c-258.226087 0-467.478261 209.252174-467.478261 467.478261 0 258.226087 209.252174 467.478261 467.478261 467.478261s467.478261-209.252174 467.478261-467.478261C979.478261 253.773913 768 44.521739 512 44.521739z\"></path>\r\n                                            <path d=\"M801.391304 554.295652c0 160.278261-129.113043 289.391304-289.391304 289.391304s-289.391304-129.113043-289.391304-289.391304L801.391304 554.295652z\"></path>\r\n                                            <path d=\"M674.504348 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\r\n                                            <path d=\"M347.269565 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\r\n                                        </g>\r\n                                    </svg>\r\n                                    <ul class=\"emojione-list\">${ emojiList}</ul>\r\n                                </label>\r\n                                <input id=\"upload-input\" class=\"comment-actions-input comment-image-input\" type=\"file\" accept=\"image/*\" name=\"file\">\r\n                                <label class=\"comment-actions-label\" for=\"upload-input\">\r\n                                    <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\r\n                                        <g>\r\n                                            <title>上传图片</title>\r\n                                            <path d=\"M15.515152 15.515152 15.515152 15.515152 15.515152 15.515152Z\"></path>\r\n                                            <path d=\"M15.515152 139.636364l0 806.787879 992.969697 0 0-806.787879-992.969697 0zM946.424242 884.363636l-868.848485 0 0-682.666667 868.848485 0 0 682.666667zM698.181818 356.848485c0-51.417212 41.673697-93.090909 93.090909-93.090909s93.090909 41.673697 93.090909 93.090909c0 51.417212-41.673697 93.090909-93.090909 93.090909s-93.090909-41.673697-93.090909-93.090909zM884.363636 822.30303l-744.727273 0 186.181818-496.484848 248.242424 310.30303 124.121212-93.090909z\"></path>\r\n                                        </g>\r\n                                    </svg>\r\n                                </label>\r\n                            </div>\r\n        \r\n                            <div class=\"comment-actions-form\">\r\n                                <button class=\"comment-form-submit\">\r\n                                    <svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\r\n                                        <path d=\"M565.747623 792.837176l260.819261 112.921839 126.910435-845.424882L66.087673 581.973678l232.843092 109.933785 562.612725-511.653099-451.697589 563.616588-5.996574 239.832274L565.747623 792.837176z\" fill=\"#ffffff\"></path>\r\n                                    </svg>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"comment-form-user\">\r\n                        <form class=\"comment-form-guest\"><input class=\"comment-form-input comment-form-name\" type=\"text\" name=\"name\" placeholder=\"名字（必填）\" autocomplete=\"name\" /><input class=\"comment-form-input comment-form-email\" type=\"email\" name=\"email\" placeholder=\"邮箱（必填）\" autocomplete=\"email\" /><input class=\"comment-form-input comment-form-url\" type=\"url\" name=\"url\" placeholder=\"网址（可选）\" autocomplete=\"url\" /></form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ul id=\"comments\" class=\"comment-list\" data-tips=\"评论加载中……\"></ul>\r\n            <a href=\"javascript:;\" class=\"comment-loadmore hide\">加载更多</a>\r\n            <div class=\"comment-related\"></div>\r\n        </div>\r\n        <div class=\"comment\" id=\"disqus_thread\"></div>`;\r\n\r\n        _.user = new User(_.dom, _.opts);\r\n        _.handle = {\r\n            logout: _.user.logout.bind(_),\r\n            login: _.user.login.bind(_),\r\n            loadMore: _.loadMore.bind(_),\r\n            loadMoreReply: _.loadMoreReply.bind(_),\r\n            post: _.post.bind(_),\r\n            threadCreate: _.threadCreate.bind(_),\r\n            threadVote: _.threadVote.bind(_),\r\n            reactionVote: _.reactionVote.bind(_),\r\n            remove: _.remove.bind(_),\r\n            show: _.show.bind(_),\r\n            toggle: _.toggle.bind(_),\r\n            upload: _.upload.bind(_),\r\n            verify: _.verify.bind(_),\r\n            jump: _.jump.bind(_),\r\n            mention: _.mention.bind(_),\r\n            keySelect: _.keySelect.bind(_),\r\n            field: _.field.bind(_),\r\n            focus: _.focus,\r\n            input: _.input.bind(_),\r\n            parentShow: _.parentShow.bind(_),\r\n            selectOrder: _.selectOrder.bind(_)\r\n        };\r\n\r\n        var $iDisqus = _.dom.querySelector('#idisqus');\r\n        $iDisqus.on('blur', '.comment-form-textarea', _.handle.focus);\r\n        $iDisqus.on('focus', '.comment-form-textarea', _.handle.focus);\r\n        $iDisqus.on('input', '.comment-form-textarea', _.handle.input);\r\n        $iDisqus.on('propertychange', '.comment-form-textarea', _.handle.input);\r\n        $iDisqus.on('keyup', '.comment-form-textarea', _.handle.mention);\r\n        $iDisqus.on('keydown', '.comment-form-textarea', _.handle.keySelect);\r\n        $iDisqus.on('blur', '.comment-form-name', _.handle.verify);\r\n        $iDisqus.on('blur', '.comment-form-email', _.handle.verify);\r\n        $iDisqus.on('click', '.comment-form-submit', _.handle.post);\r\n        $iDisqus.on('click', '.comment-login', _.handle.login);\r\n        $iDisqus.on('change', '.comment-image-input', _.handle.upload);\r\n        $iDisqus.on('click', '.emojione-item', _.handle.field);\r\n        $iDisqus.on('click', '.comment-logout', _.handle.logout);\r\n        $iDisqus.on('click', '.comment-item-reply', _.handle.show);\r\n        $iDisqus.on('click', '.comment-item-cancel', _.handle.show);\r\n        $iDisqus.on('click', '.comment-item-avatar', _.handle.jump);\r\n        $iDisqus.on('click', '.comment-item-pname', _.handle.jump);\r\n        $iDisqus.on('mouseover', '.comment-item-pname', _.handle.parentShow);\r\n        $iDisqus.on('click', '.comment-loadmore', _.handle.loadMore);\r\n        $iDisqus.on('click', '.comment-item-loadmore', _.handle.loadMoreReply);\r\n        $iDisqus.on('click', '#thread-submit', _.handle.threadCreate);\r\n        $iDisqus.on('click', '.comment-recommend', _.handle.threadVote);\r\n        $iDisqus.on('click', '.comment-reaction-btn:not(.selected)', _.handle.reactionVote);\r\n        $iDisqus.on('change', '.comment-order-radio', _.handle.selectOrder);\r\n\r\n        switch (_.opts.mode) {\r\n            case 1:\r\n                _.disqus();\r\n                break;\r\n            case 2:\r\n                _.threadInit();\r\n                break;\r\n            case 3:\r\n                _.threadInit();\r\n                _.disqus();\r\n                break;\r\n            default:\r\n                _.disqus();\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 切换评论框\r\n    iDisqus.prototype.toggle = function () {\r\n        var _ = this;\r\n        if (_.stat.current == 'disqus') {\r\n            _.stat.current = 'idisqus';\r\n            _.dom.querySelector('#idisqus').style.display = 'block';\r\n            _.dom.querySelector('#disqus_thread').style.display = 'none';\r\n        } else {\r\n            _.disqus();\r\n        }\r\n    }\r\n\r\n    // 加载 Disqus 评论\r\n    iDisqus.prototype.disqus = function () {\r\n        var _ = this;\r\n        var _tips = _.dom.querySelector('.init-container').dataset.tips;\r\n        if (_.opts.site != location.origin) {\r\n            console.log('本地环境不加载 Disqus 评论框！');\r\n            if (_.opts.mode == 1) {\r\n                _.threadInit();\r\n            }\r\n            return;\r\n        }\r\n        if (!_.stat.disqusLoaded) {\r\n            _tips = '尝试连接 Disqus……';\r\n\r\n            var s = d.createElement('script');\r\n            s.src = '//' + _.opts.forum + '.disqus.com/embed.js';\r\n            s.dataset.timestamp = Date.now();\r\n            s.onload = function () {\r\n                _.stat.disqusLoaded = true;\r\n                _tips = '连接成功，加载 Disqus 评论框……'\r\n            }\r\n            s.onerror = function () {\r\n                if (_.opts.mode == 1) {\r\n                    _tips = '连接失败，加载简易评论框……';\r\n                    _.threadInit();\r\n                }\r\n            }\r\n\r\n\r\n            var img = new Image();\r\n            img.onerror = function () {\r\n              if (_.opts.mode == 1) {\r\n                _tips = '连接超时，加载简易评论框……';\r\n                _.threadInit();\r\n              }\r\n            }\r\n            img.onload = function () {\r\n              (d.head || d.body).appendChild(s);\r\n              clearTimeout(timer)\r\n            };\r\n            img.src = 'https://disqus.com/favicon.ico?' + Date.now();\r\n            var timer = setTimeout(function () {\r\n              if ( !img.complete || !img.naturalWidth ) {\r\n                if (_.opts.mode == 1) {\r\n                  _tips = '连接失败，加载简易评论框……';\r\n                  _.threadInit();\r\n                }\r\n              }\r\n            }, _.opts.timeout);\r\n        } else {\r\n            _.stat.current = 'disqus';\r\n            _.dom.querySelector('#idisqus').style.display = 'none';\r\n            _.dom.querySelector('#disqus_thread').style.display = 'block';\r\n        }\r\n    }\r\n\r\n    // 添加事件监听\r\n    iDisqus.prototype.addListener = function (els, evt, func) {\r\n        var _ = this;\r\n        var el = _.dom.getElementsByClassName(els);\r\n        [].forEach.call(el, function (item) {\r\n            item.addEventListener(evt, func, false);\r\n        });\r\n    }\r\n\r\n    // 评论计数\r\n    iDisqus.prototype.count = function () {\r\n        var _ = this;\r\n        var counts = d.querySelectorAll('[data-disqus-url]');\r\n        var qty = counts.length;\r\n        if (qty > 0) {\r\n            var commentArr = [];\r\n            for (var i = 0; i < qty; i++) {\r\n                commentArr[i] = counts[i].dataset.disqusUrl.replace(_.opts.site, '');\r\n            }\r\n            getAjax(\r\n                _.opts.api + '/threadsList.php?links=' + commentArr.join(','),\r\n                function (resp) {\r\n                    var data = JSON.parse(resp);\r\n                    var posts = data.response;\r\n                    posts.forEach(function (item) {\r\n                        var link = document.createElement('a');\r\n                        link.href = item.link;\r\n                        var itemLink = link.href.replace(link.origin, '');\r\n                        var el = d.querySelector('[data-disqus-url$=\"' + itemLink + '\"]')\r\n                        if (!!el) {\r\n                            el.innerHTML = item.posts;\r\n                            el.dataset.disqusCount = item.posts;\r\n                        }\r\n                    });\r\n                }, function () {\r\n                    console.log('获取数据失败！')\r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    // 加载最近评论\r\n    iDisqus.prototype.postsList = function (listLimit, containerId) {\r\n        var _ = this;\r\n        listLimit = listLimit || 5;\r\n        var listContainer = d.getElementById(typeof (containerId) == 'string' ? containerId : 'disqusPostsList');\r\n        if (listContainer) {\r\n            getAjax(\r\n                _.opts.api + '/postsList.php?limit=' + listLimit,\r\n                function (resp) {\r\n                    var data = JSON.parse(resp);\r\n                    var posts = data.response;\r\n                    var popHtml = '';\r\n                    posts.forEach(function (item) {\r\n                        popHtml += `<li style=\"list-style-type: none;\">${item.name}: ${item.raw_message}</br>评: <a href=\"${item.thread.link}\">${item.thread.title}</a></li>`;\r\n                    });\r\n                    popHtml = `<ul>${popHtml}</ul`;\r\n                    listContainer.innerHTML = popHtml;\r\n                }, function () {\r\n                    console.log('获取数据失败！')\r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    // 加载相关话题\r\n    iDisqus.prototype.loadRelated = function () {\r\n        var _ = this;\r\n        if (_.stat.forum.settings.organicDiscoveryEnabled == false || _.stat.relatedLoaded) {\r\n            return;\r\n        }\r\n        getAjax(\r\n            _.opts.api + '/threadsList.php?type=' + _.opts.relatedType.toLowerCase() + '&thread=' + _.stat.thread.id,\r\n            function (resp) {\r\n                var data = JSON.parse(resp);\r\n                if (data.code == 0) {\r\n                    _.stat.relatedLoaded = true;\r\n                    var threads = data.response;\r\n                    var popHtml = '';\r\n                    threads.forEach(function (item) {\r\n                        var message = item.topPost.message.replace(/<[^>]*>/g, '');\r\n                        popHtml += `<li class=\"related-item\">\r\n                        <a class=\"related-item-link\" href=\"${item.link}\" title=\"${item.title}\">\r\n                        <div class=\"related-item-title\">${item.title}</div>\r\n                        <div class=\"related-item-desc\">${item.posts}条评论<span class=\"related-item-bullet\"> • </span><time class=\"related-item-time\" datetime=\"${item.createdAt}\"></time></div></a>\r\n                        <a class=\"related-item-link\" href=\"${item.link}?#comment-${item.topPost.id}\" title=\"${message}\">\r\n                        <div class=\"related-item-post\">\r\n                        <div class=\"related-item-avatar\"><img src=\"${item.topPost.avatar}\" /></div>\r\n                        <div class=\"related-item-main\">\r\n                        <div class=\"related-item-name\">${ item.topPost.name}</div>\r\n                        <div class=\"related-item-message\">${ message}</div>\r\n                        </div>\r\n                        </div></a>\r\n                        </li>`;\r\n                    });\r\n                    popHtml = `<div class=\"comment-related-title\">在<span class=\"comment-related-forumname\">${_.stat.forum.name}</span>上还有</div><div class=\"comment-related-content\"><ul class=\"related-list\">${popHtml}</ul></div>`;\r\n                    _.dom.querySelector('.comment-related').innerHTML = popHtml;\r\n                    _.timeAgo();\r\n                }\r\n            }, function () {\r\n                console.log('获取数据失败！')\r\n            }\r\n        );\r\n    };\r\n\r\n    // 加载反应\r\n    iDisqus.prototype.loadReactions = function () {\r\n        var _ = this;\r\n        if (_.stat.forum.settings.threadReactionsEnabled == false) {\r\n            return;\r\n        }\r\n        getAjax(_.opts.api + '/threadReactionsLoadReations.php' + '?thread=' + _.stat.thread.id, function (resp) {\r\n            var data = JSON.parse(resp);\r\n            if (data.response.eligible) {\r\n                _.dom.querySelector('.comment-reaction-prompt').innerHTML = data.response.prompt;\r\n                var reactions = data.response.reactions;\r\n                var total = 0;\r\n                var reaListHtml = '';\r\n                var selectedId = _.user.reactionVote[_.stat.thread.id];\r\n                selectedId = selectedId || (!!data.selected ? data.selected.id : 0);\r\n                reactions.forEach(function (item) {\r\n                    total += item.votes;\r\n                    reaListHtml += `<li class=\"comment-reaction-item\"><a class=\"comment-reaction-btn${(selectedId == item.id ? ' selected' : '')}\" data-id=\"${item.id}\" href=\"javascript:;\"><img class=\"comment-reaction-image\" src=\"${item.imageUrl}\"> ${item.text}</a><div class=\"comment-reaction-count\">${item.votes}</div></li>`;\r\n                })\r\n                _.dom.querySelector('.comment-reaction-list').innerHTML = reaListHtml;\r\n                _.dom.querySelector('.comment-reaction-total').innerHTML = total + ' 人次参与';\r\n            }\r\n        }, function () { })\r\n\r\n    };\r\n\r\n    // 反应打分事件\r\n    iDisqus.prototype.reactionVote = function (e, target) {\r\n        var _ = this;\r\n        var $reaction = target.closest('.comment-reaction-item');\r\n        var $count = $reaction.querySelector('.comment-reaction-count');\r\n        var reactionId = target.dataset.id;\r\n        var postData = {\r\n            thread: _.stat.thread.id,\r\n            unique: _.user.unique,\r\n            reaction: reactionId\r\n        }\r\n        postAjax(_.opts.api + '/threadReactionsVote.php', postData, function (resp) {\r\n            _.user.reactionVote[_.stat.thread.id] = reactionId;\r\n            l.setItem('reaction_vote', JSON.stringify(_.user.reactionVote));\r\n            target.classList.add('selected');\r\n            $count.innerHTML++\r\n        })\r\n    }\r\n\r\n    // 排序\r\n    iDisqus.prototype.selectOrder = function (e, target) {\r\n        var _ = this;\r\n        var order = target.value;\r\n        sessionStorage.setItem('order', order);\r\n        _.stat.order = order;\r\n        _.dom.querySelector('.comment-list').innerHTML = '';\r\n        _.dom.querySelector('.comment-loadmore').classList.add('hide');\r\n        _.stat.next = null;\r\n        _.getlist();\r\n    }\r\n\r\n    // 获取评论列表\r\n    iDisqus.prototype.getlist = function () {\r\n        var _ = this;\r\n        _.stat.loading = true;\r\n        _.dom.querySelector('#idisqus').classList.add('loading');\r\n        _.dom.querySelector('.comment-list').dataset.tips = '评论加载中……';\r\n        getAjax(\r\n            _.opts.api + '/getcomments.php?thread=' + _.stat.thread.id + (!!_.stat.next ? '&cursor=' + _.stat.next : '') + '&order=' + _.stat.order,\r\n            function (resp) {\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\r\n\r\n                    _.dom.querySelector('#idisqus').classList.remove('loading')\r\n                    var loadmore = _.dom.querySelector('.comment-loadmore');\r\n                    var posts = !!data.response ? data.response : [];\r\n                    _.stat.root = [];\r\n                    posts.forEach(function (item) {\r\n                        _.load(item);\r\n                        if (!item.parent) {\r\n                            _.stat.root.unshift(item.id);\r\n                        }\r\n                    });\r\n\r\n                    if (data.cursor.hasPrev) {\r\n                        _.stat.root.forEach(function (item) {\r\n                            _.dom.querySelector('.comment-list').appendChild(_.dom.querySelector('#comment-' + item));\r\n                        })\r\n                    }\r\n                    if (data.cursor.hasNext) {\r\n                        _.stat.next = data.cursor.next;\r\n                        loadmore.classList.remove('loading');\r\n                        loadmore.classList.remove('hide');\r\n                    } else {\r\n                        _.stat.next = null;\r\n                        loadmore.classList.add('hide');\r\n                    }\r\n\r\n                    if (_.stat.thread.posts == 0) {\r\n                        _.dom.querySelector('.comment-list').dataset.tips = '来做第一个留言的人吧！';\r\n                        return;\r\n                    }\r\n\r\n                    if (posts.length == 0) {\r\n                        return;\r\n                    }\r\n                    _.timeAgo();\r\n\r\n                    var iframe = _.dom.querySelectorAll('.comment-item-body iframe');\r\n                    [].forEach.call(iframe, function (item) {\r\n                        item.style.width = item.clientWidth + 'px';\r\n                        item.style.height = item.clientWidth * 9 / 16 + 'px';\r\n                        setTimeout(function () {\r\n                            item.src = item.src;\r\n                        }, 1000)\r\n                    })\r\n                    var tweet = _.dom.querySelectorAll('.comment-item-body .twitter-tweet');\r\n                    if (tweet.length > 0) {\r\n                        var head = document.getElementsByTagName('head')[0];\r\n                        var script = document.createElement('script');\r\n                        script.type = 'text/javascript';\r\n                        script.src = '//platform.twitter.com/widgets.js';\r\n                        head.appendChild(script);\r\n                    }\r\n\r\n                    window.scrollTo(0, _.stat.offsetTop);\r\n\r\n                    if (/^#disqus|^#comment-/.test(location.hash) && !data.cursor.hasPrev && !_.stat.disqusLoaded && !_.stat.loaded) {\r\n                        var el = _.dom.querySelector('#idisqus ' + location.hash)\r\n                        if (!!el) {\r\n                            window.scrollBy(0, el.getBoundingClientRect().top);\r\n                        }\r\n                    }\r\n                    _.stat.loading = false;\r\n                    _.stat.loaded = true;\r\n                }\r\n            }, function () {\r\n                alert('获取数据失败，请检查服务器设置。')\r\n            }\r\n        );\r\n    }\r\n\r\n    // 读取评论\r\n    iDisqus.prototype.load = function (post) {\r\n\r\n        var _ = this;\r\n\r\n        _.stat.post[post.id] = post;\r\n\r\n        var parentPostDom = _.dom.querySelector('.comment-item[data-id=\"' + post.parent + '\"]');\r\n\r\n        var user = {\r\n            username: post.username,\r\n            name: post.name,\r\n            avatar: post.avatar\r\n        }\r\n        if (!!post.username && _.stat.users.map(function (user) { return user.username; }).indexOf(post.username) == -1) {\r\n            _.stat.users.push(user);\r\n        }\r\n\r\n        var parentPost = !!post.parent ? {\r\n            name: `<a class=\"comment-item-pname\" data-parent=\"${post.parent}\" href=\"#${parentPostDom.id}\"><svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\"><path d=\"M1.664 902.144s97.92-557.888 596.352-557.888V129.728L1024 515.84l-425.984 360.448V628.8c-270.464 0-455.232 23.872-596.352 273.28\"></path></svg>${parentPostDom.dataset.name}</a>`,\r\n            dom: parentPostDom.querySelector('.comment-item-children'),\r\n            insert: 'afterbegin'\r\n        } : {\r\n                name: '',\r\n                dom: _.dom.querySelector('.comment-list'),\r\n                insert: post.id == 'preview' || !!post.isPost ? 'afterbegin' : 'beforeend'\r\n            };\r\n\r\n\r\n        var html = `<li class=\"comment-item\" data-id=\"${post.id}\" data-name=\"${post.name}\" id=\"comment-${post.id}\">\r\n        <div class=\"comment-item-body\">\r\n        <a class=\"comment-item-avatar\" href=\"#comment-${ post.id}\"><img src=\"${post.avatar}\"></a>\r\n        <div class=\"comment-item-main\">\r\n        <div class=\"comment-item-header\"><a class=\"comment-item-name\" title=\"${ post.name}\" rel=\"nofollow\" target=\"_blank\" href=\"${(post.url || 'javascript:;')}\">${post.name}</a>${(post.isMod ? `<span class=\"comment-item-badge\">${_.opts.badge}</span>` : ``)}${parentPost.name}<span class=\"comment-item-bullet\"> • </span><time class=\"comment-item-time\" datetime=\"${post.createdAt}\"></time></div>\r\n        <div class=\"comment-item-content\">${ post.message}</div>\r\n        <div class=\"comment-item-footer\">${!!post.isPost ? `<span class=\"comment-item-manage\"><a class=\"comment-item-edit\" href=\"javascript:;\">编辑</a><span class=\"comment-item-bullet\"> • </span><a class=\"comment-item-delete\" href=\"javascript:;\">删除</a><span class=\"comment-item-bullet\"> • </span></span>` : ``}<a class=\"comment-item-reply\" href=\"javascript:;\">回复</a></div>\r\n        </div></div>\r\n        <ul class=\"comment-item-children\">\r\n            ${ post.hasMore ? `<li><a class=\"comment-item-loadmore\" href=\"javascript:;\">显示更多回复</a></li>` : `` }\r\n        </ul>\r\n        </li>`;\r\n\r\n        // 已删除评论\r\n        if (!!post.isDeleted) {\r\n            html = `<li class=\"comment-item\" data-id=\"${post.id}\" id=\"comment-${post.id}\" data-name=\"${post.name}\">\r\n            <div class=\"comment-item-body\">\r\n            <a class=\"comment-item-avatar\" href=\"#comment-${ post.id}\"><img src=\"${post.avatar}\"></a>\r\n            <div class=\"comment-item-main\" data-message=\"此评论已被删除。\"></div></div>\r\n            <ul class=\"comment-item-children\">\r\n                ${ post.hasMore ? `<li><a class=\"comment-item-loadmore\" href=\"javascript:;\">显示更多回复</a></li>` : `` }\r\n            </ul>\r\n            </li>`;\r\n        }\r\n\r\n\r\n        // 更新 or 创建\r\n        if (!!_.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]')) {\r\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]').outerHTML = html;\r\n        } else {\r\n            parentPost.dom.insertAdjacentHTML(parentPost.insert, html);\r\n        }\r\n\r\n        // 发布留言，可编辑删除\r\n        if (!!post.isPost && !_.stat.editing) {\r\n            var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]');\r\n\r\n            var postEdit = setTimeout(function () {\r\n                // 十分钟后\r\n                if (!!$this.querySelector('.comment-item-manage')) {\r\n                    $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                }\r\n            }, 6 * 1e5);\r\n\r\n            // 删除\r\n            $this.querySelector('.comment-item-delete').addEventListener('click', function (e) {\r\n                var postData = {\r\n                    id: post.id\r\n                }\r\n                var delDom = e.currentTarget;\r\n                delDom.innerHTML = '删除中';\r\n                postAjax(_.opts.api + '/removecomment.php', postData, function (resp) {\r\n                    var data = JSON.parse(resp);\r\n                    if (data.code === 0) {\r\n                        if (data.response.isDeleted == true) {\r\n                            $this.outerHTML = '';\r\n                            _.stat.thread.posts = parseInt(_.dom.querySelector('#comment-count').innerHTML) - 1;\r\n                            _.dom.querySelector('#comment-count').innerHTML = _.stat.thread.posts + ' 条评论';\r\n                        } else {\r\n                            alert(data.response.message);\r\n                            $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                        }\r\n                    } else if (data.code === 2) {\r\n                        alert(data.response);\r\n                        $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                    }\r\n                }, function () {\r\n                    alert('删除出错，请稍后重试');\r\n                })\r\n                clearTimeout(postEdit);\r\n            }, false)\r\n\r\n            // 编辑\r\n            $this.querySelector('.comment-item-edit').addEventListener('click', function () {\r\n                _.stat.editing = post;\r\n                _.edit(post);\r\n            }, false)\r\n        }\r\n    }\r\n\r\n    // 读取更多\r\n    iDisqus.prototype.loadMore = function (e, target) {\r\n        var _ = this;\r\n        _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\r\n        if (!_.stat.loading) {\r\n            target.classList.add('loading');\r\n            _.getlist();\r\n        }\r\n    }\r\n\r\n    // 读取更多回复\r\n    iDisqus.prototype.loadMoreReply = function (e, target) {\r\n        var _ = this;\r\n        target.innerHTML = '加载中……';\r\n        var $children = target.closest('.comment-item-children');\r\n        var $post = target.closest('.comment-item');\r\n        getAjax(\r\n            _.opts.api + '/descendants.php?post=' + $post.dataset.id,\r\n            function (resp) {\r\n                var data = JSON.parse(resp);\r\n                if( data.code == 0 ){\r\n                    $children.removeChild(target.parentNode);\r\n                    var posts = data.response;\r\n                    posts.forEach(function (item) {\r\n                        _.load(item);\r\n                    });\r\n                    _.timeAgo();\r\n                } else {\r\n                    target.innerHTML = '读取失败';\r\n                }\r\n            }, function () {\r\n                target.innerHTML = '读取出错';\r\n            }\r\n        );\r\n    }\r\n\r\n    // 评论框焦点\r\n    iDisqus.prototype.focus = function (e, target) {\r\n        var wrapper = target.closest('.comment-form-wrapper');\r\n        wrapper.classList.add('editing');\r\n        if (wrapper.classList.contains('focus')) {\r\n            wrapper.classList.remove('focus');\r\n        } else {\r\n            wrapper.classList.add('focus');\r\n        }\r\n    }\r\n\r\n    // 输入事件\r\n    iDisqus.prototype.input = function (e, target) {\r\n        var _ = this;\r\n        var form = target.closest('.comment-form');\r\n        var alertmsg = form.querySelector('.comment-form-alert');\r\n        alertmsg.innerHTML = '';\r\n        var wrapper = form.querySelector('.comment-form-wrapper');\r\n        var filterText = target.value.replace(/<code>.*?<\\/code>/g, '');\r\n        var urls = filterText.match(/(^|\\s|\\r|\\n)*(http:\\/\\/|https:\\/\\/)(\\w|-|\\.)*(disqus|sinaimg|giphy|imgur|instagram|twimg|twitter|youtube|youtu\\.be)((\\w|=|\\?|\\.|\\/|&|\\%|-)*)(jpg|png|gif|gallery\\/\\w+|p\\/[a-zA-Z0-9]{11}.*|status\\/\\d{19}|v=[a-zA-Z0-9]{11}|\\/[a-zA-Z0-9]{11})(\\s|$|\\n)/g);\r\n        form.querySelector('.comment-image-list').innerHTML = '';\r\n        if (!!urls) {\r\n            urls.forEach(function (item, i) {\r\n                item = item.replace('/\\n|\\r\\n|^\\s|\\s$/g', '');\r\n                var image = _.stat.media[item];\r\n                if (!!image) {\r\n                    var imageHtml = `<li class=\"comment-image-item\" data-image-url=\"${image.thumbnailUrl}\"><img class=\"comment-image-object\" src=\"https:${image.thumbnailUrl}\"></li>`;\r\n                    form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageHtml);\r\n                    wrapper.classList.add('expanded');\r\n                    return;\r\n                }\r\n                postAjax(_.opts.api + '/media.php', { url: item }, function (resp) {\r\n                    var data = JSON.parse(resp);\r\n                    if (data.code == 0) {\r\n                        image = data.response;\r\n                        var imageHtml = `<li class=\"comment-image-item\" data-image-url=\"${image.thumbnailUrl}\"><img class=\"comment-image-object\" src=\"https:${image.thumbnailUrl}\"></li>`;\r\n                        form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageHtml);\r\n                        _.stat.media[item] = image;\r\n                        wrapper.classList.add('expanded');\r\n                    }\r\n                }, function () {\r\n                })\r\n            })\r\n        } else {\r\n            wrapper.classList.remove('expanded');\r\n        }\r\n\r\n    }\r\n\r\n    // 提醒用户 @ mention \r\n    iDisqus.prototype.mention = function (e, target) {\r\n        var _ = this;\r\n        var textarea = target;\r\n        var selStart = textarea.selectionStart;\r\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\r\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\r\n        var mentionDom = _.dom.querySelector('.mention-user');\r\n        var showUsers = _.stat.users.filter(function (user) {\r\n            var re = new RegExp(mentionText.slice(1), 'i');\r\n            return user.username.search(re) > -1;\r\n        });\r\n        if (mentionText.search(/^@\\w+$|^@$/) == 0 && showUsers.length > 0) {\r\n            if (e.keyCode == 38 || e.keyCode == 40) {\r\n                return;\r\n            }\r\n            var coord = _.getCaretCoord(textarea);\r\n            var list = '', html = '';\r\n\r\n            showUsers.forEach(function (item, i) {\r\n                list += `<li class=\"mention-user-item${(i == 0 ? ' active' : '')}\" data-username=\"${item.username}\"><img class=\"mention-user-avatar\" src=\"${item.avatar}\"><div class=\"mention-user-username\">${item.username}</div><div class=\"mention-user-name\">${item.name}</div></li>`;\r\n            })\r\n            if (!!mentionDom) {\r\n                mentionDom.innerHTML = '<ul class=\"mention-user-list\">' + list + '</ul>';\r\n                mentionDom.style.left = coord.left + 'px';\r\n                mentionDom.style.top = coord.top + 'px';\r\n            } else {\r\n                html = `<div class=\"mention-user\" style=\"left:${coord.left}px;top:${coord.top}px\"><ul class=\"mention-user-list\">${list}</ul></div>`;\r\n                _.dom.querySelector('#idisqus').insertAdjacentHTML('beforeend', html);\r\n            }\r\n\r\n            // 鼠标悬浮\r\n            _.addListener('mention-user-item', 'mouseover', function () {\r\n                _.dom.querySelector('.mention-user-item.active').classList.remove('active');\r\n                this.classList.add('active');\r\n            })\r\n\r\n            // 鼠标点击\r\n            _.addListener('mention-user-item', 'click', function () {\r\n                var username = '@' + this.dataset.username + ' ';\r\n                textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\r\n                mentionDom.outerHTML = '';\r\n                textarea.focus();\r\n                textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\r\n            })\r\n        } else if (!!mentionDom) {\r\n            mentionDom.outerHTML = '';\r\n        }\r\n    }\r\n\r\n    // 获取光标坐标 https://medium.com/@_jh3y/how-to-where-s-the-caret-getting-the-xy-position-of-the-caret-a24ba372990a\r\n    iDisqus.prototype.getCaretCoord = function (textarea) {\r\n        var _ = this;\r\n        var carPos = textarea.selectionEnd,\r\n            div = d.createElement('div'),\r\n            span = d.createElement('span'),\r\n            copyStyle = getComputedStyle(textarea);\r\n        [].forEach.call(copyStyle, function (prop) {\r\n            div.style[prop] = copyStyle[prop];\r\n        });\r\n        div.style.position = 'absolute';\r\n        _.dom.appendChild(div);\r\n        div.textContent = textarea.value.substr(0, carPos);\r\n        span.textContent = textarea.value.substr(carPos) || '.';\r\n        div.appendChild(span);\r\n        var coords = {\r\n            'top': textarea.offsetTop - textarea.scrollTop + span.offsetTop + parseFloat(copyStyle.lineHeight),\r\n            'left': textarea.offsetLeft - textarea.scrollLeft + span.offsetLeft\r\n        };\r\n        _.dom.removeChild(div);\r\n        return coords;\r\n    }\r\n\r\n    // 键盘选择用户\r\n    iDisqus.prototype.keySelect = function (e, target) {\r\n        var _ = this;\r\n        var textarea = target;\r\n        var selStart = textarea.selectionStart;\r\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\r\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\r\n        var mentionDom = _.dom.querySelector('.mention-user');\r\n        if (!mentionDom) {\r\n            return;\r\n        }\r\n        var current = _.dom.querySelector('.mention-user-item.active')\r\n        switch (e.keyCode) {\r\n            case 13:\r\n                //回车\r\n                var username = '@' + current.dataset.username + ' ';\r\n                textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\r\n                textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\r\n                _.dom.querySelector('.mention-user').outerHTML = '';\r\n                e.preventDefault();\r\n                break;\r\n            case 38:\r\n                //上\r\n                if (!!current.previousSibling) {\r\n                    current.previousSibling.classList.add('active');\r\n                    current.classList.remove('active');\r\n                }\r\n                e.preventDefault();\r\n                break;\r\n            case 40:\r\n                //下\r\n                if (!!current.nextSibling) {\r\n                    current.nextSibling.classList.add('active');\r\n                    current.classList.remove('active');\r\n                }\r\n                e.preventDefault();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 跳到评论\r\n    iDisqus.prototype.jump = function (e, target) {\r\n        var _ = this;\r\n        var hash = getLocation(target.href).hash;\r\n        var el = _.dom.querySelector('#idisqus ' + hash);\r\n        history.replaceState(undefined, undefined, hash);\r\n        window.scrollBy(0, el.getBoundingClientRect().top);\r\n        e.preventDefault();\r\n    }\r\n\r\n    // 显示父评论\r\n    iDisqus.prototype.parentShow = function (e, target) {\r\n        var _ = this;\r\n        if (!!target.querySelector('.comment-item-parent')) {\r\n            return;\r\n        }\r\n        var comment = _.stat.post[target.dataset.parent];\r\n        if (comment.isDeleted) {\r\n            return;\r\n        }\r\n        var message = comment.message.replace(/<[^>]*>/g, '');\r\n        var parentHtml = `<div class=\"comment-item-parent\"><a class=\"comment-item-avatar\" href=\"javascript:;\"><img src=\"${comment.avatar}\"></a><div class=\"comment-item-pmain\"><div class=\"comment-item-pheader\">${comment.name}</div><div class=\"comment-item-pcontent\" title=\"${message}\">${message}</div></div></div>`;\r\n        target.insertAdjacentHTML('beforeend', parentHtml);\r\n    }\r\n\r\n    // 点选表情\r\n    iDisqus.prototype.field = function (e, target) {\r\n        var _ = this;\r\n        var item = target;\r\n        var form = item.closest('.comment-form');\r\n        var textarea = form.querySelector('.comment-form-textarea');\r\n        _.appendText(textarea, item.dataset.code);\r\n    }\r\n\r\n    // 显示回复框 or 取消回复框\r\n    iDisqus.prototype.show = function (e, target) {\r\n        var _ = this;\r\n\r\n        var $this = target;\r\n        var item = $this.closest('.comment-item');\r\n\r\n        // 无论取消还是回复，移除已显示回复框\r\n        var box = _.dom.querySelector('.comment-item .comment-box:not([data-current-id])');\r\n        if (box) {\r\n            var $show = box.closest('.comment-item');\r\n            var cancel = $show.querySelector('.comment-item-cancel')\r\n            cancel.outerHTML = cancel.outerHTML.replace('cancel', 'reply');\r\n            box.outerHTML = '';\r\n        }\r\n\r\n        // 回复时，显示评论框\r\n        if ($this.className == 'comment-item-reply') {\r\n            $this.outerHTML = $this.outerHTML.replace('reply', 'cancel');\r\n            var commentBox = _.box.replace(/emoji-input/g, 'emoji-input-' + item.dataset.id).replace(/upload-input/g, 'upload-input-' + item.dataset.id);\r\n            item.querySelector('.comment-item-children').insertAdjacentHTML('beforebegin', commentBox);\r\n            _.user.init();\r\n\r\n            item.querySelector('.comment-form-textarea').focus();\r\n        }\r\n\r\n    }\r\n\r\n    // 验证表单\r\n    iDisqus.prototype.verify = function (e, target) {\r\n        var _ = this;\r\n        var $this = target;\r\n        var box = $this.closest('.comment-box');\r\n        var $avatar = box.querySelector('.comment-avatar-image');\r\n        var $name = box.querySelector('.comment-form-name');\r\n        var $email = box.querySelector('.comment-form-email');\r\n        var alertmsg = box.querySelector('.comment-form-alert');\r\n        if ($email.value == '') {\r\n            return;\r\n        }\r\n        getAjax(\r\n            _.opts.api + '/getgravatar.php?email=' + $email.value + '&name=' + $name.value,\r\n            function (resp) {\r\n                var data = JSON.parse(resp);\r\n                if (!data.isEmail && $this == $email) {\r\n                    _.errorTips('您所填写的邮箱地址有误。', $email);\r\n                }\r\n                if ($name.value != '') {\r\n                    $avatar.src = data.gravatar;\r\n                }\r\n            }, function () {\r\n            }\r\n        );\r\n    }\r\n\r\n    // 添加文本\r\n    iDisqus.prototype.appendText = function (textarea, text) {\r\n        var _ = this;\r\n        var selStart = textarea.selectionStart;\r\n        var text = selStart == 0 ? text + ' ' : ' ' + text + ' ';\r\n        textarea.value = textarea.value.slice(0, selStart) + text + textarea.value.slice(selStart);\r\n        textarea.focus();\r\n        textarea.setSelectionRange(selStart + text.length, selStart + text.length);\r\n    }\r\n\r\n    // 上传图片\r\n    iDisqus.prototype.upload = function (e, target) {\r\n        var _ = this;\r\n        var file = target;\r\n        var form = file.closest('.comment-form');\r\n        var progress = form.querySelector('.comment-image-progress');\r\n        var loaded = form.querySelector('.comment-image-loaded');\r\n        var wrapper = form.querySelector('.comment-form-wrapper');\r\n        var alertmsg = form.querySelector('.comment-form-alert');\r\n        alertmsg.innerHTML = '';\r\n        if (file.files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // 以文件大小识别是否为同张图片\r\n        var size = file.files[0].size;\r\n\r\n        if (size > 5 * 1e6) {\r\n            alertmsg.innerHTML = '请选择 5M 以下图片。';\r\n            setTimeout(function () {\r\n                alertmsg.innerHTML = '';\r\n            }, 3000);\r\n            return;\r\n        }\r\n\r\n        if (_.stat.imageSize.indexOf(size) == -1) {\r\n            progress.style.width = '80px';\r\n        } else {\r\n            alertmsg.innerHTML = '请勿选择已存在的图片。';\r\n            setTimeout(function () {\r\n                alertmsg.innerHTML = '';\r\n            }, 3000);\r\n            return;\r\n        }\r\n\r\n        // 展开图片上传界面\r\n        wrapper.classList.add('expanded');\r\n\r\n        // 图片上传请求\r\n        var data = new FormData();\r\n        data.append('file', file.files[0]);\r\n        var filename = file.files[0].name;\r\n\r\n        var $item;\r\n\r\n        var xhrUpload = new XMLHttpRequest();\r\n        xhrUpload.withCredentials = true;\r\n        xhrUpload.onreadystatechange = function () {\r\n            if (xhrUpload.readyState == 4 && xhrUpload.status == 200) {\r\n                var data = JSON.parse(xhrUpload.responseText);\r\n                if (data.code == 0) {\r\n                    _.stat.imageSize.push(size);\r\n                    var imageUrl = data.response.thumbnailUrl;\r\n                    var textarea = form.querySelector('.comment-form-textarea');\r\n                    _.appendText(textarea, 'https:'+imageUrl);\r\n\r\n                    var image = new Image();\r\n                    image.src = imageUrl;\r\n                    image.onload = function () {\r\n                        $item.innerHTML = '<img class=\"comment-image-object\" src=\"https:' + imageUrl + '\">';\r\n                        $item.dataset.imageUrl = imageUrl;\r\n                        $item.classList.remove('loading');\r\n                    }\r\n                } else {\r\n                    alertmsg.innerHTML = '图片上传出错。';\r\n                    $item.innerHTML = '';\r\n                    if (!!form.getElementsByClassName('comment-image-item').length) {\r\n                        wrapper.classList.remove('expanded');\r\n                    }\r\n                    setTimeout(function () {\r\n                        alertmsg.innerHTML = '';\r\n                    }, 3000);\r\n                }\r\n            }\r\n        };\r\n        xhrUpload.upload.addEventListener('progress', function (e) {\r\n            loaded.style.width = Math.ceil((e.loaded / e.total) * 100) + '%';\r\n        }, false);\r\n        xhrUpload.upload.addEventListener('load', function (e) {\r\n            loaded.style.width = 0;\r\n            progress.style.width = 0;\r\n            var imageItem = `<li class=\"comment-image-item loading\" data-image-size=\"${size}\">\r\n            <svg version=\"1.1\" class=\"comment-image-object\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"30px\" viewBox=\"0 0 24 30\" style=\"enable-background: new 0 0 50 50;\" xml:space=\"preserve\">\r\n            <rect x=\"0\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\r\n            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            </rect>\r\n            <rect x=\"8\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\r\n            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            </rect>\r\n            <rect x=\"16\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\r\n            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            </rect>\r\n            </svg>\r\n            </li>`;\r\n            form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageItem);\r\n            $item = form.querySelector('[data-image-size=\"' + size + '\"]');\r\n        }, false);\r\n        xhrUpload.open('POST', _.opts.api + '/media.php', true);\r\n        xhrUpload.send(data);\r\n    }\r\n\r\n    // 移除图片\r\n    iDisqus.prototype.remove = function (e) {\r\n        var _ = this;\r\n        var $item = e.currentTarget.closest('.comment-image-item');\r\n        var wrapper = e.currentTarget.closest('.comment-form-wrapper');\r\n        $item.outerHTML = '';\r\n        _.stat.imageSize = [];\r\n        var imageArr = wrapper.getElementsByClassName('comment-image-item');\r\n        [].forEach.call(imageArr, function (item, i) {\r\n            _.stat.imageSize[i] = item.dataset.imageSize;\r\n        });\r\n        if (_.stat.imageSize.length == 0) {\r\n            wrapper.classList.remove('expanded');\r\n        }\r\n        wrapper.querySelector('.comment-image-input').value = '';\r\n    }\r\n\r\n    // 错误提示\r\n    iDisqus.prototype.errorTips = function (Text, Dom) {\r\n        var _ = this;\r\n        if (_.user.logged_in == 'true') {\r\n            _.handle.logout();\r\n        }\r\n        var idisqus = _.dom.querySelector('#idisqus');\r\n        var errorDom = _.dom.querySelector('.comment-form-error');\r\n        if (!!errorDom) {\r\n            errorDom.outerHTML = '';\r\n        }\r\n        var Top = Dom.offsetTop;\r\n        var Left = Dom.offsetLeft;\r\n        var errorHtml = '<div class=\"comment-form-error\" style=\"top:' + Top + 'px;left:' + Left + 'px;\">' + Text + '</div>';\r\n        idisqus.insertAdjacentHTML('beforeend', errorHtml);\r\n        setTimeout(function () {\r\n            var errorDom = _.dom.querySelector('.comment-form-error');\r\n            if (!!errorDom) {\r\n                errorDom.outerHTML = '';\r\n            }\r\n        }, 3000);\r\n    }\r\n\r\n    // 发表/回复评论\r\n    iDisqus.prototype.post = function (e, target) {\r\n        var _ = this;\r\n        var item = target.closest('.comment-box[data-current-id]') || target.closest('.comment-item') || target.closest('.comment-box');\r\n        var message = item.querySelector('.comment-form-textarea').value;\r\n        var parentId = !!item.dataset.id ? item.dataset.id : '';\r\n        var imgArr = item.getElementsByClassName('comment-image-item');\r\n\r\n        // 不是编辑框需预览\r\n        if (!item.dataset.currentId) {\r\n            var elName = item.querySelector('.comment-form-name');\r\n            var elEmail = item.querySelector('.comment-form-email');\r\n            var elUrl = item.querySelector('.comment-form-url');\r\n            var alertmsg = item.querySelector('.comment-form-alert');\r\n            var alertClear = function () {\r\n                setTimeout(function () {\r\n                    alertmsg.innerHTML = '';\r\n                }, 3000);\r\n            }\r\n\r\n            if (_.user.type != '1') {\r\n                var anonName = elName.value;\r\n                var anonEmail = elEmail.value;\r\n                var anonUrl = elUrl.value.replace(/\\s/g, '');\r\n                if (/^\\s*$/i.test(anonName)) {\r\n                    _.errorTips('名字不能为空或空格。', elName);\r\n                    return;\r\n                }\r\n                if (/^\\s*$/i.test(anonEmail)) {\r\n                    _.errorTips('邮箱不能为空或空格。', elEmail);\r\n                    return;\r\n                }\r\n                if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(anonEmail)) {\r\n                    _.errorTips('请正确填写邮箱。', elEmail);\r\n                    return;\r\n                }\r\n                if (!/^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(([A-Za-z0-9-~]+)\\.)+([A-Za-z0-9-~\\/])+$|^\\s*$/i.test(anonUrl)) {\r\n                    _.errorTips('请正确填写网址。', elUrl);\r\n                    return;\r\n                }\r\n                _.user.unique = _.user.email == anonEmail ? _.user.unique : generateGUID();\r\n                _.user.name = anonName;\r\n                _.user.email = anonEmail;\r\n                _.user.url = anonUrl;\r\n                _.user.avatar = item.querySelector('.comment-avatar-image').src;\r\n                _.user.submit();\r\n\r\n                if (!_.user.name && !_.user.email) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (!_.stat.message && !_.stat.mediaHtml) {\r\n                _.box = _.dom.querySelector('.comment-box').outerHTML.replace('comment-form-wrapper', 'comment-form-wrapper editing').replace(/加入讨论……/, '');\r\n            }\r\n\r\n            if (/^\\s*$/i.test(message)) {\r\n                alertmsg.innerHTML = '评论不能为空或空格。';\r\n                item.querySelector('.comment-form-textarea').focus();\r\n                return;\r\n            };\r\n\r\n            var preMessage = message;\r\n\r\n            if (!!_.opts.emoji_preview) {\r\n                preMessage = preMessage.replace(/:([-+\\w]+):/g, function (match) {\r\n                    var emojiShort = match.replace(/:/g, '');\r\n                    var emojiImage = !!_.eac[emojiShort] ? `<img class=\"emojione\" width=\"24\" height=\"24\" alt=\"'+emojiShort+'\" title=\":${emojiShort}:\" src=\"${_.opts.emojiPath + _.eac[emojiShort]}.png\">` : match;\r\n                    return emojiImage;\r\n                });\r\n            } else {\r\n                _.emojiList.forEach(function (item) {\r\n                    preMessage = preMessage.replace(`:${item.code}:`, `<img class=\"emojione\" width=\"24\" height=\"24\" src=\"${_.opts.emojiPath + item.unicode}.png\" />`);\r\n                });\r\n            }\r\n\r\n            var post = {\r\n                'url': !!_.user.url ? _.user.url : '',\r\n                'isMod': false,\r\n                'username': null,\r\n                'name': _.user.name,\r\n                'avatar': _.user.avatar,\r\n                'id': 'preview',\r\n                'parent': parentId,\r\n                'createdAt': (new Date()).toJSON(),\r\n                'message': '<p>' + preMessage + '</p>',\r\n            };\r\n\r\n            _.load(post);\r\n\r\n            _.timeAgo();\r\n\r\n            // 清空或移除评论框\r\n            _.stat.message = message;\r\n            _.stat.mediaHtml = item.querySelector('.comment-image-list').innerHTML;\r\n\r\n            if (parentId) {\r\n                item.querySelector('.comment-item-cancel').click();\r\n            } else {\r\n                item.querySelector('.comment-form-textarea').value = '';\r\n                item.querySelector('.comment-image-list').innerHTML = '';\r\n                item.querySelector('.comment-form-wrapper').classList.remove('expanded', 'editing');\r\n            }\r\n        }\r\n\r\n        // @\r\n        var mentions = message.match(/@\\w+/g);\r\n        if (!!mentions) {\r\n            mentions = mentions.filter(function (mention) {\r\n                return _.stat.users.map(function (user) { return user.username; }).indexOf(mention.slice(1)) > -1;\r\n            });\r\n            if (mentions.length > 0) {\r\n                var re = new RegExp('(' + mentions.join('|') + ')', 'g');\r\n                message = message.replace(re, '$1:disqus');\r\n            }\r\n        }\r\n\r\n        // POST 操作\r\n        // 编辑框则更新评论\r\n        if (!!item.dataset.currentId) {\r\n            var postData = {\r\n                id: item.dataset.currentId,\r\n                message: message,\r\n                unique: _.user.unique\r\n            }\r\n            postAjax(_.opts.api + '/updatecomment.php', postData, function (resp) {\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.stat.message = null;\r\n                    _.stat.mediaHtml = null;\r\n                    var post = data.response;\r\n                    _.load(post);\r\n                    _.timeAgo();\r\n                    _.stat.editing = false;\r\n                } else {\r\n                    // 取消编辑\r\n                    _.load(_.stat.editing)\r\n                    _.timeAgo();\r\n                    _.stat.editing = false;\r\n                }\r\n            }, function () {\r\n                // 取消编辑\r\n                _.load(_.stat.editing)\r\n                _.timeAgo();\r\n                _.stat.editing = false;\r\n            })\r\n        } else {\r\n            var postData = {\r\n                thread: _.stat.thread.id,\r\n                parent: parentId,\r\n                message: message,\r\n                name: _.user.name,\r\n                email: _.user.email,\r\n                url: _.user.url,\r\n                unique: _.user.unique\r\n            }\r\n            postAjax(_.opts.api + '/postcomment.php', postData, function (resp) {\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.stat.thread = data.thread;\r\n                    _.stat.thread.posts = parseInt(_.dom.querySelector('#comment-count').innerHTML) + 1;\r\n                    _.dom.querySelector('#comment-count').innerHTML = _.stat.thread.posts + ' 条评论';\r\n                    var post = data.response;\r\n                    post.isPost = true;\r\n                    _.load(post);\r\n                    _.timeAgo();\r\n                    var postData = {\r\n                        post: JSON.stringify(post),\r\n                        thread: JSON.stringify(_.stat.thread),\r\n                        parent: JSON.stringify(_.stat.post[parentId]),\r\n                        code: data.verifyCode\r\n                    }\r\n                    if (!!data.verifyCode) {\r\n                        // 异步发送邮件\r\n                        postAjax(_.opts.api + '/sendemail.php', postData, function (resp) {\r\n                            console.info('邮件发送成功！');\r\n                        })\r\n                    }\r\n                } else if (data.code === 2) {\r\n                    alertmsg.innerHTML = data.response;\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.reEdit(item);\r\n\r\n                    if (data.response.indexOf('author') > -1) {\r\n                        _.handle.logout();\r\n                    }\r\n                } else {\r\n                    alertmsg.innerHTML = '提交失败，请稍后重试，错误代码：' + data.code;\r\n                    alertClear();\r\n\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.reEdit(item);\r\n                }\r\n\r\n            }, function () {\r\n                alertmsg.innerHTML = '提交出错，请稍后重试。';\r\n                alertClear();\r\n\r\n                _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                _.reEdit(item);\r\n            })\r\n        }\r\n    }\r\n\r\n    // 重新编辑\r\n    iDisqus.prototype.reEdit = function (item) {\r\n        var _ = this;\r\n\r\n        if (!!item.dataset.id) {\r\n            item.querySelector('.comment-item-reply').click();\r\n        } else {\r\n            item.querySelector('.comment-form-wrapper').classList.add('editing');\r\n        }\r\n\r\n        // 重新填充文本图片\r\n        if (!!_.stat.message) {\r\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\r\n        }\r\n        if (!!_.stat.mediaHtml) {\r\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\r\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\r\n        }\r\n    }\r\n\r\n    // 编辑\r\n    iDisqus.prototype.edit = function (post) {\r\n        var _ = this;\r\n        var commentBox = _.box.replace('comment-box', 'comment-box comment-box-' + post.id).replace(/emoji-input/g, 'emoji-input-' + post.id).replace(/upload-input/g, 'upload-input-' + post.id);\r\n        var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-body');\r\n        $this.outerHTML = commentBox;\r\n        _.user.init();\r\n        var item = _.dom.querySelector('.comment-box-' + post.id);\r\n        item.dataset.currentId = post.id;\r\n        item.querySelector('.comment-form-textarea').focus();\r\n\r\n        // 取消编辑\r\n        item.querySelector('.comment-actions-form').insertAdjacentHTML('afterbegin', '<a class=\"comment-form-cancel\" href=\"javascript:;\">取消</a>')\r\n        item.querySelector('.comment-form-cancel').addEventListener('click', function () {\r\n            _.stat.editing = false;\r\n            _.load(post);\r\n            _.timeAgo();\r\n        }, false);\r\n\r\n        // 重新填充文本图片，连续回复、连续编辑会有 bug\r\n        if (!!_.stat.message) {\r\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\r\n        }\r\n        if (!!_.stat.mediaHtml) {\r\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\r\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\r\n        }\r\n\r\n    }\r\n\r\n    // Thread 初始化\r\n    iDisqus.prototype.threadInit = function (e, target) {\r\n        var _ = this;\r\n        _.dom.querySelector('#idisqus').style.display = 'block';\r\n        _.dom.querySelector('#disqus_thread').style.display = 'none';\r\n        getAjax(_.opts.api + '/threadsDetails.php?ident=' + _.opts.identifier + '&link=' + _.opts.url, function (resp) {\r\n            var data = JSON.parse(resp);\r\n            if (data.code == 0) {\r\n                _.stat.thread = data.response;\r\n                _.stat.forum = data.forum;\r\n                _.dom.querySelector('#comment-link').href = `https://disqus.com/home/discussion/${_.stat.forum.id}/${_.stat.thread.slug}/?l=zh`;\r\n                _.dom.querySelector('.comment-avatar-image').dataset.avatar = _.stat.forum.avatar;\r\n                _.dom.querySelector('.comment-recommend-count').innerHTML = _.stat.thread.likes || '';\r\n                if (_.stat.forum.settings.mediaembedEnabled == false) {\r\n                    _.dom.querySelector('.comment-image-input').outerHTML = ''\r\n                    _.dom.querySelector('[for=\"upload-input\"]').outerHTML = ''\r\n                }\r\n                if (_.user.logged_in == 'false') {\r\n                    _.dom.querySelector('.comment-avatar-image').src = _.stat.forum.avatar;\r\n                }\r\n                _.box = _.dom.querySelector('.comment-box').outerHTML.replace(/<label class=\"comment-actions-label exit\"(.|\\n)*<\\/label>\\n/, '').replace('comment-form-wrapper', 'comment-form-wrapper editing').replace(/加入讨论……/, '');\r\n                _.opts.badge = _.stat.forum.moderatorBadgeText;\r\n                if (!_.stat.order) {\r\n                    switch (_.stat.forum.order) {\r\n                        case 1:\r\n                            _.stat.order = 'asc';\r\n                            break;\r\n                        case 2:\r\n                            _.stat.order = 'desc';\r\n                            break;\r\n                        case 4:\r\n                            _.stat.order = 'popular';\r\n                            break;\r\n                    }\r\n                }\r\n                _.dom.querySelector('.comment-order-radio[value=\"' + _.stat.order + '\"]').checked = true;\r\n\r\n                var users = data.votedusers;\r\n                var vote = 0;\r\n                if (_.user.type == 1) {\r\n                    // 已登录\r\n                    vote = users.filter(function (user) {\r\n                        return user.username == _.user.username;\r\n                    }).length > 0 ? 1 : 0;\r\n                } else {\r\n                    // 未登录\r\n                    vote = !!_.user.vote[_.stat.thread.id] ? 1 : 0;;\r\n                }\r\n                _.user.vote[_.stat.thread.id] = vote;\r\n                l.setItem('vote', JSON.stringify(_.user.vote));\r\n                if (!!vote) {\r\n                    _.dom.querySelector('.comment-recommend').classList.add('voted');\r\n                    _.dom.querySelector('.comment-recommend-text').innerHTML = '已推荐';\r\n                }\r\n                _.dom.querySelector('#idisqus').classList.remove('init')\r\n                _.loadRelated();\r\n                _.loadReactions();\r\n                _.dom.querySelector('#comment-count').innerHTML = _.stat.thread.posts + ' 条评论';\r\n                _.getlist();\r\n            } else if (data.code === 2) {\r\n                // 自动创建\r\n                if (_.opts.autoCreate) {\r\n                    _.dom.querySelector('.init-container').dataset.tips = '正在创建 Thread……';\r\n                    var postData = {\r\n                        url: _.opts.link,\r\n                        identifier: _.opts.identifier,\r\n                        title: _.opts.title,\r\n                        slug: _.opts.slug,\r\n                        message: _.opts.desc\r\n                    }\r\n                    _.threadCreate(postData);\r\n                    return;\r\n                }\r\n                _.dom.querySelector('#idisqus').classList.remove('init');\r\n                var threadForm = `<div class=\"comment-header\"><span class=\"comment-header-item\">创建 Thread</span></div>\r\n                            <div class=\"comment-thread-form\">\r\n                            <p>由于 Disqus 没有本页面的相关 Thread，故需先创建 Thread</p>\r\n                            <div class=\"comment-form-item\"><label class=\"comment-form-label\">url:</label><input class=\"comment-form-input\" id=\"thread-url\" name=\"url\" value=\"${ _.opts.link}\" disabled /></div>\r\n                            <div class=\"comment-form-item\"><label class=\"comment-form-label\">identifier:</label><input class=\"comment-form-input\" id=\"thread-identifier\" name=\"identifier\" value=\"${ _.opts.identifier}\" disabled /></div>\r\n                            <div class=\"comment-form-item\"><label class=\"comment-form-label\">title:</label><input class=\"comment-form-input\" id=\"thread-title\" name=\"title\" value=\"${ _.opts.title}\" disabled /></div>\r\n                            <div class=\"comment-form-item\"><label class=\"comment-form-label\">slug:</label><input class=\"comment-form-input\" id=\"thread-slug\" name=\"slug\" value=\"${ _.opts.slug}\" /></div>\r\n                            <div class=\"comment-form-item\"><label class=\"comment-form-label\">message:</label><textarea class=\"comment-form-textarea\" id=\"thread-message\" name=\"message\">${ _.opts.desc}</textarea></div>\r\n                            <button id=\"thread-submit\" class=\"comment-form-submit\">提交</button></div>`;\r\n                _.dom.querySelector('#idisqus').innerHTML = threadForm;\r\n            }\r\n        }, function () { })\r\n    }\r\n\r\n    // Thread 打分事件\r\n    iDisqus.prototype.threadVote = function (e, target) {\r\n        var _ = this;\r\n        var vote = !!_.user.vote[_.stat.thread.id] ? 0 : 1;\r\n        var postData = {\r\n            thread: _.stat.thread.id,\r\n            unique: _.user.unique,\r\n            vote: vote\r\n        }\r\n        postAjax(_.opts.api + '/threadsVote.php', postData, function (resp) {\r\n            _.user.vote[_.stat.thread.id] = vote;\r\n            l.setItem('vote', JSON.stringify(_.user.vote));\r\n            if (!!vote) {\r\n                _.dom.querySelector('.comment-recommend').classList.add('voted');\r\n                _.stat.thread.likes++;\r\n            } else {\r\n                _.dom.querySelector('.comment-recommend').classList.remove('voted');\r\n                _.stat.thread.likes = _.stat.thread.likes == 0 ? 0 : _.stat.thread.likes - 1;\r\n            }\r\n            _.dom.querySelector('.comment-recommend-count').innerHTML = _.stat.thread.likes || '';\r\n        })\r\n    }\r\n\r\n    // Thread Create 事件\r\n    iDisqus.prototype.threadCreate = function (e, target) {\r\n        var _ = this;\r\n        if (!!target) {\r\n            var postData = {\r\n                url: _.dom.querySelector('#thread-url').value,\r\n                identifier: _.dom.querySelector('#thread-identifier').value,\r\n                title: _.dom.querySelector('#thread-title').value,\r\n                slug: _.dom.querySelector('#thread-slug').value.replace(/[^A-Za-z0-9_-]+/g, ''),\r\n                message: _.dom.querySelector('#thread-message').value\r\n            }\r\n        } else {\r\n            var postData = arguments[0];\r\n        }\r\n        postAjax(_.opts.api + '/createthread.php', postData, function (resp) {\r\n            var data = JSON.parse(resp);\r\n            if (data.code === 0) {\r\n                alert('创建 Thread 成功，刷新后便可愉快地评论了！');\r\n                setTimeout(function () { location.reload(); }, 2000);\r\n            } else if (data.code === 2) {\r\n                if (data.response.indexOf('A thread already exists with link') > -1) {\r\n                    alert(data.response.replace('A thread already exists with link,', '已存在此链接的相关 Thread，'));\r\n                    return;\r\n                }\r\n                if (data.response.indexOf('Invalid URL') > -1) {\r\n                    alert('参数错误，无效的\\'URL\\'');\r\n                    return;\r\n                }\r\n                if (data.response.indexOf('Invalid slug') > -1) {\r\n                    alert('参数错误，无效的\\'slug\\'');\r\n                    return;\r\n                }\r\n                alert(data.response);\r\n                return;\r\n            } else {\r\n                alert(data.response);\r\n                return;\r\n            }\r\n        }, function () {\r\n            alert('创建 Thread 出错，请稍后重试！');\r\n        })\r\n    }\r\n\r\n    // 销毁评论框\r\n    iDisqus.prototype.destroy = function () {\r\n        var _ = this;\r\n        _.dom.innerHTML = '';\r\n        delete _.dom;\r\n        delete _.box;\r\n        delete _.emojiList;\r\n        delete _.user;\r\n        delete _.handle;\r\n        delete _.stat;\r\n        delete _.opts;\r\n    }\r\n\r\n    /* CommonJS */\r\n    if ( true && module && typeof exports === 'object' && exports)\r\n        module.exports = iDisqus;\r\n    /* AMD */\r\n    else if (true)\r\n        !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\r\n            return iDisqus;\r\n        }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n    /* Global */\r\n    else\r\n        {}\r\n\r\n})(window || this);\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../node_modules/webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://%5Bname%5D/./src/iDisqus.js?")},"./src/iDisqus.scss":function(module,exports,__webpack_require__){eval('\nvar content = __webpack_require__(/*! !../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/src??ref--4-2!../node_modules/sass-loader/dist/cjs.js!./iDisqus.scss */ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js!./src/iDisqus.scss");\n\nif(typeof content === \'string\') content = [[module.i, content, \'\']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {"hmr":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../node_modules/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n//# sourceURL=webpack://%5Bname%5D/./src/iDisqus.scss?')}})},module.exports=factory()}(iDisqus$1)),iDisqus$1.exports}var iDisqusExports=requireIDisqus();const iDisqus=getDefaultExportFromCjs(iDisqusExports);var weixinJsSdk={exports:{}},hasRequiredWeixinJsSdk;function requireWeixinJsSdk(){return hasRequiredWeixinJsSdk||(hasRequiredWeixinJsSdk=1,t="object"==typeof window&&window,weixinJsSdk.exports=function(t,e){var r,n,i,o,a,s,l,c,m,h,d,u,p,f,g,y,x,v,_,b,w,k;if(t)return t.jWeixin?t.jWeixin:(r={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},n=function(){var t,e={};for(t in r)e[r[t]]=t;return e}(),i=t.document,o=i.title,a=navigator.userAgent.toLowerCase(),u=navigator.platform.toLowerCase(),s=!(!u.match("mac")&&!u.match("win")),l=-1!=a.indexOf("wxdebugger"),c=-1!=a.indexOf("micromessenger"),m=-1!=a.indexOf("android"),h=-1!=a.indexOf("iphone")||-1!=a.indexOf("ipad"),d=(u=a.match(/micromessenger\/(\d+\.\d+\.\d+)/)||a.match(/micromessenger\/(\d+\.\d+)/))?u[1]:"",p={initStartTime:E(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},f={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:h?1:m?2:-1,clientVersion:d,url:encodeURIComponent(location.href)},g={},y={_completes:[]},x={state:0,data:{}},I((function(){p.initEndTime=E()})),v=!1,_=[],b={config:function(e){A("config",g=e);var n=!1!==g.check;I((function(){if(n)S(r.config,{verifyJsApiList:C(g.jsApiList),verifyOpenTagList:C(g.openTagList)},(y._complete=function(t){p.preVerifyEndTime=E(),x.state=1,x.data=t},y.success=function(t){f.isPreVerifyOk=0},y.fail=function(t){y._fail?y._fail(t):x.state=-1},(o=y._completes).push((function(){B()})),y.complete=function(t){for(var e=0,r=o.length;e<r;++e)o[e]();y._completes=[]},y)),p.preVerifyStartTime=E();else{x.state=1;for(var t=y._completes,e=0,i=t.length;e<i;++e)t[e]();y._completes=[]}var o})),b.invoke||(b.invoke=function(e,r,n){t.WeixinJSBridge&&WeixinJSBridge.invoke(e,L(r),n)},b.on=function(e,r){t.WeixinJSBridge&&WeixinJSBridge.on(e,r)})},ready:function(t){(0!=x.state||(y._completes.push(t),!c&&g.debug))&&t()},error:function(t){d<"6.0.2"||(-1==x.state?t(x.data):y._fail=t)},checkJsApi:function(t){S("checkJsApi",{jsApiList:C(t.jsApiList)},(t._complete=function(t){m&&(r=t.checkResult)&&(t.checkResult=JSON.parse(r));var e,r=t,i=r.checkResult;for(e in i){var o=n[e];o&&(i[o]=i[e],delete i[e])}},t))},onMenuShareTimeline:function(t){q(r.onMenuShareTimeline,{complete:function(){S("shareTimeline",{title:t.title||o,desc:t.title||o,img_url:t.imgUrl||"",link:t.link||location.href,type:t.type||"link",data_url:t.dataUrl||""},t)}},t)},onMenuShareAppMessage:function(t){q(r.onMenuShareAppMessage,{complete:function(e){"favorite"===e.scene?S("sendAppMessage",{title:t.title||o,desc:t.desc||"",link:t.link||location.href,img_url:t.imgUrl||"",type:t.type||"link",data_url:t.dataUrl||""}):S("sendAppMessage",{title:t.title||o,desc:t.desc||"",link:t.link||location.href,img_url:t.imgUrl||"",type:t.type||"link",data_url:t.dataUrl||""},t)}},t)},onMenuShareQQ:function(t){q(r.onMenuShareQQ,{complete:function(){S("shareQQ",{title:t.title||o,desc:t.desc||"",img_url:t.imgUrl||"",link:t.link||location.href},t)}},t)},onMenuShareWeibo:function(t){q(r.onMenuShareWeibo,{complete:function(){S("shareWeiboApp",{title:t.title||o,desc:t.desc||"",img_url:t.imgUrl||"",link:t.link||location.href},t)}},t)},onMenuShareQZone:function(t){q(r.onMenuShareQZone,{complete:function(){S("shareQZone",{title:t.title||o,desc:t.desc||"",img_url:t.imgUrl||"",link:t.link||location.href},t)}},t)},updateTimelineShareData:function(t){S("updateTimelineShareData",{title:t.title,link:t.link,imgUrl:t.imgUrl},t)},updateAppMessageShareData:function(t){S("updateAppMessageShareData",{title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl},t)},startRecord:function(t){S("startRecord",{},t)},stopRecord:function(t){S("stopRecord",{},t)},onVoiceRecordEnd:function(t){q("onVoiceRecordEnd",t)},playVoice:function(t){S("playVoice",{localId:t.localId},t)},pauseVoice:function(t){S("pauseVoice",{localId:t.localId},t)},stopVoice:function(t){S("stopVoice",{localId:t.localId},t)},onVoicePlayEnd:function(t){q("onVoicePlayEnd",t)},uploadVoice:function(t){S("uploadVoice",{localId:t.localId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},downloadVoice:function(t){S("downloadVoice",{serverId:t.serverId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},translateVoice:function(t){S("translateVoice",{localId:t.localId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},chooseImage:function(t){S("chooseImage",{scene:"1|2",count:t.count||9,sizeType:t.sizeType||["original","compressed"],sourceType:t.sourceType||["album","camera"]},(t._complete=function(t){if(m){var e=t.localIds;try{e&&(t.localIds=JSON.parse(e))}catch(r){}}},t))},getLocation:function(t){t=t||{},S(r.getLocation,{type:t.type||"wgs84"},(t._complete=function(t){delete t.type},t))},previewImage:function(t){S(r.previewImage,{current:t.current,urls:t.urls},t)},uploadImage:function(t){S("uploadImage",{localId:t.localId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},downloadImage:function(t){S("downloadImage",{serverId:t.serverId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},getLocalImgData:function(t){!1===v?(v=!0,S("getLocalImgData",{localId:t.localId},(t._complete=function(t){var e;v=!1,0<_.length&&(e=_.shift(),wx.getLocalImgData(e))},t))):_.push(t)},getNetworkType:function(t){S("getNetworkType",{},(t._complete=function(t){var e=t,r=(t=e.errMsg,e.errMsg="getNetworkType:ok",e.subtype);if(delete e.subtype,r)e.networkType=r;else{r=t.indexOf(":");var n=t.substring(r+1);switch(n){case"wifi":case"edge":case"wwan":e.networkType=n;break;default:e.errMsg="getNetworkType:fail"}}},t))},openLocation:function(t){S("openLocation",{latitude:t.latitude,longitude:t.longitude,name:t.name||"",address:t.address||"",scale:t.scale||28,infoUrl:t.infoUrl||""},t)},hideOptionMenu:function(t){S("hideOptionMenu",{},t)},showOptionMenu:function(t){S("showOptionMenu",{},t)},closeWindow:function(t){S("closeWindow",{},t=t||{})},hideMenuItems:function(t){S("hideMenuItems",{menuList:t.menuList},t)},showMenuItems:function(t){S("showMenuItems",{menuList:t.menuList},t)},hideAllNonBaseMenuItem:function(t){S("hideAllNonBaseMenuItem",{},t)},showAllNonBaseMenuItem:function(t){S("showAllNonBaseMenuItem",{},t)},scanQRCode:function(t){S("scanQRCode",{needResult:(t=t||{}).needResult||0,scanType:t.scanType||["qrCode","barCode"]},(t._complete=function(t){var e;h&&(e=t.resultStr)&&(e=JSON.parse(e),t.resultStr=e&&e.scan_code&&e.scan_code.scan_result)},t))},openAddress:function(t){S(r.openAddress,{},(t._complete=function(t){t.postalCode=t.addressPostalCode,delete t.addressPostalCode,t.provinceName=t.proviceFirstStageName,delete t.proviceFirstStageName,t.cityName=t.addressCitySecondStageName,delete t.addressCitySecondStageName,t.countryName=t.addressCountiesThirdStageName,delete t.addressCountiesThirdStageName,t.detailInfo=t.addressDetailInfo,delete t.addressDetailInfo},t))},openProductSpecificView:function(t){S(r.openProductSpecificView,{pid:t.productId,view_type:t.viewType||0,ext_info:t.extInfo},t)},addCard:function(t){for(var e=t.cardList,n=[],i=0,o=e.length;i<o;++i){var a={card_id:(a=e[i]).cardId,card_ext:a.cardExt};n.push(a)}S(r.addCard,{card_list:n},(t._complete=function(t){if(e=t.card_list){for(var e,r=0,n=(e=JSON.parse(e)).length;r<n;++r){var i=e[r];i.cardId=i.card_id,i.cardExt=i.card_ext,i.isSuccess=!!i.is_succ,delete i.card_id,delete i.card_ext,delete i.is_succ}t.cardList=e,delete t.card_list}},t))},chooseCard:function(t){S("chooseCard",{app_id:g.appId,location_id:t.shopId||"",sign_type:t.signType||"SHA1",card_id:t.cardId||"",card_type:t.cardType||"",card_sign:t.cardSign,time_stamp:t.timestamp+"",nonce_str:t.nonceStr},(t._complete=function(t){t.cardList=t.choose_card_info,delete t.choose_card_info},t))},openCard:function(t){for(var e=t.cardList,n=[],i=0,o=e.length;i<o;++i){var a={card_id:(a=e[i]).cardId,code:a.code};n.push(a)}S(r.openCard,{card_list:n},t)},consumeAndShareCard:function(t){S(r.consumeAndShareCard,{consumedCardId:t.cardId,consumedCode:t.code},t)},chooseWXPay:function(t){S(r.chooseWXPay,M(t),t),B({jsApiName:"chooseWXPay"})},openEnterpriseRedPacket:function(t){S(r.openEnterpriseRedPacket,M(t),t)},startSearchBeacons:function(t){S(r.startSearchBeacons,{ticket:t.ticket},t)},stopSearchBeacons:function(t){S(r.stopSearchBeacons,{},t)},onSearchBeacons:function(t){q(r.onSearchBeacons,t)},openEnterpriseChat:function(t){S("openEnterpriseChat",{useridlist:t.userIds,chatname:t.groupName},t)},launchMiniProgram:function(t){S("launchMiniProgram",{targetAppId:t.targetAppId,path:function(t){var e;if("string"==typeof t&&0<t.length)return e=t.split("?")[0],e+=".html",void 0!==(t=t.split("?")[1])?e+"?"+t:e}(t.path),envVersion:t.envVersion},t)},openBusinessView:function(t){S("openBusinessView",{businessType:t.businessType,queryString:t.queryString||"",envVersion:t.envVersion},(t._complete=function(t){if(m){var e=t.extraData;if(e)try{t.extraData=JSON.parse(e)}catch(r){t.extraData={}}}},t))},miniProgram:{navigateBack:function(t){t=t||{},I((function(){S("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:t.delta||1}},t)}))},navigateTo:function(t){I((function(){S("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:t.url}},t)}))},redirectTo:function(t){I((function(){S("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:t.url}},t)}))},switchTab:function(t){I((function(){S("invokeMiniProgramAPI",{name:"switchTab",arg:{url:t.url}},t)}))},reLaunch:function(t){I((function(){S("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:t.url}},t)}))},postMessage:function(t){I((function(){S("invokeMiniProgramAPI",{name:"postMessage",arg:t.data||{}},t)}))},getEnv:function(e){I((function(){e({miniprogram:"miniprogram"===t.__wxjs_environment})}))}}},w=1,k={},i.addEventListener("error",(function(t){var e,r,n;m||(n=(e=t.target).tagName,r=e.src,"IMG"!=n&&"VIDEO"!=n&&"AUDIO"!=n&&"SOURCE"!=n)||-1!=r.indexOf("wxlocalresource://")&&(t.preventDefault(),t.stopPropagation(),(n=e["wx-id"])||(n=w++,e["wx-id"]=n),k[n]||(k[n]=!0,wx.ready((function(){wx.getLocalImgData({localId:r,success:function(t){e.src=t.localData}})}))))}),!0),i.addEventListener("load",(function(t){var e;m||(e=(t=t.target).tagName,t.src,"IMG"!=e&&"VIDEO"!=e&&"AUDIO"!=e&&"SOURCE"!=e)||(e=t["wx-id"])&&(k[e]=!1)}),!0),e&&(t.wx=t.jWeixin=b),b);function S(e,r,n){t.WeixinJSBridge?WeixinJSBridge.invoke(e,L(r),(function(t){T(e,t,n)})):A(e,n)}function q(e,r,n){t.WeixinJSBridge?WeixinJSBridge.on(e,(function(t){n&&n.trigger&&n.trigger(t),T(e,t,r)})):A(e,n||r)}function L(t){return(t=t||{}).appId=g.appId,t.verifyAppId=g.appId,t.verifySignType="sha1",t.verifyTimestamp=g.timestamp+"",t.verifyNonceStr=g.nonceStr,t.verifySignature=g.signature,t}function M(t){return{timeStamp:t.timestamp+"",nonceStr:t.nonceStr,package:t.package,paySign:t.paySign,signType:t.signType||"SHA1"}}function T(t,e,r){"openEnterpriseChat"!=t&&"openBusinessView"!==t||(e.errCode=e.err_code),delete e.err_code,delete e.err_desc,delete e.err_detail;var i,o,a,s,l=e.errMsg;switch(l||(l=e.err_msg,delete e.err_msg,o=l,(s=n[i=t])&&(i=s),s="ok",o&&(a=o.indexOf(":"),"access denied"!=(s=(s=(s=-1!=(s=-1!=(s="failed"==(s="confirm"==(s=o.substring(a+1))?"ok":s)?"fail":s).indexOf("failed_")?s.substring(7):s).indexOf("fail_")?s.substring(5):s).replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=s||(s="permission denied"),""==(s="config"==i&&"function not exist"==s?"ok":s))&&(s="fail"),l=i+":"+s,e.errMsg=l),(r=r||{})._complete&&(r._complete(e),delete r._complete),l=e.errMsg||"",g.debug&&!r.isInnerInvoke&&alert(JSON.stringify(e)),t=l.indexOf(":"),l.substring(t+1)){case"ok":r.success&&r.success(e);break;case"cancel":r.cancel&&r.cancel(e);break;default:r.fail&&r.fail(e)}r.complete&&r.complete(e)}function C(t){if(t){for(var e=0,n=t.length;e<n;++e){var i=t[e];(i=r[i])&&(t[e]=i)}return t}}function A(t,e){var r;!g.debug||e&&e.isInnerInvoke||((r=n[t])&&(t=r),e&&e._complete&&delete e._complete,console.log('"'+t+'",',e||""))}function B(t){var e;s||l||g.debug||d<"6.0.2"||f.systemType<0||(e=new Image,f.appId=g.appId,f.initTime=p.initEndTime-p.initStartTime,f.preVerifyTime=p.preVerifyEndTime-p.preVerifyStartTime,b.getNetworkType({isInnerInvoke:!0,success:function(r){f.networkType=r.networkType,r="https://open.weixin.qq.com/sdk/report?v="+f.version+"&o="+f.isPreVerifyOk+"&s="+f.systemType+"&c="+f.clientVersion+"&a="+f.appId+"&n="+f.networkType+"&i="+f.initTime+"&p="+f.preVerifyTime+"&u="+f.url+"&jsapi_name="+(t?t.jsApiName:""),e.src=r}}))}function E(){return(new Date).getTime()}function I(e){c&&(t.WeixinJSBridge?e():i.addEventListener&&i.addEventListener("WeixinJSBridgeReady",e,!1))}console.warn("can't use weixin-js-sdk in server side")}(t)),weixinJsSdk.exports;var t}var weixinJsSdkExports=requireWeixinJsSdk();const wx$1=getDefaultExportFromCjs(weixinJsSdkExports);var coordtransform$2={exports:{}},coordtransform$1=coordtransform$2.exports,hasRequiredCoordtransform;function requireCoordtransform(){return hasRequiredCoordtransform||(hasRequiredCoordtransform=1,e=coordtransform$1,r=function(){var t=52.35987755982988,e=3.141592653589793,r=6378245,n=.006693421622965943,i=function(t,r){var n=2*(t=+t)-100+3*(r=+r)+.2*r*r+.1*t*r+.2*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*e)+20*Math.sin(2*t*e))/3,n+=2*(20*Math.sin(r*e)+40*Math.sin(r/3*e))/3,n+=2*(160*Math.sin(r/12*e)+320*Math.sin(r*e/30))/3},o=function(t,r){var n=300+(t=+t)+2*(r=+r)+.1*t*t+.1*t*r+.1*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*e)+20*Math.sin(2*t*e))/3,n+=2*(20*Math.sin(t*e)+40*Math.sin(t/3*e))/3,n+=2*(150*Math.sin(t/12*e)+300*Math.sin(t/30*e))/3},a=function(t,e){return e=+e,!((t=+t)>73.66&&t<135.05&&e>3.86&&e<53.55)};return{bd09togcj02:function(e,r){var n=(e=+e)-.0065,i=(r=+r)-.006,o=Math.sqrt(n*n+i*i)-2e-5*Math.sin(i*t),a=Math.atan2(i,n)-3e-6*Math.cos(n*t);return[o*Math.cos(a),o*Math.sin(a)]},gcj02tobd09:function(e,r){r=+r,e=+e;var n=Math.sqrt(e*e+r*r)+2e-5*Math.sin(r*t),i=Math.atan2(r,e)+3e-6*Math.cos(e*t);return[n*Math.cos(i)+.0065,n*Math.sin(i)+.006]},wgs84togcj02:function(t,s){if(a(t=+t,s=+s))return[t,s];var l=i(t-105,s-35),c=o(t-105,s-35),m=s/180*e,h=Math.sin(m);h=1-n*h*h;var d=Math.sqrt(h);return l=180*l/(r*(1-n)/(h*d)*e),[t+(c=180*c/(r/d*Math.cos(m)*e)),s+l]},gcj02towgs84:function(t,s){if(a(t=+t,s=+s))return[t,s];var l=i(t-105,s-35),c=o(t-105,s-35),m=s/180*e,h=Math.sin(m);h=1-n*h*h;var d=Math.sqrt(h);return l=180*l/(r*(1-n)/(h*d)*e),[2*t-(t+(c=180*c/(r/d*Math.cos(m)*e))),2*s-(s+l)]}}},(t=coordtransform$2).exports?t.exports=r():e.coordtransform=r()),coordtransform$2.exports;var t,e,r}var coordtransformExports=requireCoordtransform();const coordtransform=getDefaultExportFromCjs(coordtransformExports);var flowchart_shim={},hasRequiredFlowchart_shim;function requireFlowchart_shim(){return hasRequiredFlowchart_shim||(hasRequiredFlowchart_shim=1,Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null===this)throw new TypeError;var e=Object(this),r=e.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>0&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!=1/0&&n!=-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var i=n>=0?n:Math.max(r-Math.abs(n),0);i<r;i++)if(i in e&&e[i]===t)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){if(null===this)throw new TypeError;var e=Object(this),r=e.length>>>0;if(0===r)return-1;var n=r;arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!=1/0&&n!=-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))));for(var i=n>=0?Math.min(n,r-1):r-Math.abs(n);i>=0;i--)if(i in e&&e[i]===t)return i;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})),flowchart_shim}var raphael_min={exports:{}},hasRequiredRaphael_min,flowchart_helpers,hasRequiredFlowchart_helpers,flowchart_defaults,hasRequiredFlowchart_defaults,flowchart_functions,hasRequiredFlowchart_functions,flowchart_symbol,hasRequiredFlowchart_symbol,flowchart_symbol_condition,hasRequiredFlowchart_symbol_condition,flowchart_symbol_parallel,hasRequiredFlowchart_symbol_parallel,flowchart_chart,hasRequiredFlowchart_chart,flowchart_symbol_start,hasRequiredFlowchart_symbol_start,flowchart_symbol_end,hasRequiredFlowchart_symbol_end,flowchart_symbol_operation,hasRequiredFlowchart_symbol_operation,flowchart_symbol_inputoutput,hasRequiredFlowchart_symbol_inputoutput,flowchart_symbol_input,hasRequiredFlowchart_symbol_input,flowchart_symbol_output,hasRequiredFlowchart_symbol_output,flowchart_symbol_subroutine,hasRequiredFlowchart_symbol_subroutine,flowchart_parse,hasRequiredFlowchart_parse;function requireRaphael_min(){return hasRequiredRaphael_min||(hasRequiredRaphael_min=1,window,raphael_min.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){var n,i;n=[r(2)],void 0===(i=function(t){function e(n){if(e.is(n,"function"))return r?n():t.on("raphael.DOMload",n);if(e.is(n,A))return e._engine.create[u](e,n.splice(0,3+e.is(n[0],C))).add(n);var i=Array.prototype.slice.call(arguments,0);if(e.is(i[i.length-1],"function")){var o=i.pop();return r?o.call(e._engine.create[u](e,i)):t.on("raphael.DOMload",(function(){o.call(e._engine.create[u](e,i))}))}return e._engine.create[u](e,arguments)}e.version="2.3.0",e.eve=t;var r,n,i,o,a=/[, ]+/,s={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},l=/\{(\d+)\}/g,c="hasOwnProperty",m={doc:document,win:window},h={was:Object.prototype[c].call(m.win,"Raphael"),is:m.win.Raphael},d=function(){this.ca=this.customAttributes={}},u="apply",p="concat",f="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,g="",y=" ",x=String,v="split",_="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[v](y),b={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},w=x.prototype.toLowerCase,k=Math,S=k.max,q=k.min,L=k.abs,M=k.pow,T=k.PI,C="number",A="array",B=Object.prototype.toString,E=(e._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),I={NaN:1,Infinity:1,"-Infinity":1},D=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,j=k.round,R=parseFloat,P=parseInt,O=x.prototype.toUpperCase,N=e._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},F=e._availableAnimAttrs={blur:C,"clip-rect":"csv",cx:C,cy:C,fill:"colour","fill-opacity":C,"font-size":C,height:C,opacity:C,path:"path",r:C,rx:C,ry:C,stroke:"colour","stroke-opacity":C,"stroke-width":C,transform:"transform",width:C,x:C,y:C},$=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,H={hs:1,rg:1},z=/,?([achlmqrstvxz]),?/gi,U=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,V=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,X=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,J=(e._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),W=function(t,e){return R(t)-R(e)},G=function(t){return t},Y=e._rectPath=function(t,e,r,n,i){return i?[["M",t+i,e],["l",r-2*i,0],["a",i,i,0,0,1,i,i],["l",0,n-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-r,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-n],["a",i,i,0,0,1,i,-i],["z"]]:[["M",t,e],["l",r,0],["l",0,n],["l",-r,0],["z"]]},Q=function(t,e,r,n){return null==n&&(n=r),[["M",t,e],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]]},Z=e._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return Q(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return Q(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return Y(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return Y(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return Y(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return Y(e.x,e.y,e.width,e.height)}},K=e.mapPath=function(t,e){if(!e)return t;var r,n,i,o,a,s,l;for(i=0,a=(t=Mt(t)).length;i<a;i++)for(o=1,s=(l=t[i]).length;o<s;o+=2)r=e.x(l[o],l[o+1]),n=e.y(l[o],l[o+1]),l[o]=r,l[o+1]=n;return t};if(e._g=m,e.type=m.win.SVGAngle||m.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==e.type){var tt,et=m.doc.createElement("div");if(et.innerHTML='<v:shape adj="1"/>',(tt=et.firstChild).style.behavior="url(#default#VML)",!tt||"object"!=typeof tt.adj)return e.type=g;et=null}function rt(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var r in t)t[c](r)&&(e[r]=rt(t[r]));return e}e.svg=!(e.vml="VML"==e.type),e._Paper=d,e.fn=n=d.prototype=e.prototype,e._id=0,e.is=function(t,e){return"finite"==(e=w.call(e))?!I[c](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||B.call(t).slice(8,-1).toLowerCase()==e},e.angle=function(t,r,n,i,o,a){if(null==o){var s=t-n,l=r-i;return s||l?(180+180*k.atan2(-l,-s)/T+360)%360:0}return e.angle(t,r,o,a)-e.angle(n,i,o,a)},e.rad=function(t){return t%360*T/180},e.deg=function(t){return Math.round(180*t/T%360*1e3)/1e3},e.snapTo=function(t,r,n){if(n=e.is(n,"finite")?n:10,e.is(t,A)){for(var i=t.length;i--;)if(L(t[i]-r)<=n)return t[i]}else{var o=r%(t=+t);if(o<n)return r-o;if(o>t-n)return r-o+t}return r},e.createUUID=(i=/[xy]/g,o=function(t){var e=16*k.random()|0;return("x"==t?e:3&e|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(i,o).toUpperCase()}),e.setWindow=function(r){t("raphael.setWindow",e,m.win,r),m.win=r,m.doc=m.win.document,e._engine.initWin&&e._engine.initWin(m.win)};var nt=function(t){if(e.vml){var r,n=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),r=i.body}catch(s){r=createPopup().document.body}var o=r.createTextRange();nt=ct((function(t){try{r.style.color=x(t).replace(n,g);var e=o.queryCommandValue("ForeColor");return"#"+("000000"+(e=(255&e)<<16|65280&e|(16711680&e)>>>16).toString(16)).slice(-6)}catch(i){return"none"}}))}else{var a=m.doc.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",m.doc.body.appendChild(a),nt=ct((function(t){return a.style.color=t,m.doc.defaultView.getComputedStyle(a,g).getPropertyValue("color")}))}return nt(t)},it=function(){return"hsb("+[this.h,this.s,this.b]+")"},ot=function(){return"hsl("+[this.h,this.s,this.l]+")"},at=function(){return this.hex},st=function(t,r,n){if(null==r&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,r=t.g,t=t.r),null==r&&e.is(t,"string")){var i=e.getRGB(t);t=i.r,r=i.g,n=i.b}return(t>1||r>1||n>1)&&(t/=255,r/=255,n/=255),[t,r,n]},lt=function(t,r,n,i){var o={r:t*=255,g:r*=255,b:n*=255,hex:e.rgb(t,r,n),toString:at};return e.is(i,"finite")&&(o.opacity=i),o};function ct(t,e,r){return function n(){var i=Array.prototype.slice.call(arguments,0),o=i.join("␀"),a=n.cache=n.cache||{},s=n.count=n.count||[];return a[c](o)?(function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return t.push(t.splice(r,1)[0])}(s,o),r?r(a[o]):a[o]):(s.length>=1e3&&delete a[s.shift()],s.push(o),a[o]=t[u](e,i),r?r(a[o]):a[o])}}function mt(){return this.hex}function ht(t,e){for(var r=[],n=0,i=t.length;i-2*!e>n;n+=2){var o=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?i-4==n?o[3]={x:+t[0],y:+t[1]}:i-2==n&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4==n?o[3]=o[2]:n||(o[0]={x:+t[n],y:+t[n+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r}e.color=function(t){var r;return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(r=e.hsb2rgb(t),t.r=r.r,t.g=r.g,t.b=r.b,t.hex=r.hex):e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(r=e.hsl2rgb(t),t.r=r.r,t.g=r.g,t.b=r.b,t.hex=r.hex):(e.is(t,"string")&&(t=e.getRGB(t)),e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(r=e.rgb2hsl(t),t.h=r.h,t.s=r.s,t.l=r.l,r=e.rgb2hsb(t),t.v=r.b):(t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1),t.toString=at,t},e.hsb2rgb=function(t,e,r,n){var i,o,a,s,l;return this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(r=t.b,e=t.s,n=t.o,t=t.h),s=(l=r*e)*(1-L((t=(t*=360)%360/60)%2-1)),i=o=a=r-l,lt(i+=[l,s,0,0,s,l][t=~~t],o+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],n)},e.hsl2rgb=function(t,e,r,n){var i,o,a,s,l;return this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(r=t.l,e=t.s,t=t.h),(t>1||e>1||r>1)&&(t/=360,e/=100,r/=100),s=(l=2*e*(r<.5?r:1-r))*(1-L((t=(t*=360)%360/60)%2-1)),i=o=a=r-l/2,lt(i+=[l,s,0,0,s,l][t=~~t],o+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],n)},e.rgb2hsb=function(t,e,r){var n,i;return t=(r=st(t,e,r))[0],e=r[1],r=r[2],{h:((0==(i=(n=S(t,e,r))-q(t,e,r))?null:n==t?(e-r)/i:n==e?(r-t)/i+2:(t-e)/i+4)+360)%6*60/360,s:0==i?0:i/n,b:n,toString:it}},e.rgb2hsl=function(t,e,r){var n,i,o,a;return t=(r=st(t,e,r))[0],e=r[1],r=r[2],n=((i=S(t,e,r))+(o=q(t,e,r)))/2,{h:((0==(a=i-o)?null:i==t?(e-r)/a:i==e?(r-t)/a+2:(t-e)/a+4)+360)%6*60/360,s:0==a?0:n<.5?a/(2*n):a/(2-2*n),l:n,toString:ot}},e._path2string=function(){return this.join(",").replace(z,"$1")},e._preload=function(t,e){var r=m.doc.createElement("img");r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){e.call(this),this.onload=null,m.doc.body.removeChild(this)},r.onerror=function(){m.doc.body.removeChild(this)},m.doc.body.appendChild(r),r.src=t},e.getRGB=ct((function(t){if(!t||(t=x(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:mt};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:mt};!H[c](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=nt(t));var r,n,i,o,a,s,l=t.match(E);return l?(l[2]&&(i=P(l[2].substring(5),16),n=P(l[2].substring(3,5),16),r=P(l[2].substring(1,3),16)),l[3]&&(i=P((a=l[3].charAt(3))+a,16),n=P((a=l[3].charAt(2))+a,16),r=P((a=l[3].charAt(1))+a,16)),l[4]&&(s=l[4][v]($),r=R(s[0]),"%"==s[0].slice(-1)&&(r*=2.55),n=R(s[1]),"%"==s[1].slice(-1)&&(n*=2.55),i=R(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(o=R(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100)),l[5]?(s=l[5][v]($),r=R(s[0]),"%"==s[0].slice(-1)&&(r*=2.55),n=R(s[1]),"%"==s[1].slice(-1)&&(n*=2.55),i=R(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),("deg"==s[0].slice(-3)||"°"==s[0].slice(-1))&&(r/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(o=R(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100),e.hsb2rgb(r,n,i,o)):l[6]?(s=l[6][v]($),r=R(s[0]),"%"==s[0].slice(-1)&&(r*=2.55),n=R(s[1]),"%"==s[1].slice(-1)&&(n*=2.55),i=R(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),("deg"==s[0].slice(-3)||"°"==s[0].slice(-1))&&(r/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(o=R(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100),e.hsl2rgb(r,n,i,o)):((l={r:r,g:n,b:i,toString:mt}).hex="#"+(16777216|i|n<<8|r<<16).toString(16).slice(1),e.is(o,"finite")&&(l.opacity=o),l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:mt}}),e),e.hsb=ct((function(t,r,n){return e.hsb2rgb(t,r,n).hex})),e.hsl=ct((function(t,r,n){return e.hsl2rgb(t,r,n).hex})),e.rgb=ct((function(t,e,r){function n(t){return t+.5|0}return"#"+(16777216|n(r)|n(e)<<8|n(t)<<16).toString(16).slice(1)})),e.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},r=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),r.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=function(t){if(!t)return null;var r=dt(t);if(r.arr)return vt(r.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return e.is(t,A)&&e.is(t[0],A)&&(i=vt(t)),i.length||x(t).replace(U,(function(t,e,r){var o=[],a=e.toLowerCase();if(r.replace(X,(function(t,e){e&&o.push(+e)})),"m"==a&&o.length>2&&(i.push([e][p](o.splice(0,2))),a="l",e="m"==e?"l":"L"),"r"==a)i.push([e][p](o));else for(;o.length>=n[a]&&(i.push([e][p](o.splice(0,n[a]))),n[a]););})),i.toString=e._path2string,r.arr=vt(i),i},e.parseTransformString=ct((function(t){if(!t)return null;var r=[];return e.is(t,A)&&e.is(t[0],A)&&(r=vt(t)),r.length||x(t).replace(V,(function(t,e,n){var i=[];w.call(e),n.replace(X,(function(t,e){e&&i.push(+e)})),r.push([e][p](i))})),r.toString=e._path2string,r}),this,(function(t){if(!t)return t;for(var e=[],r=0;r<t.length;r++){for(var n=[],i=0;i<t[r].length;i++)n.push(t[r][i]);e.push(n)}return e}));var dt=function(t){var e=dt.ps=dt.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout((function(){for(var r in e)e[c](r)&&r!=t&&(e[r].sleep--,!e[r].sleep&&delete e[r])})),e[t]};function ut(t,e,r,n,i){return t*(t*(-3*e+9*r-9*n+3*i)+6*e-12*r+6*n)-3*e+3*r}function pt(t,e,r,n,i,o,a,s,l){null==l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,m=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,u=0;u<12;u++){var p=c*m[u]+c,f=ut(p,t,r,i,a),g=ut(p,e,n,o,s),y=f*f+g*g;d+=h[u]*k.sqrt(y)}return c*d}function ft(t,e,r,n,i,o,a,s){if(!(S(t,r)<q(i,a)||q(t,r)>S(i,a)||S(e,n)<q(o,s)||q(e,n)>S(o,s))){var l=(t-r)*(o-s)-(e-n)*(i-a);if(l){var c=((t*n-e*r)*(i-a)-(t-r)*(i*s-o*a))/l,m=((t*n-e*r)*(o-s)-(e-n)*(i*s-o*a))/l,h=+c.toFixed(2),d=+m.toFixed(2);if(!(h<+q(t,r).toFixed(2)||h>+S(t,r).toFixed(2)||h<+q(i,a).toFixed(2)||h>+S(i,a).toFixed(2)||d<+q(e,n).toFixed(2)||d>+S(e,n).toFixed(2)||d<+q(o,s).toFixed(2)||d>+S(o,s).toFixed(2)))return{x:c,y:m}}}}function gt(t,r,n){var i=e.bezierBBox(t),o=e.bezierBBox(r);if(!e.isBBoxIntersect(i,o))return n?0:[];for(var a=pt.apply(0,t),s=pt.apply(0,r),l=S(~~(a/5),1),c=S(~~(s/5),1),m=[],h=[],d={},u=n?0:[],p=0;p<l+1;p++){var f=e.findDotsAtSegment.apply(e,t.concat(p/l));m.push({x:f.x,y:f.y,t:p/l})}for(p=0;p<c+1;p++)f=e.findDotsAtSegment.apply(e,r.concat(p/c)),h.push({x:f.x,y:f.y,t:p/c});for(p=0;p<l;p++)for(var g=0;g<c;g++){var y=m[p],x=m[p+1],v=h[g],_=h[g+1],b=L(x.x-y.x)<.001?"y":"x",w=L(_.x-v.x)<.001?"y":"x",k=ft(y.x,y.y,x.x,x.y,v.x,v.y,_.x,_.y);if(k){if(d[k.x.toFixed(4)]==k.y.toFixed(4))continue;d[k.x.toFixed(4)]=k.y.toFixed(4);var M=y.t+L((k[b]-y[b])/(x[b]-y[b]))*(x.t-y.t),T=v.t+L((k[w]-v[w])/(_[w]-v[w]))*(_.t-v.t);M>=0&&M<=1.001&&T>=0&&T<=1.001&&(n?u++:u.push({x:k.x,y:k.y,t1:q(M,1),t2:q(T,1)}))}}return u}function yt(t,r,n){t=e._path2curve(t),r=e._path2curve(r);for(var i,o,a,s,l,c,m,h,d,u,p=n?0:[],f=0,g=t.length;f<g;f++){var y=t[f];if("M"==y[0])i=l=y[1],o=c=y[2];else{"C"==y[0]?(d=[i,o].concat(y.slice(1)),i=d[6],o=d[7]):(d=[i,o,i,o,l,c,l,c],i=l,o=c);for(var x=0,v=r.length;x<v;x++){var _=r[x];if("M"==_[0])a=m=_[1],s=h=_[2];else{"C"==_[0]?(u=[a,s].concat(_.slice(1)),a=u[6],s=u[7]):(u=[a,s,a,s,m,h,m,h],a=m,s=h);var b=gt(d,u,n);if(n)p+=b;else{for(var w=0,k=b.length;w<k;w++)b[w].segment1=f,b[w].segment2=x,b[w].bez1=d,b[w].bez2=u;p=p.concat(b)}}}}}return p}e.findDotsAtSegment=function(t,e,r,n,i,o,a,s,l){var c=1-l,m=M(c,3),h=M(c,2),d=l*l,u=d*l,p=m*t+3*h*l*r+3*c*l*l*i+u*a,f=m*e+3*h*l*n+3*c*l*l*o+u*s,g=t+2*l*(r-t)+d*(i-2*r+t),y=e+2*l*(n-e)+d*(o-2*n+e),x=r+2*l*(i-r)+d*(a-2*i+r),v=n+2*l*(o-n)+d*(s-2*o+n),_=c*t+l*r,b=c*e+l*n,w=c*i+l*a,S=c*o+l*s,q=90-180*k.atan2(g-x,y-v)/T;return(g>x||y<v)&&(q+=180),{x:p,y:f,m:{x:g,y:y},n:{x:x,y:v},start:{x:_,y:b},end:{x:w,y:S},alpha:q}},e.bezierBBox=function(t,r,n,i,o,a,s,l){e.is(t,"array")||(t=[t,r,n,i,o,a,s,l]);var c=Lt.apply(null,t);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},e.isPointInsideBBox=function(t,e,r){return e>=t.x&&e<=t.x2&&r>=t.y&&r<=t.y2},e.isBBoxIntersect=function(t,r){var n=e.isPointInsideBBox;return n(r,t.x,t.y)||n(r,t.x2,t.y)||n(r,t.x,t.y2)||n(r,t.x2,t.y2)||n(t,r.x,r.y)||n(t,r.x2,r.y)||n(t,r.x,r.y2)||n(t,r.x2,r.y2)||(t.x<r.x2&&t.x>r.x||r.x<t.x2&&r.x>t.x)&&(t.y<r.y2&&t.y>r.y||r.y<t.y2&&r.y>t.y)},e.pathIntersection=function(t,e){return yt(t,e)},e.pathIntersectionNumber=function(t,e){return yt(t,e,1)},e.isPointInsidePath=function(t,r,n){var i=e.pathBBox(t);return e.isPointInsideBBox(i,r,n)&&yt(t,[["M",r,n],["H",i.x2+10]],1)%2==1},e._removedFactory=function(e){return function(){t("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var xt=e.pathBBox=function(t){var e=dt(t);if(e.bbox)return rt(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var r,n=0,i=0,o=[],a=[],s=0,l=(t=Mt(t)).length;s<l;s++)if("M"==(r=t[s])[0])n=r[1],i=r[2],o.push(n),a.push(i);else{var c=Lt(n,i,r[1],r[2],r[3],r[4],r[5],r[6]);o=o[p](c.min.x,c.max.x),a=a[p](c.min.y,c.max.y),n=r[5],i=r[6]}var m=q[u](0,o),h=q[u](0,a),d=S[u](0,o),f=S[u](0,a),g=d-m,y=f-h,x={x:m,y:h,x2:d,y2:f,width:g,height:y,cx:m+g/2,cy:h+y/2};return e.bbox=rt(x),x},vt=function(t){var r=rt(t);return r.toString=e._path2string,r},_t=e._pathToRelative=function(t){var r=dt(t);if(r.rel)return vt(r.rel);e.is(t,A)&&e.is(t&&t[0],A)||(t=e.parsePathString(t));var n=[],i=0,o=0,a=0,s=0,l=0;"M"==t[0][0]&&(a=i=t[0][1],s=o=t[0][2],l++,n.push(["M",i,o]));for(var c=l,m=t.length;c<m;c++){var h=n[c]=[],d=t[c];if(d[0]!=w.call(d[0]))switch(h[0]=w.call(d[0]),h[0]){case"a":h[1]=d[1],h[2]=d[2],h[3]=d[3],h[4]=d[4],h[5]=d[5],h[6]=+(d[6]-i).toFixed(3),h[7]=+(d[7]-o).toFixed(3);break;case"v":h[1]=+(d[1]-o).toFixed(3);break;case"m":a=d[1],s=d[2];default:for(var u=1,p=d.length;u<p;u++)h[u]=+(d[u]-(u%2?i:o)).toFixed(3)}else{h=n[c]=[],"m"==d[0]&&(a=d[1]+i,s=d[2]+o);for(var f=0,g=d.length;f<g;f++)n[c][f]=d[f]}var y=n[c].length;switch(n[c][0]){case"z":i=a,o=s;break;case"h":i+=+n[c][y-1];break;case"v":o+=+n[c][y-1];break;default:i+=+n[c][y-2],o+=+n[c][y-1]}}return n.toString=e._path2string,r.rel=vt(n),n},bt=e._pathToAbsolute=function(t){var r=dt(t);if(r.abs)return vt(r.abs);if(e.is(t,A)&&e.is(t&&t[0],A)||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],i=0,o=0,a=0,s=0,l=0;"M"==t[0][0]&&(a=i=+t[0][1],s=o=+t[0][2],l++,n[0]=["M",i,o]);for(var c,m,h=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),d=l,u=t.length;d<u;d++){if(n.push(c=[]),(m=t[d])[0]!=O.call(m[0]))switch(c[0]=O.call(m[0]),c[0]){case"A":c[1]=m[1],c[2]=m[2],c[3]=m[3],c[4]=m[4],c[5]=m[5],c[6]=+(m[6]+i),c[7]=+(m[7]+o);break;case"V":c[1]=+m[1]+o;break;case"H":c[1]=+m[1]+i;break;case"R":for(var f=[i,o][p](m.slice(1)),g=2,y=f.length;g<y;g++)f[g]=+f[g]+i,f[++g]=+f[g]+o;n.pop(),n=n[p](ht(f,h));break;case"M":a=+m[1]+i,s=+m[2]+o;default:for(g=1,y=m.length;g<y;g++)c[g]=+m[g]+(g%2?i:o)}else if("R"==m[0])f=[i,o][p](m.slice(1)),n.pop(),n=n[p](ht(f,h)),c=["R"][p](m.slice(-2));else for(var x=0,v=m.length;x<v;x++)c[x]=m[x];switch(c[0]){case"Z":i=a,o=s;break;case"H":i=c[1];break;case"V":o=c[1];break;case"M":a=c[c.length-2],s=c[c.length-1];default:i=c[c.length-2],o=c[c.length-1]}}return n.toString=e._path2string,r.abs=vt(n),n},wt=function(t,e,r,n){return[t,e,r,n,r,n]},kt=function(t,e,r,n,i,o){return[1/3*t+2/3*r,1/3*e+2/3*n,1/3*i+2/3*r,1/3*o+2/3*n,i,o]},St=function(t,e,r,n,i,o,a,s,l,c){var m,h=120*T/180,d=T/180*(+i||0),u=[],f=ct((function(t,e,r){return{x:t*k.cos(r)-e*k.sin(r),y:t*k.sin(r)+e*k.cos(r)}}));if(c)M=c[0],C=c[1],S=c[2],q=c[3];else{t=(m=f(t,e,-d)).x,e=m.y;var g=(t-(s=(m=f(s,l,-d)).x))/2,y=(e-(l=m.y))/2,x=g*g/(r*r)+y*y/(n*n);x>1&&(r*=x=k.sqrt(x),n*=x);var _=r*r,b=n*n,w=(o==a?-1:1)*k.sqrt(L((_*b-_*y*y-b*g*g)/(_*y*y+b*g*g))),S=w*r*y/n+(t+s)/2,q=w*-n*g/r+(e+l)/2,M=k.asin(((e-q)/n).toFixed(9)),C=k.asin(((l-q)/n).toFixed(9));(M=t<S?T-M:M)<0&&(M=2*T+M),(C=s<S?T-C:C)<0&&(C=2*T+C),a&&M>C&&(M-=2*T),!a&&C>M&&(C-=2*T)}var A=C-M;if(L(A)>h){var B=C,E=s,I=l;C=M+h*(a&&C>M?1:-1),s=S+r*k.cos(C),l=q+n*k.sin(C),u=St(s,l,r,n,i,0,a,E,I,[C,B,S,q])}A=C-M;var D=k.cos(M),j=k.sin(M),R=k.cos(C),P=k.sin(C),O=k.tan(A/4),N=4/3*r*O,F=4/3*n*O,$=[t,e],H=[t+N*j,e-F*D],z=[s+N*P,l-F*R],U=[s,l];if(H[0]=2*$[0]-H[0],H[1]=2*$[1]-H[1],c)return[H,z,U][p](u);for(var V=[],X=0,J=(u=[H,z,U][p](u).join()[v](",")).length;X<J;X++)V[X]=X%2?f(u[X-1],u[X],d).y:f(u[X],u[X+1],d).x;return V},qt=function(t,e,r,n,i,o,a,s,l){var c=1-l;return{x:M(c,3)*t+3*M(c,2)*l*r+3*c*l*l*i+M(l,3)*a,y:M(c,3)*e+3*M(c,2)*l*n+3*c*l*l*o+M(l,3)*s}},Lt=ct((function(t,e,r,n,i,o,a,s){var l,c=i-2*r+t-(a-2*i+r),m=2*(r-t)-2*(i-r),h=t-r,d=(-m+k.sqrt(m*m-4*c*h))/2/c,p=(-m-k.sqrt(m*m-4*c*h))/2/c,f=[e,s],g=[t,a];return L(d)>"1e12"&&(d=.5),L(p)>"1e12"&&(p=.5),d>0&&d<1&&(l=qt(t,e,r,n,i,o,a,s,d),g.push(l.x),f.push(l.y)),p>0&&p<1&&(l=qt(t,e,r,n,i,o,a,s,p),g.push(l.x),f.push(l.y)),c=o-2*n+e-(s-2*o+n),h=e-n,d=(-(m=2*(n-e)-2*(o-n))+k.sqrt(m*m-4*c*h))/2/c,p=(-m-k.sqrt(m*m-4*c*h))/2/c,L(d)>"1e12"&&(d=.5),L(p)>"1e12"&&(p=.5),d>0&&d<1&&(l=qt(t,e,r,n,i,o,a,s,d),g.push(l.x),f.push(l.y)),p>0&&p<1&&(l=qt(t,e,r,n,i,o,a,s,p),g.push(l.x),f.push(l.y)),{min:{x:q[u](0,g),y:q[u](0,f)},max:{x:S[u](0,g),y:S[u](0,f)}}})),Mt=e._path2curve=ct((function(t,e){var r=!e&&dt(t);if(!e&&r.curve)return vt(r.curve);for(var n=bt(t),i=e&&bt(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(t,e,r){var n,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][p](St[u](0,[e.x,e.y][p](t.slice(1))));break;case"S":"C"==r||"S"==r?(n=2*e.x-e.bx,i=2*e.y-e.by):(n=e.x,i=e.y),t=["C",n,i][p](t.slice(1));break;case"T":"Q"==r||"T"==r?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][p](kt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][p](kt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][p](wt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][p](wt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][p](wt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][p](wt(e.x,e.y,e.X,e.Y))}return t},l=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)m[e]="A",i&&(h[e]="A"),t.splice(e++,0,["C"][p](r.splice(0,6)));t.splice(e,1),y=S(n.length,i&&i.length||0)}},c=function(t,e,r,o,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",o.x,o.y]),r.bx=0,r.by=0,r.x=t[a][1],r.y=t[a][2],y=S(n.length,i&&i.length||0))},m=[],h=[],d="",f="",g=0,y=S(n.length,i&&i.length||0);g<y;g++){n[g]&&(d=n[g][0]),"C"!=d&&(m[g]=d,g&&(f=m[g-1])),n[g]=s(n[g],o,f),"A"!=m[g]&&"C"==d&&(m[g]="C"),l(n,g),i&&(i[g]&&(d=i[g][0]),"C"!=d&&(h[g]=d,g&&(f=h[g-1])),i[g]=s(i[g],a,f),"A"!=h[g]&&"C"==d&&(h[g]="C"),l(i,g)),c(n,i,o,a,g),c(i,n,a,o,g);var x=n[g],v=i&&i[g],_=x.length,b=i&&v.length;o.x=x[_-2],o.y=x[_-1],o.bx=R(x[_-4])||o.x,o.by=R(x[_-3])||o.y,a.bx=i&&(R(v[b-4])||a.x),a.by=i&&(R(v[b-3])||a.y),a.x=i&&v[b-2],a.y=i&&v[b-1]}return i||(r.curve=vt(n)),i?[n,i]:n}),null,vt),Tt=(e._parseDots=ct((function(t){for(var r=[],n=0,i=t.length;n<i;n++){var o={},a=t[n].match(/^([^:]*):?([\d\.]*)/);if(o.color=e.getRGB(a[1]),o.color.error)return null;o.opacity=o.color.opacity,o.color=o.color.hex,a[2]&&(o.offset=a[2]+"%"),r.push(o)}for(n=1,i=r.length-1;n<i;n++)if(!r[n].offset){for(var s=R(r[n-1].offset||0),l=0,c=n+1;c<i;c++)if(r[c].offset){l=r[c].offset;break}l||(l=100,c=i);for(var m=((l=R(l))-s)/(c-n+1);n<c;n++)s+=m,r[n].offset=s+"%"}return r})),e._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Ct=(e._tofront=function(t,e){e.top!==t&&(Tt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},e._toback=function(t,e){e.bottom!==t&&(Tt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},e._insertafter=function(t,e,r){Tt(t,r),e==r.top&&(r.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},e._insertbefore=function(t,e,r){Tt(t,r),e==r.bottom&&(r.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},e.toMatrix=function(t,e){var r=xt(t),n={_:{transform:g},getBBox:function(){return r}};return At(n,e),n.matrix}),At=(e.transformPath=function(t,e){return K(t,Ct(t,e))},e._extractTransform=function(t,r){if(null==r)return t._.transform;r=x(r).replace(/\.{3}|\u2026/g,t._.transform||g);var n,i,o=e.parseTransformString(r),a=0,s=1,l=1,c=t._,m=new It;if(c.transform=o||[],o)for(var h=0,d=o.length;h<d;h++){var u,p,f,y,v,_=o[h],b=_.length,w=x(_[0]).toLowerCase(),k=_[0]!=w,S=k?m.invert():0;"t"==w&&3==b?k?(u=S.x(0,0),p=S.y(0,0),f=S.x(_[1],_[2]),y=S.y(_[1],_[2]),m.translate(f-u,y-p)):m.translate(_[1],_[2]):"r"==w?2==b?(v=v||t.getBBox(1),m.rotate(_[1],v.x+v.width/2,v.y+v.height/2),a+=_[1]):4==b&&(k?(f=S.x(_[2],_[3]),y=S.y(_[2],_[3]),m.rotate(_[1],f,y)):m.rotate(_[1],_[2],_[3]),a+=_[1]):"s"==w?2==b||3==b?(v=v||t.getBBox(1),m.scale(_[1],_[b-1],v.x+v.width/2,v.y+v.height/2),s*=_[1],l*=_[b-1]):5==b&&(k?(f=S.x(_[3],_[4]),y=S.y(_[3],_[4]),m.scale(_[1],_[2],f,y)):m.scale(_[1],_[2],_[3],_[4]),s*=_[1],l*=_[2]):"m"==w&&7==b&&m.add(_[1],_[2],_[3],_[4],_[5],_[6]),c.dirtyT=1,t.matrix=m}t.matrix=m,c.sx=s,c.sy=l,c.deg=a,c.dx=n=m.e,c.dy=i=m.f,1==s&&1==l&&!a&&c.bbox?(c.bbox.x+=+n,c.bbox.y+=+i):c.dirtyT=1}),Bt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Et=e._equaliseTransform=function(t,r){r=x(r).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],r=e.parseTransformString(r)||[];for(var n,i,o,a,s=S(t.length,r.length),l=[],c=[],m=0;m<s;m++){if(o=t[m]||Bt(r[m]),a=r[m]||Bt(o),o[0]!=a[0]||"r"==o[0].toLowerCase()&&(o[2]!=a[2]||o[3]!=a[3])||"s"==o[0].toLowerCase()&&(o[3]!=a[3]||o[4]!=a[4]))return;for(l[m]=[],c[m]=[],n=0,i=S(o.length,a.length);n<i;n++)n in o&&(l[m][n]=o[n]),n in a&&(c[m][n]=a[n])}return{from:l,to:c}};function It(t,e,r,n,i,o){null!=t?(this.a=+t,this.b=+e,this.c=+r,this.d=+n,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}e._getContainer=function(t,r,n,i){var o;if(null!=(o=null!=i||e.is(t,"object")?t:m.doc.getElementById(t)))return o.tagName?null==r?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:r,height:n}:{container:1,x:t,y:r,width:n,height:i}},e.pathToRelative=_t,e._engine={},e.path2curve=Mt,e.matrix=function(t,e,r,n,i,o){return new It(t,e,r,n,i,o)},function(t){function r(t){return t[0]*t[0]+t[1]*t[1]}function n(t){var e=k.sqrt(r(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}t.add=function(t,e,r,n,i,o){var a,s,l,c,m=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],d=[[t,r,i],[e,n,o],[0,0,1]];for(t&&t instanceof It&&(d=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),a=0;a<3;a++)for(s=0;s<3;s++){for(c=0,l=0;l<3;l++)c+=h[a][l]*d[l][s];m[a][s]=c}this.a=m[0][0],this.b=m[1][0],this.c=m[0][1],this.d=m[1][1],this.e=m[0][2],this.f=m[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new It(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new It(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,r,n){null==e&&(e=t),(r||n)&&this.add(1,0,0,1,r,n),this.add(t,0,0,e,0,0),(r||n)&&this.add(1,0,0,1,-r,-n)},t.rotate=function(t,r,n){t=e.rad(t),r=r||0,n=n||0;var i=+k.cos(t).toFixed(9),o=+k.sin(t).toFixed(9);this.add(i,o,-o,i,r,n),this.add(1,0,0,1,-r,-n)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[x.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return e.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=k.sqrt(r(i[0])),n(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=k.sqrt(r(i[1])),n(i[1]),t.shear/=t.scaley;var o=-i[0][1],a=i[1][1];return a<0?(t.rotate=e.deg(k.acos(a)),o<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(k.asin(o)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[v]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:g)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:g)+(e.rotate?"r"+[e.rotate,0,0]:g)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(It.prototype);for(var Dt=function(){this.returnValue=!1},jt=function(){return this.originalEvent.preventDefault()},Rt=function(){this.cancelBubble=!0},Pt=function(){return this.originalEvent.stopPropagation()},Ot=function(t){var e=m.doc.documentElement.scrollTop||m.doc.body.scrollTop,r=m.doc.documentElement.scrollLeft||m.doc.body.scrollLeft;return{x:t.clientX+r,y:t.clientY+e}},Nt=m.doc.addEventListener?function(t,e,r,n){var i=function(t){var e=Ot(t);return r.call(n,t,e.x,e.y)};if(t.addEventListener(e,i,!1),f&&b[e]){var o=function(e){for(var i=Ot(e),o=e,a=0,s=e.targetTouches&&e.targetTouches.length;a<s;a++)if(e.targetTouches[a].target==t){(e=e.targetTouches[a]).originalEvent=o,e.preventDefault=jt,e.stopPropagation=Pt;break}return r.call(n,e,i.x,i.y)};t.addEventListener(b[e],o,!1)}return function(){return t.removeEventListener(e,i,!1),f&&b[e]&&t.removeEventListener(b[e],o,!1),!0}}:m.doc.attachEvent?function(t,e,r,n){var i=function(t){t=t||m.win.event;var e=m.doc.documentElement.scrollTop||m.doc.body.scrollTop,i=m.doc.documentElement.scrollLeft||m.doc.body.scrollLeft,o=t.clientX+i,a=t.clientY+e;return t.preventDefault=t.preventDefault||Dt,t.stopPropagation=t.stopPropagation||Rt,r.call(n,t,o,a)};return t.attachEvent("on"+e,i),function(){return t.detachEvent("on"+e,i),!0}}:void 0,Ft=[],$t=function(e){for(var r,n=e.clientX,i=e.clientY,o=m.doc.documentElement.scrollTop||m.doc.body.scrollTop,a=m.doc.documentElement.scrollLeft||m.doc.body.scrollLeft,s=Ft.length;s--;){if(r=Ft[s],f&&e.touches){for(var l,c=e.touches.length;c--;)if((l=e.touches[c]).identifier==r.el._drag.id){n=l.clientX,i=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var h,d=r.el.node,u=d.nextSibling,p=d.parentNode,g=d.style.display;m.win.opera&&p.removeChild(d),d.style.display="none",h=r.el.paper.getElementByPoint(n,i),d.style.display=g,m.win.opera&&(u?p.insertBefore(d,u):p.appendChild(d)),h&&t("raphael.drag.over."+r.el.id,r.el,h),n+=a,i+=o,t("raphael.drag.move."+r.el.id,r.move_scope||r.el,n-r.el._drag.x,i-r.el._drag.y,n,i,e)}},Ht=function(r){e.unmousemove($t).unmouseup(Ht);for(var n,i=Ft.length;i--;)(n=Ft[i]).el._drag={},t("raphael.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,r);Ft=[]},zt=e.el={},Ut=_.length;Ut--;)!function(t){e[t]=zt[t]=function(r,n){return e.is(r,"function")&&(this.events=this.events||[],this.events.push({name:t,f:r,unbind:Nt(this.shape||this.node||m.doc,t,r,n||this)})),this},e["un"+t]=zt["un"+t]=function(r){for(var n=this.events||[],i=n.length;i--;)n[i].name!=t||!e.is(r,"undefined")&&n[i].f!=r||(n[i].unbind(),n.splice(i,1),!n.length&&delete this.events);return this}}(_[Ut]);zt.data=function(r,n){var i=J[this.id]=J[this.id]||{};if(0==arguments.length)return i;if(1==arguments.length){if(e.is(r,"object")){for(var o in r)r[c](o)&&this.data(o,r[o]);return this}return t("raphael.data.get."+this.id,this,i[r],r),i[r]}return i[r]=n,t("raphael.data.set."+this.id,this,n,r),this},zt.removeData=function(t){return null==t?delete J[this.id]:J[this.id]&&delete J[this.id][t],this},zt.getData=function(){return rt(J[this.id]||{})},zt.hover=function(t,e,r,n){return this.mouseover(t,r).mouseout(e,n||r)},zt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Vt=[];function Xt(){return this.x+y+this.y+y+this.width+" × "+this.height}zt.drag=function(r,n,i,o,a,s){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,h=l.clientY,d=m.doc.documentElement.scrollTop||m.doc.body.scrollTop,u=m.doc.documentElement.scrollLeft||m.doc.body.scrollLeft;if(this._drag.id=l.identifier,f&&l.touches)for(var p,g=l.touches.length;g--;)if(p=l.touches[g],this._drag.id=p.identifier,p.identifier==this._drag.id){c=p.clientX,h=p.clientY;break}this._drag.x=c+u,this._drag.y=h+d,!Ft.length&&e.mousemove($t).mouseup(Ht),Ft.push({el:this,move_scope:o,start_scope:a,end_scope:s}),n&&t.on("raphael.drag.start."+this.id,n),r&&t.on("raphael.drag.move."+this.id,r),i&&t.on("raphael.drag.end."+this.id,i),t("raphael.drag.start."+this.id,a||o||this,this._drag.x,this._drag.y,l)}return this._drag={},Vt.push({el:this,start:l}),this.mousedown(l),this},zt.onDragOver=function(e){e?t.on("raphael.drag.over."+this.id,e):t.unbind("raphael.drag.over."+this.id)},zt.undrag=function(){for(var r=Vt.length;r--;)Vt[r].el==this&&(this.unmousedown(Vt[r].start),Vt.splice(r,1),t.unbind("raphael.drag.*."+this.id));!Vt.length&&e.unmousemove($t).unmouseup(Ht),Ft=[]},n.circle=function(t,r,n){var i=e._engine.circle(this,t||0,r||0,n||0);return this.__set__&&this.__set__.push(i),i},n.rect=function(t,r,n,i,o){var a=e._engine.rect(this,t||0,r||0,n||0,i||0,o||0);return this.__set__&&this.__set__.push(a),a},n.ellipse=function(t,r,n,i){var o=e._engine.ellipse(this,t||0,r||0,n||0,i||0);return this.__set__&&this.__set__.push(o),o},n.path=function(t){t&&!e.is(t,"string")&&!e.is(t[0],A)&&(t+=g);var r=e._engine.path(e.format[u](e,arguments),this);return this.__set__&&this.__set__.push(r),r},n.image=function(t,r,n,i,o){var a=e._engine.image(this,t||"about:blank",r||0,n||0,i||0,o||0);return this.__set__&&this.__set__.push(a),a},n.text=function(t,r,n){var i=e._engine.text(this,t||0,r||0,x(n));return this.__set__&&this.__set__.push(i),i},n.set=function(t){!e.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var r=new he(t);return this.__set__&&this.__set__.push(r),r.paper=this,r.type="set",r},n.setStart=function(t){this.__set__=t||this.set()},n.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},n.getSize=function(){var t=this.canvas.parentNode;return{width:t.offsetWidth,height:t.offsetHeight}},n.setSize=function(t,r){return e._engine.setSize.call(this,t,r)},n.setViewBox=function(t,r,n,i,o){return e._engine.setViewBox.call(this,t,r,n,i,o)},n.top=n.bottom=null,n.raphael=e,n.getElementByPoint=function(t,e){var r,n,i,o,a,s,l,c=this.canvas,h=m.doc.elementFromPoint(t,e);if(m.win.opera&&"svg"==h.tagName){var d=(n=(r=c).getBoundingClientRect(),o=(i=r.ownerDocument).body,s=(a=i.documentElement).clientTop||o.clientTop||0,l=a.clientLeft||o.clientLeft||0,{y:n.top+(m.win.pageYOffset||a.scrollTop||o.scrollTop)-s,x:n.left+(m.win.pageXOffset||a.scrollLeft||o.scrollLeft)-l}),u=c.createSVGRect();u.x=t-d.x,u.y=e-d.y,u.width=u.height=1;var p=c.getIntersectionList(u,null);p.length&&(h=p[p.length-1])}if(!h)return null;for(;h.parentNode&&h!=c.parentNode&&!h.raphael;)h=h.parentNode;return h==this.canvas.parentNode&&(h=c),h&&h.raphael?this.getById(h.raphaelid):null},n.getElementsByBBox=function(t){var r=this.set();return this.forEach((function(n){e.isBBoxIntersect(n.getBBox(),t)&&r.push(n)})),r},n.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},n.forEach=function(t,e){for(var r=this.bottom;r;){if(!1===t.call(e,r))return this;r=r.next}return this},n.getElementsByPoint=function(t,e){var r=this.set();return this.forEach((function(n){n.isPointInside(t,e)&&r.push(n)})),r},zt.isPointInside=function(t,r){var n=this.realPath=Z[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(n=e.transformPath(n,this.attr("transform"))),e.isPointInsidePath(n,t,r)},zt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=Z[this.type](this),e.bboxwt=xt(this.realPath),e.bboxwt.toString=Xt,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=Z[this.type](this)),e.bbox=xt(K(this.realPath,this.matrix)),e.bbox.toString=Xt,e.dirty=e.dirtyT=0),e.bbox)},zt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},zt.glow=function(t){if("text"==this.type)return null;var e={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:null==t.opacity?.5:t.opacity,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},r=e.width/2,n=this.paper,i=n.set(),o=this.realPath||Z[this.type](this);o=this.matrix?K(o,this.matrix):o;for(var a=1;a<r+1;a++)i.push(n.path(o).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/r*a).toFixed(3),opacity:+(e.opacity/r).toFixed(3)}));return i.insertBefore(this).translate(e.offsetx,e.offsety)};var Jt=function(t,r,n,i,o,a,s,l,c){return null==c?pt(t,r,n,i,o,a,s,l):e.findDotsAtSegment(t,r,n,i,o,a,s,l,function(t,e,r,n,i,o,a,s,l){if(!(l<0||pt(t,e,r,n,i,o,a,s)<l)){var c,m=.5,h=1-m;for(c=pt(t,e,r,n,i,o,a,s,h);L(c-l)>.01;)c=pt(t,e,r,n,i,o,a,s,h+=(c<l?1:-1)*(m/=2));return h}}(t,r,n,i,o,a,s,l,c))},Wt=function(t,r){return function(n,i,o){for(var a,s,l,c,m,h="",d={},u=0,p=0,f=(n=Mt(n)).length;p<f;p++){if("M"==(l=n[p])[0])a=+l[1],s=+l[2];else{if(u+(c=Jt(a,s,l[1],l[2],l[3],l[4],l[5],l[6]))>i){if(r&&!d.start){if(h+=["C"+(m=Jt(a,s,l[1],l[2],l[3],l[4],l[5],l[6],i-u)).start.x,m.start.y,m.m.x,m.m.y,m.x,m.y],o)return h;d.start=h,h=["M"+m.x,m.y+"C"+m.n.x,m.n.y,m.end.x,m.end.y,l[5],l[6]].join(),u+=c,a=+l[5],s=+l[6];continue}if(!t&&!r)return{x:(m=Jt(a,s,l[1],l[2],l[3],l[4],l[5],l[6],i-u)).x,y:m.y,alpha:m.alpha}}u+=c,a=+l[5],s=+l[6]}h+=l.shift()+l}return d.end=h,(m=t?u:r?d:e.findDotsAtSegment(a,s,l[0],l[1],l[2],l[3],l[4],l[5],1)).alpha&&(m={x:m.x,y:m.y,alpha:m.alpha}),m}},Gt=Wt(1),Yt=Wt(),Qt=Wt(0,1);e.getTotalLength=Gt,e.getPointAtLength=Yt,e.getSubpath=function(t,e,r){if(this.getTotalLength(t)-r<1e-6)return Qt(t,e).end;var n=Qt(t,r,1);return e?Qt(n,e).end:n},zt.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():Gt(t)},zt.getPointAtLength=function(t){var e=this.getPath();if(e)return Yt(e,t)},zt.getPath=function(){var t,r=e._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return r&&(t=r(this)),t},zt.getSubpath=function(t,r){var n=this.getPath();if(n)return e.getSubpath(n,t,r)};var Zt=e.easing_formulas={linear:function(t){return t},"<":function(t){return M(t,1.7)},">":function(t){return M(t,.48)},"<>":function(t){var e=.48-t/1.04,r=k.sqrt(.1734+e*e),n=r-e,i=-r-e,o=M(L(n),1/3)*(n<0?-1:1)+M(L(i),1/3)*(i<0?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:M(2,-10*t)*k.sin(2*T*(t-.075)/.3)+1},bounce:function(t){var e=7.5625,r=2.75;return t<1/r?e*t*t:t<2/r?e*(t-=1.5/r)*t+.75:t<2.5/r?e*(t-=2.25/r)*t+.9375:e*(t-=2.625/r)*t+.984375}};Zt.easeIn=Zt["ease-in"]=Zt["<"],Zt.easeOut=Zt["ease-out"]=Zt[">"],Zt.easeInOut=Zt["ease-in-out"]=Zt["<>"],Zt["back-in"]=Zt.backIn,Zt["back-out"]=Zt.backOut;var Kt=[],te=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},ee=function(){for(var r=+new Date,n=0;n<Kt.length;n++){var i=Kt[n];if(!i.el.removed&&!i.paused){var o,a,s=r-i.start,l=i.ms,m=i.easing,h=i.from,d=i.diff,u=i.to,f=(i.t,i.el),g={},x={};if(i.initstatus?(s=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*l,i.status=i.initstatus,delete i.initstatus,i.stop&&Kt.splice(n--,1)):i.status=(i.prev+(i.percent-i.prev)*(s/l))/i.anim.top,!(s<0))if(s<l){var v=m(s/l);for(var _ in h)if(h[c](_)){switch(F[_]){case C:o=+h[_]+v*l*d[_];break;case"colour":o="rgb("+[re(j(h[_].r+v*l*d[_].r)),re(j(h[_].g+v*l*d[_].g)),re(j(h[_].b+v*l*d[_].b))].join(",")+")";break;case"path":o=[];for(var b=0,w=h[_].length;b<w;b++){o[b]=[h[_][b][0]];for(var k=1,S=h[_][b].length;k<S;k++)o[b][k]=+h[_][b][k]+v*l*d[_][b][k];o[b]=o[b].join(y)}o=o.join(y);break;case"transform":if(d[_].real)for(o=[],b=0,w=h[_].length;b<w;b++)for(o[b]=[h[_][b][0]],k=1,S=h[_][b].length;k<S;k++)o[b][k]=h[_][b][k]+v*l*d[_][b][k];else{var q=function(t){return+h[_][t]+v*l*d[_][t]};o=[["m",q(0),q(1),q(2),q(3),q(4),q(5)]]}break;case"csv":if("clip-rect"==_)for(o=[],b=4;b--;)o[b]=+h[_][b]+v*l*d[_][b];break;default:var L=[][p](h[_]);for(o=[],b=f.paper.customAttributes[_].length;b--;)o[b]=+L[b]+v*l*d[_][b]}g[_]=o}f.attr(g),function(e,r,n){setTimeout((function(){t("raphael.anim.frame."+e,r,n)}))}(f.id,f,i.anim)}else{if(function(r,n,i){setTimeout((function(){t("raphael.anim.frame."+n.id,n,i),t("raphael.anim.finish."+n.id,n,i),e.is(r,"function")&&r.call(n)}))}(i.callback,f,i.anim),f.attr(u),Kt.splice(n--,1),i.repeat>1&&!i.next){for(a in u)u[c](a)&&(x[a]=i.totalOrigin[a]);i.el.attr(x),oe(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&oe(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}Kt.length&&te(ee)},re=function(t){return t>255?255:t<0?0:t};function ne(t,e,r,n,i,o){var a,s=3*e,l=3*(n-e)-s,c=1-s-l,m=3*r,h=3*(i-r)-m,d=1-m-h;function u(t){return((c*t+l)*t+s)*t}return a=function(t,e){var r,n,i,o,a,m;for(i=t,m=0;m<8;m++){if(o=u(i)-t,L(o)<e)return i;if(L(a=(3*c*i+2*l)*i+s)<1e-6)break;i-=o/a}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(o=u(i),L(o-t)<e)return i;t>o?r=i:n=i,i=(n-r)/2+r}return i}(t,1/(200*o)),((d*a+h)*a+m)*a}function ie(t,e){var r=[],n={};if(this.ms=e,this.times=1,t){for(var i in t)t[c](i)&&(n[R(i)]=t[i],r.push(R(i)));r.sort(W)}this.anim=n,this.top=r[r.length-1],this.percents=r}function oe(r,n,i,o,s,l){i=R(i);var m,h,d,u,f,g,y=r.ms,_={},b={},w={};if(o)for(S=0,q=Kt.length;S<q;S++){var k=Kt[S];if(k.el.id==n.id&&k.anim==r){k.percent!=i?(Kt.splice(S,1),d=1):h=k,n.attr(k.totalOrigin);break}}else o=+b;for(var S=0,q=r.percents.length;S<q;S++){if(r.percents[S]==i||r.percents[S]>o*r.top){i=r.percents[S],f=r.percents[S-1]||0,y=y/r.top*(i-f),u=r.percents[S+1],m=r.anim[i];break}o&&n.attr(r.anim[r.percents[S]])}if(m){if(h)h.initstatus=o,h.start=new Date-h.ms*o;else{for(var L in m)if(m[c](L)&&(F[c](L)||n.paper.customAttributes[c](L)))switch(_[L]=n.attr(L),null==_[L]&&(_[L]=N[L]),b[L]=m[L],F[L]){case C:w[L]=(b[L]-_[L])/y;break;case"colour":_[L]=e.getRGB(_[L]);var M=e.getRGB(b[L]);w[L]={r:(M.r-_[L].r)/y,g:(M.g-_[L].g)/y,b:(M.b-_[L].b)/y};break;case"path":var T=Mt(_[L],b[L]),A=T[1];for(_[L]=T[0],w[L]=[],S=0,q=_[L].length;S<q;S++){w[L][S]=[0];for(var B=1,E=_[L][S].length;B<E;B++)w[L][S][B]=(A[S][B]-_[L][S][B])/y}break;case"transform":var I=n._,j=Et(I[L],b[L]);if(j)for(_[L]=j.from,b[L]=j.to,w[L]=[],w[L].real=!0,S=0,q=_[L].length;S<q;S++)for(w[L][S]=[_[L][S][0]],B=1,E=_[L][S].length;B<E;B++)w[L][S][B]=(b[L][S][B]-_[L][S][B])/y;else{var P=n.matrix||new It,O={_:{transform:I.transform},getBBox:function(){return n.getBBox(1)}};_[L]=[P.a,P.b,P.c,P.d,P.e,P.f],At(O,b[L]),b[L]=O._.transform,w[L]=[(O.matrix.a-P.a)/y,(O.matrix.b-P.b)/y,(O.matrix.c-P.c)/y,(O.matrix.d-P.d)/y,(O.matrix.e-P.e)/y,(O.matrix.f-P.f)/y]}break;case"csv":var $=x(m[L])[v](a),H=x(_[L])[v](a);if("clip-rect"==L)for(_[L]=H,w[L]=[],S=H.length;S--;)w[L][S]=($[S]-_[L][S])/y;b[L]=$;break;default:for($=[][p](m[L]),H=[][p](_[L]),w[L]=[],S=n.paper.customAttributes[L].length;S--;)w[L][S]=(($[S]||0)-(H[S]||0))/y}var z=m.easing,U=e.easing_formulas[z];if(!U)if((U=x(z).match(D))&&5==U.length){var V=U;U=function(t){return ne(t,+V[1],+V[2],+V[3],+V[4],y)}}else U=G;if(k={anim:r,percent:i,timestamp:g=m.start||r.start||+new Date,start:g+(r.del||0),status:0,initstatus:o||0,stop:!1,ms:y,easing:U,from:_,diff:w,to:b,el:n,callback:m.callback,prev:f,next:u,repeat:l||r.times,origin:n.attr(),totalOrigin:s},Kt.push(k),o&&!h&&!d&&(k.stop=!0,k.start=new Date-y*o,1==Kt.length))return ee();d&&(k.start=new Date-k.ms*o),1==Kt.length&&te(ee)}t("raphael.anim.start."+n.id,n,r)}}function ae(t){for(var e=0;e<Kt.length;e++)Kt[e].el.paper==t&&Kt.splice(e--,1)}zt.animateWith=function(t,r,n,i,o,a){if(this.removed)return a&&a.call(this),this;var s=n instanceof ie?n:e.animation(n,i,o,a);oe(s,this,s.percents[0],null,this.attr());for(var l=0,c=Kt.length;l<c;l++)if(Kt[l].anim==r&&Kt[l].el==t){Kt[c-1].start=Kt[l].start;break}return this},zt.onAnimation=function(e){return e?t.on("raphael.anim.frame."+this.id,e):t.unbind("raphael.anim.frame."+this.id),this},ie.prototype.delay=function(t){var e=new ie(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},ie.prototype.repeat=function(t){var e=new ie(this.anim,this.ms);return e.del=this.del,e.times=k.floor(S(t,0))||1,e},e.animation=function(t,r,n,i){if(t instanceof ie)return t;!e.is(n,"function")&&n||(i=i||n||null,n=null),t=Object(t),r=+r||0;var o,a,s={};for(a in t)t[c](a)&&R(a)!=a&&R(a)+"%"!=a&&(o=!0,s[a]=t[a]);if(o)return n&&(s.easing=n),i&&(s.callback=i),new ie({100:s},r);if(i){var l=0;for(var m in t){var h=P(m);t[c](m)&&h>l&&(l=h)}!t[l+="%"].callback&&(t[l].callback=i)}return new ie(t,r)},zt.animate=function(t,r,n,i){if(this.removed)return i&&i.call(this),this;var o=t instanceof ie?t:e.animation(t,r,n,i);return oe(o,this,o.percents[0],null,this.attr()),this},zt.setTime=function(t,e){return t&&null!=e&&this.status(t,q(e,t.ms)/t.ms),this},zt.status=function(t,e){var r,n,i=[],o=0;if(null!=e)return oe(t,this,-1,q(e,1)),this;for(r=Kt.length;o<r;o++)if((n=Kt[o]).el.id==this.id&&(!t||n.anim==t)){if(t)return n.status;i.push({anim:n.anim,status:n.status})}return t?0:i},zt.pause=function(e){for(var r=0;r<Kt.length;r++)Kt[r].el.id!=this.id||e&&Kt[r].anim!=e||!1!==t("raphael.anim.pause."+this.id,this,Kt[r].anim)&&(Kt[r].paused=!0);return this},zt.resume=function(e){for(var r=0;r<Kt.length;r++)if(Kt[r].el.id==this.id&&(!e||Kt[r].anim==e)){var n=Kt[r];!1!==t("raphael.anim.resume."+this.id,this,n.anim)&&(delete n.paused,this.status(n.anim,n.status))}return this},zt.stop=function(e){for(var r=0;r<Kt.length;r++)Kt[r].el.id!=this.id||e&&Kt[r].anim!=e||!1!==t("raphael.anim.stop."+this.id,this,Kt[r].anim)&&Kt.splice(r--,1);return this},t.on("raphael.remove",ae),t.on("raphael.clear",ae),zt.toString=function(){return"Raphaël’s object"};var se,le,ce,me,he=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,r=t.length;e<r;e++)!t[e]||t[e].constructor!=zt.constructor&&t[e].constructor!=he||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},de=he.prototype;for(var ue in de.push=function(){for(var t,e,r=0,n=arguments.length;r<n;r++)!(t=arguments[r])||t.constructor!=zt.constructor&&t.constructor!=he||(this[e=this.items.length]=this.items[e]=t,this.length++);return this},de.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},de.forEach=function(t,e){for(var r=0,n=this.items.length;r<n;r++)if(!1===t.call(e,this.items[r],r))return this;return this},zt)zt[c](ue)&&(de[ue]=function(t){return function(){var e=arguments;return this.forEach((function(r){r[t][u](r,e)}))}}(ue));return de.attr=function(t,r){if(t&&e.is(t,A)&&e.is(t[0],"object"))for(var n=0,i=t.length;n<i;n++)this.items[n].attr(t[n]);else for(var o=0,a=this.items.length;o<a;o++)this.items[o].attr(t,r);return this},de.clear=function(){for(;this.length;)this.pop()},de.splice=function(t,e,r){t=t<0?S(this.length+t,0):t,e=S(0,q(this.length-t,e));var n,i=[],o=[],a=[];for(n=2;n<arguments.length;n++)a.push(arguments[n]);for(n=0;n<e;n++)o.push(this[t+n]);for(;n<this.length-t;n++)i.push(this[t+n]);var s=a.length;for(n=0;n<s+i.length;n++)this.items[t+n]=this[t+n]=n<s?a[n]:i[n-s];for(n=this.items.length=this.length-=e-s;this[n];)delete this[n++];return new he(o)},de.exclude=function(t){for(var e=0,r=this.length;e<r;e++)if(this[e]==t)return this.splice(e,1),!0},de.animate=function(t,r,n,i){(e.is(n,"function")||!n)&&(i=n||null);var o,a,s=this.items.length,l=s,c=this;if(!s)return this;i&&(a=function(){! --s&&i.call(c)}),n=e.is(n,"string")?n:a;var m=e.animation(t,r,n,a);for(o=this.items[--l].animate(m);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,m,m),this.items[l]&&!this.items[l].removed||s--;return this},de.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},de.getBBox=function(){for(var t=[],e=[],r=[],n=[],i=this.items.length;i--;)if(!this.items[i].removed){var o=this.items[i].getBBox();t.push(o.x),e.push(o.y),r.push(o.x+o.width),n.push(o.y+o.height)}return{x:t=q[u](0,t),y:e=q[u](0,e),x2:r=S[u](0,r),y2:n=S[u](0,n),width:r-t,height:n-e}},de.clone=function(t){t=this.paper.set();for(var e=0,r=this.items.length;e<r;e++)t.push(this.items[e].clone());return t},de.toString=function(){return"Raphaël‘s set"},de.glow=function(t){var e=this.paper.set();return this.forEach((function(r,n){var i=r.glow(t);null!=i&&i.forEach((function(t,r){e.push(t)}))})),e},de.isPointInside=function(t,e){var r=!1;return this.forEach((function(n){if(n.isPointInside(t,e))return r=!0,!1})),r},e.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},r=t.face["font-family"];for(var n in t.face)t.face[c](n)&&(e.face[n]=t.face[n]);if(this.fonts[r]?this.fonts[r].push(e):this.fonts[r]=[e],!t.svg)for(var i in e.face["units-per-em"]=P(t.face["units-per-em"],10),t.glyphs)if(t.glyphs[c](i)){var o=t.glyphs[i];if(e.glyphs[i]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,(function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"}))+"z"},o.k)for(var a in o.k)o[c](a)&&(e.glyphs[i].k[a]=o.k[a])}return t},n.getFont=function(t,r,n,i){if(i=i||"normal",n=n||"normal",r=+r||{normal:400,bold:700,lighter:300,bolder:800}[r]||400,e.fonts){var o,a=e.fonts[t];if(!a){var s=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,g)+"(\\s|$)","i");for(var l in e.fonts)if(e.fonts[c](l)&&s.test(l)){a=e.fonts[l];break}}if(a)for(var m=0,h=a.length;m<h&&((o=a[m]).face["font-weight"]!=r||o.face["font-style"]!=n&&o.face["font-style"]||o.face["font-stretch"]!=i);m++);return o}},n.print=function(t,r,n,i,o,s,l,c){s=s||"middle",l=S(q(l||0,1),-1),c=S(q(c||1,3),1);var m,h=x(n)[v](g),d=0,u=0,p=g;if(e.is(i,"string")&&(i=this.getFont(i)),i){m=(o||16)/i.face["units-per-em"];for(var f=i.face.bbox[v](a),y=+f[0],_=f[3]-f[1],b=0,w=+f[1]+("baseline"==s?_+ +i.face.descent:_/2),k=0,L=h.length;k<L;k++){if("\n"==h[k])d=0,T=0,u=0,b+=_*c;else{var M=u&&i.glyphs[h[k-1]]||{},T=i.glyphs[h[k]];d+=u?(M.w||i.w)+(M.k&&M.k[h[k]]||0)+i.w*l:0,u=1}T&&T.d&&(p+=e.transformPath(T.d,["t",d*m,b*m,"s",m,m,y,w,"t",(t-y)/m,(r-w)/m]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},n.add=function(t){if(e.is(t,"array"))for(var r,n=this.set(),i=0,o=t.length;i<o;i++)r=t[i]||{},s[c](r.type)&&n.push(this[r.type]().attr(r));return n},e.format=function(t,r){var n=e.is(r,A)?[0][p](r):arguments;return t&&e.is(t,"string")&&n.length-1&&(t=t.replace(l,(function(t,e){return null==n[++e]?g:n[e]}))),t||g},e.fullfill=(se=/\{([^\}]+)\}/g,le=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(t,e){return String(t).replace(se,(function(t,r){return n=t,o=i=e,r.replace(le,(function(t,e,r,n,i){e=e||n,o&&(e in o&&(o=o[e]),"function"==typeof o&&i&&(o=o()))})),o=(null==o||o==i?n:o)+"";var n,i,o}))}),e.ninja=function(){if(h.was)m.win.Raphael=h.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(t){}}return e},e.st=de,t.on("raphael.DOMload",(function(){r=!0})),null==(ce=document).readyState&&ce.addEventListener&&(ce.addEventListener("DOMContentLoaded",me=function(){ce.removeEventListener("DOMContentLoaded",me,!1),ce.readyState="complete"},!1),ce.readyState="loading"),function t(){/in/.test(ce.readyState)?setTimeout(t,9):e.eve("raphael.DOMload")}(),e}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(0),r(3),r(4)],void 0===(i=function(t){return t}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i,o,a,s,l,c,m,h,d,u,p,f,g;a="hasOwnProperty",s=/[\.\/]/,l=/\s*,\s*/,c=function(t,e){return t-e},m={n:{}},h=function(){for(var t=0,e=this.length;t<e;t++)if(void 0!==this[t])return this[t]},d=function(){for(var t=this.length;--t;)if(void 0!==this[t])return this[t]},u=Object.prototype.toString,p=String,f=Array.isArray||function(t){return t instanceof Array||"[object Array]"==u.call(t)},(g=function(t,e){var r,n=o,a=Array.prototype.slice.call(arguments,2),s=g.listeners(t),l=0,m=[],u={},p=[],f=i;p.firstDefined=h,p.lastDefined=d,i=t,o=0;for(var y=0,x=s.length;y<x;y++)"zIndex"in s[y]&&(m.push(s[y].zIndex),s[y].zIndex<0&&(u[s[y].zIndex]=s[y]));for(m.sort(c);m[l]<0;)if(r=u[m[l++]],p.push(r.apply(e,a)),o)return o=n,p;for(y=0;y<x;y++)if("zIndex"in(r=s[y]))if(r.zIndex==m[l]){if(p.push(r.apply(e,a)),o)break;do{if((r=u[m[++l]])&&p.push(r.apply(e,a)),o)break}while(r)}else u[r.zIndex]=r;else if(p.push(r.apply(e,a)),o)break;return o=n,i=f,p})._events=m,g.listeners=function(t){var e,r,n,i,o,a,l,c,h=f(t)?t:t.split(s),d=m,u=[d],p=[];for(i=0,o=h.length;i<o;i++){for(c=[],a=0,l=u.length;a<l;a++)for(r=[(d=u[a].n)[h[i]],d["*"]],n=2;n--;)(e=r[n])&&(c.push(e),p=p.concat(e.f||[]));u=c}return p},g.separator=function(t){t?(t="["+(t=p(t).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",s=new RegExp(t)):s=/[\.\/]/},g.on=function(t,e){if("function"!=typeof e)return function(){};for(var r=f(t)?f(t[0])?t:[t]:p(t).split(l),n=0,i=r.length;n<i;n++)!function(t){for(var r,n=f(t)?t:p(t).split(s),i=m,o=0,a=n.length;o<a;o++)i=(i=i.n).hasOwnProperty(n[o])&&i[n[o]]||(i[n[o]]={n:{}});for(i.f=i.f||[],o=0,a=i.f.length;o<a;o++)if(i.f[o]==e){r=!0;break}!r&&i.f.push(e)}(r[n]);return function(t){+t==+t&&(e.zIndex=+t)}},g.f=function(t){var e=[].slice.call(arguments,1);return function(){g.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},g.stop=function(){o=1},g.nt=function(t){var e=f(i)?i.join("."):i;return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},g.nts=function(){return f(i)?i:i.split(s)},g.off=g.unbind=function(t,e){if(t){var r=f(t)?f(t[0])?t:[t]:p(t).split(l);if(r.length>1)for(var n=0,i=r.length;n<i;n++)g.off(r[n],e);else{r=f(t)?t:p(t).split(s);var o,c,h,d,u,y=[m];for(n=0,i=r.length;n<i;n++)for(d=0;d<y.length;d+=h.length-2){if(h=[d,1],o=y[d].n,"*"!=r[n])o[r[n]]&&h.push(o[r[n]]);else for(c in o)o[a](c)&&h.push(o[c]);y.splice.apply(y,h)}for(n=0,i=y.length;n<i;n++)for(o=y[n];o.n;){if(e){if(o.f){for(d=0,u=o.f.length;d<u;d++)if(o.f[d]==e){o.f.splice(d,1);break}!o.f.length&&delete o.f}for(c in o.n)if(o.n[a](c)&&o.n[c].f){var x=o.n[c].f;for(d=0,u=x.length;d<u;d++)if(x[d]==e){x.splice(d,1);break}!x.length&&delete o.n[c].f}}else for(c in delete o.f,o.n)o.n[a](c)&&o.n[c].f&&delete o.n[c].f;o=o.n}}}else g._events=m={n:{}}},g.once=function(t,e){var r=function(){return g.off(t,r),e.apply(this,arguments)};return g.on(t,r)},g.version="0.5.0",g.toString=function(){return"You are running Eve 0.5.0"},t.exports?t.exports=g:void 0===(n=function(){return g}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n,i;n=[r(0)],void 0===(i=function(t){if(!t||t.svg){var e="hasOwnProperty",r=String,n=parseFloat,i=parseInt,o=Math,a=o.max,s=o.abs,l=o.pow,c=/[, ]+/,m=t.eve,h="",d=" ",u="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},f={};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var g=function(n,i){if(i)for(var o in"string"==typeof n&&(n=g(n)),i)i[e](o)&&("xlink:"==o.substring(0,6)?n.setAttributeNS(u,o.substring(6),r(i[o])):n.setAttribute(o,r(i[o])));else(n=t._g.doc.createElementNS("http://www.w3.org/2000/svg",n)).style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},y=function(e,i){var c="linear",m=e.id+i,d=.5,u=.5,p=e.node,f=e.paper,y=p.style,v=t._g.doc.getElementById(m);if(!v){if(i=(i=r(i).replace(t._radial_gradient,(function(t,e,r){if(c="radial",e&&r){d=n(e);var i=2*((u=n(r))>.5)-1;l(d-.5,2)+l(u-.5,2)>.25&&(u=o.sqrt(.25-l(d-.5,2))*i+.5)&&.5!=u&&(u=u.toFixed(5)-1e-5*i)}return h}))).split(/\s*\-\s*/),"linear"==c){var _=i.shift();if(_=-n(_),isNaN(_))return null;var b=[0,0,o.cos(t.rad(_)),o.sin(t.rad(_))],w=1/(a(s(b[2]),s(b[3]))||1);b[2]*=w,b[3]*=w,b[2]<0&&(b[0]=-b[2],b[2]=0),b[3]<0&&(b[1]=-b[3],b[3]=0)}var k=t._parseDots(i);if(!k)return null;if(m=m.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&m!=e.gradient.id&&(f.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){v=g(c+"Gradient",{id:m}),e.gradient=v,g(v,"radial"==c?{fx:d,fy:u}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:e.matrix.invert()}),f.defs.appendChild(v);for(var S=0,q=k.length;S<q;S++)v.appendChild(g("stop",{offset:k[S].offset?k[S].offset:S?"100%":"0%","stop-color":k[S].color||"#fff","stop-opacity":isFinite(k[S].opacity)?k[S].opacity:1}))}}return g(p,{fill:x(m),opacity:1,"fill-opacity":1}),y.fill=h,y.opacity=1,y.fillOpacity=1,1},x=function(t){if((e=document.documentMode)&&(9===e||10===e))return"url('#"+t+"')";var e,r=document.location;return"url('"+r.protocol+"//"+r.host+r.pathname+r.search+"#"+t+"')"},v=function(t){var e=t.getBBox(1);g(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},_=function(n,i,o){if("path"==n.type){for(var a,s,l,c,m,d=r(i).toLowerCase().split("-"),u=n.paper,y=o?"end":"start",x=n.node,v=n.attrs,_=v["stroke-width"],b=d.length,w="classic",k=3,S=3,q=5;b--;)switch(d[b]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=d[b];break;case"wide":S=5;break;case"narrow":S=2;break;case"long":k=5;break;case"short":k=2}if("open"==w?(k+=2,S+=2,q+=2,l=1,c=o?4:1,m={fill:"none",stroke:v.stroke}):(c=l=k/2,m={fill:v.stroke,stroke:"none"}),n._.arrows?o?(n._.arrows.endPath&&f[n._.arrows.endPath]--,n._.arrows.endMarker&&f[n._.arrows.endMarker]--):(n._.arrows.startPath&&f[n._.arrows.startPath]--,n._.arrows.startMarker&&f[n._.arrows.startMarker]--):n._.arrows={},"none"!=w){var L="raphael-marker-"+w,M="raphael-marker-"+y+w+k+S+"-obj"+n.id;t._g.doc.getElementById(L)?f[L]++:(u.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:p[w],id:L})),f[L]=1);var T,C=t._g.doc.getElementById(M);C?(f[M]++,T=C.getElementsByTagName("use")[0]):(C=g(g("marker"),{id:M,markerHeight:S,markerWidth:k,orient:"auto",refX:c,refY:S/2}),T=g(g("use"),{"xlink:href":"#"+L,transform:(o?"rotate(180 "+k/2+" "+S/2+") ":h)+"scale("+k/q+","+S/q+")","stroke-width":(1/((k/q+S/q)/2)).toFixed(4)}),C.appendChild(T),u.defs.appendChild(C),f[M]=1),g(T,m);var A=l*("diamond"!=w&&"oval"!=w);o?(a=n._.arrows.startdx*_||0,s=t.getTotalLength(v.path)-A*_):(a=A*_,s=t.getTotalLength(v.path)-(n._.arrows.enddx*_||0)),(m={})["marker-"+y]="url(#"+M+")",(s||a)&&(m.d=t.getSubpath(v.path,a,s)),g(x,m),n._.arrows[y+"Path"]=L,n._.arrows[y+"Marker"]=M,n._.arrows[y+"dx"]=A,n._.arrows[y+"Type"]=w,n._.arrows[y+"String"]=i}else o?(a=n._.arrows.startdx*_||0,s=t.getTotalLength(v.path)-a):(a=0,s=t.getTotalLength(v.path)-(n._.arrows.enddx*_||0)),n._.arrows[y+"Path"]&&g(x,{d:t.getSubpath(v.path,a,s)}),delete n._.arrows[y+"Path"],delete n._.arrows[y+"Marker"],delete n._.arrows[y+"dx"],delete n._.arrows[y+"Type"],delete n._.arrows[y+"String"];for(m in f)if(f[e](m)&&!f[m]){var B=t._g.doc.getElementById(m);B&&B.parentNode.removeChild(B)}}},b={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(t,e,n){if(e=b[r(e).toLowerCase()]){for(var i=t.attrs["stroke-width"]||"1",o={round:i,square:i,butt:0}[t.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,a=[],s=e.length;s--;)a[s]=e[s]*i+(s%2?1:-1)*o;g(t.node,{"stroke-dasharray":a.join(",")})}else g(t.node,{"stroke-dasharray":"none"})},k=function(n,o){var l=n.node,m=n.attrs,d=l.style.visibility;for(var p in l.style.visibility="hidden",o)if(o[e](p)){if(!t._availableAttrs[e](p))continue;var f=o[p];switch(m[p]=f,p){case"blur":n.blur(f);break;case"title":var x=l.getElementsByTagName("title");if(x.length&&(x=x[0]))x.firstChild.nodeValue=f;else{x=g("title");var b=t._g.doc.createTextNode(f);x.appendChild(b),l.appendChild(x)}break;case"href":case"target":var k=l.parentNode;if("a"!=k.tagName.toLowerCase()){var q=g("a");k.insertBefore(q,l),q.appendChild(l),k=q}"target"==p?k.setAttributeNS(u,"show","blank"==f?"new":f):k.setAttributeNS(u,p,f);break;case"cursor":l.style.cursor=f;break;case"transform":n.transform(f);break;case"arrow-start":_(n,f);break;case"arrow-end":_(n,f,1);break;case"clip-rect":var L=r(f).split(c);if(4==L.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var M=g("clipPath"),T=g("rect");M.id=t.createUUID(),g(T,{x:L[0],y:L[1],width:L[2],height:L[3]}),M.appendChild(T),n.paper.defs.appendChild(M),g(l,{"clip-path":"url(#"+M.id+")"}),n.clip=T}if(!f){var C=l.getAttribute("clip-path");if(C){var A=t._g.doc.getElementById(C.replace(/(^url\(#|\)$)/g,h));A&&A.parentNode.removeChild(A),g(l,{"clip-path":h}),delete n.clip}}break;case"path":"path"==n.type&&(g(l,{d:f?m.path=t._pathToAbsolute(f):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&_(n,n._.arrows.startString),"endString"in n._.arrows&&_(n,n._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,f),n._.dirty=1,!m.fx)break;p="x",f=m.x;case"x":m.fx&&(f=-m.x-(m.width||0));case"rx":if("rx"==p&&"rect"==n.type)break;case"cx":l.setAttribute(p,f),n.pattern&&v(n),n._.dirty=1;break;case"height":if(l.setAttribute(p,f),n._.dirty=1,!m.fy)break;p="y",f=m.y;case"y":m.fy&&(f=-m.y-(m.height||0));case"ry":if("ry"==p&&"rect"==n.type)break;case"cy":l.setAttribute(p,f),n.pattern&&v(n),n._.dirty=1;break;case"r":"rect"==n.type?g(l,{rx:f,ry:f}):l.setAttribute(p,f),n._.dirty=1;break;case"src":"image"==n.type&&l.setAttributeNS(u,"href",f);break;case"stroke-width":1==n._.sx&&1==n._.sy||(f/=a(s(n._.sx),s(n._.sy))||1),l.setAttribute(p,f),m["stroke-dasharray"]&&w(n,m["stroke-dasharray"],o),n._.arrows&&("startString"in n._.arrows&&_(n,n._.arrows.startString),"endString"in n._.arrows&&_(n,n._.arrows.endString,1));break;case"stroke-dasharray":w(n,f,o);break;case"fill":var B=r(f).match(t._ISURL);if(B){M=g("pattern");var E=g("image");M.id=t.createUUID(),g(M,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g(E,{x:0,y:0,"xlink:href":B[1]}),M.appendChild(E),function(e){t._preload(B[1],(function(){var t=this.offsetWidth,r=this.offsetHeight;g(e,{width:t,height:r}),g(E,{width:t,height:r})}))}(M),n.paper.defs.appendChild(M),g(l,{fill:"url(#"+M.id+")"}),n.pattern=M,n.pattern&&v(n);break}var I=t.getRGB(f);if(I.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=r(f).charAt())&&y(n,f)){if("opacity"in m||"fill-opacity"in m){var D=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h));if(D){var j=D.getElementsByTagName("stop");g(j[j.length-1],{"stop-opacity":("opacity"in m?m.opacity:1)*("fill-opacity"in m?m["fill-opacity"]:1)})}}m.gradient=f,m.fill="none";break}}else delete o.gradient,delete m.gradient,!t.is(m.opacity,"undefined")&&t.is(o.opacity,"undefined")&&g(l,{opacity:m.opacity}),!t.is(m["fill-opacity"],"undefined")&&t.is(o["fill-opacity"],"undefined")&&g(l,{"fill-opacity":m["fill-opacity"]});I[e]("opacity")&&g(l,{"fill-opacity":I.opacity>1?I.opacity/100:I.opacity});case"stroke":I=t.getRGB(f),l.setAttribute(p,I.hex),"stroke"==p&&I[e]("opacity")&&g(l,{"stroke-opacity":I.opacity>1?I.opacity/100:I.opacity}),"stroke"==p&&n._.arrows&&("startString"in n._.arrows&&_(n,n._.arrows.startString),"endString"in n._.arrows&&_(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=r(f).charAt())&&y(n,f);break;case"opacity":m.gradient&&!m[e]("stroke-opacity")&&g(l,{"stroke-opacity":f>1?f/100:f});case"fill-opacity":if(m.gradient){(D=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h)))&&(j=D.getElementsByTagName("stop"),g(j[j.length-1],{"stop-opacity":f}));break}default:"font-size"==p&&(f=i(f,10)+"px");var R=p.replace(/(\-.)/g,(function(t){return t.substring(1).toUpperCase()}));l.style[R]=f,n._.dirty=1,l.setAttribute(p,f)}}S(n,o),l.style.visibility=d},S=function(n,o){if("text"==n.type&&(o[e]("text")||o[e]("font")||o[e]("font-size")||o[e]("x")||o[e]("y"))){var a=n.attrs,s=n.node,l=s.firstChild?i(t._g.doc.defaultView.getComputedStyle(s.firstChild,h).getPropertyValue("font-size"),10):10;if(o[e]("text")){for(a.text=o.text;s.firstChild;)s.removeChild(s.firstChild);for(var c,m=r(o.text).split("\n"),d=[],u=0,p=m.length;u<p;u++)c=g("tspan"),u&&g(c,{dy:1.2*l,x:a.x}),c.appendChild(t._g.doc.createTextNode(m[u])),s.appendChild(c),d[u]=c}else for(u=0,p=(d=s.getElementsByTagName("tspan")).length;u<p;u++)u?g(d[u],{dy:1.2*l,x:a.x}):g(d[0],{dy:0});g(s,{x:a.x,y:a.y}),n._.dirty=1;var f=n._getBBox(),y=a.y-(f.y+f.height/2);y&&t.is(y,"finite")&&g(d[0],{dy:y})}},q=function(t){return t.parentNode&&"a"===t.parentNode.tagName.toLowerCase()?t.parentNode:t},L=function(e,r){this[0]=this.node=e,e.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)|0).toString(36)).slice(-5),e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=r,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},M=t.el;L.prototype=M,M.constructor=L,t._engine.path=function(t,e){var r=g("path");e.canvas&&e.canvas.appendChild(r);var n=new L(r,e);return n.type="path",k(n,{fill:"none",stroke:"#000",path:t}),n},M.rotate=function(t,e,i){if(this.removed)return this;if((t=r(t).split(c)).length-1&&(e=n(t[1]),i=n(t[2])),t=n(t[0]),null==i&&(e=i),null==e||null==i){var o=this.getBBox(1);e=o.x+o.width/2,i=o.y+o.height/2}return this.transform(this._.transform.concat([["r",t,e,i]])),this},M.scale=function(t,e,i,o){if(this.removed)return this;if((t=r(t).split(c)).length-1&&(e=n(t[1]),i=n(t[2]),o=n(t[3])),t=n(t[0]),null==e&&(e=t),null==o&&(i=o),null==i||null==o)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",t,e,i,o]])),this},M.translate=function(t,e){return this.removed||((t=r(t).split(c)).length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]]))),this},M.transform=function(r){var n=this._;if(null==r)return n.transform;if(t._extractTransform(this,r),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&v(this),this.node&&g(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var i=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},M.hide=function(){return this.removed||(this.node.style.display="none"),this},M.show=function(){return this.removed||(this.node.style.display=""),this},M.remove=function(){var e=q(this.node);if(!this.removed&&e.parentNode){var r=this.paper;for(var n in r.__set__&&r.__set__.exclude(this),m.unbind("raphael.*.*."+this.id),this.gradient&&r.defs.removeChild(this.gradient),t._tear(this,r),e.parentNode.removeChild(e),this.removeData(),this)this[n]="function"==typeof this[n]?t._removedFactory(n):null;this.removed=!0}},M._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e,r=!1;this.paper.canvas.parentElement?e=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(e=this.paper.canvas.parentNode.style),e&&"none"==e.display&&(r=!0,e.display="");var n={};try{n=this.node.getBBox()}catch(i){n={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{n=n||{},r&&(e.display="none")}return t&&this.hide(),n},M.attr=function(r,n){if(this.removed)return this;if(null==r){var i={};for(var o in this.attrs)this.attrs[e](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==n&&t.is(r,"string")){if("fill"==r&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==r)return this._.transform;for(var a=r.split(c),s={},l=0,h=a.length;l<h;l++)(r=a[l])in this.attrs?s[r]=this.attrs[r]:t.is(this.paper.customAttributes[r],"function")?s[r]=this.paper.customAttributes[r].def:s[r]=t._availableAttrs[r];return h-1?s:s[a[0]]}if(null==n&&t.is(r,"array")){for(s={},l=0,h=r.length;l<h;l++)s[r[l]]=this.attr(r[l]);return s}if(null!=n){var d={};d[r]=n}else null!=r&&t.is(r,"object")&&(d=r);for(var u in d)m("raphael.attr."+u+"."+this.id,this,d[u]);for(u in this.paper.customAttributes)if(this.paper.customAttributes[e](u)&&d[e](u)&&t.is(this.paper.customAttributes[u],"function")){var p=this.paper.customAttributes[u].apply(this,[].concat(d[u]));for(var f in this.attrs[u]=d[u],p)p[e](f)&&(d[f]=p[f])}return k(this,d),this},M.toFront=function(){if(this.removed)return this;var e=q(this.node);e.parentNode.appendChild(e);var r=this.paper;return r.top!=this&&t._tofront(this,r),this},M.toBack=function(){if(this.removed)return this;var e=q(this.node),r=e.parentNode;return r.insertBefore(e,r.firstChild),t._toback(this,this.paper),this.paper,this},M.insertAfter=function(e){if(this.removed||!e)return this;var r=q(this.node),n=q(e.node||e[e.length-1].node);return n.nextSibling?n.parentNode.insertBefore(r,n.nextSibling):n.parentNode.appendChild(r),t._insertafter(this,e,this.paper),this},M.insertBefore=function(e){if(this.removed||!e)return this;var r=q(this.node),n=q(e.node||e[0].node);return n.parentNode.insertBefore(r,n),t._insertbefore(this,e,this.paper),this},M.blur=function(e){var r=this;if(0!=+e){var n=g("filter"),i=g("feGaussianBlur");r.attrs.blur=e,n.id=t.createUUID(),g(i,{stdDeviation:+e||1.5}),n.appendChild(i),r.paper.defs.appendChild(n),r._blur=n,g(r.node,{filter:"url(#"+n.id+")"})}else r._blur&&(r._blur.parentNode.removeChild(r._blur),delete r._blur,delete r.attrs.blur),r.node.removeAttribute("filter");return r},t._engine.circle=function(t,e,r,n){var i=g("circle");t.canvas&&t.canvas.appendChild(i);var o=new L(i,t);return o.attrs={cx:e,cy:r,r:n,fill:"none",stroke:"#000"},o.type="circle",g(i,o.attrs),o},t._engine.rect=function(t,e,r,n,i,o){var a=g("rect");t.canvas&&t.canvas.appendChild(a);var s=new L(a,t);return s.attrs={x:e,y:r,width:n,height:i,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},s.type="rect",g(a,s.attrs),s},t._engine.ellipse=function(t,e,r,n,i){var o=g("ellipse");t.canvas&&t.canvas.appendChild(o);var a=new L(o,t);return a.attrs={cx:e,cy:r,rx:n,ry:i,fill:"none",stroke:"#000"},a.type="ellipse",g(o,a.attrs),a},t._engine.image=function(t,e,r,n,i,o){var a=g("image");g(a,{x:r,y:n,width:i,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(u,"href",e),t.canvas&&t.canvas.appendChild(a);var s=new L(a,t);return s.attrs={x:r,y:n,width:i,height:o,src:e},s.type="image",s},t._engine.text=function(e,r,n,i){var o=g("text");e.canvas&&e.canvas.appendChild(o);var a=new L(o,e);return a.attrs={x:r,y:n,"text-anchor":"middle",text:i,"font-family":t._availableAttrs["font-family"],"font-size":t._availableAttrs["font-size"],stroke:"none",fill:"#000"},a.type="text",k(a,a.attrs),a},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),r=e&&e.container;if(!r)throw new Error("SVG container not found.");var n,i=e.x,o=e.y,a=e.width,s=e.height,l=g("svg"),c="overflow:hidden;";return i=i||0,o=o||0,g(l,{height:s=s||342,version:1.1,width:a=a||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==r?(l.style.cssText=c+"position:absolute;left:"+i+"px;top:"+o+"px",t._g.doc.body.appendChild(l),n=1):(l.style.cssText=c+"position:relative",r.firstChild?r.insertBefore(l,r.firstChild):r.appendChild(l)),(r=new t._Paper).width=a,r.height=s,r.canvas=l,r.clear(),r._left=r._top=0,n&&(r.renderfix=function(){}),r.renderfix(),r},t._engine.setViewBox=function(t,e,r,n,i){m("raphael.setViewBox",this,this._viewBox,[t,e,r,n,i]);var o,s,l=this.getSize(),c=a(r/l.width,n/l.height),h=this.top,u=i?"xMidYMid meet":"xMinYMin";for(null==t?(this._vbSize&&(c=1),delete this._vbSize,o="0 0 "+this.width+d+this.height):(this._vbSize=c,o=t+d+e+d+r+d+n),g(this.canvas,{viewBox:o,preserveAspectRatio:u});c&&h;)s="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":s}),h._.dirty=1,h._.dirtyT=1,h=h.prev;return this._viewBox=[t,e,r,n,!!i],this},t.prototype.renderfix=function(){var t,e=this.canvas,r=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(o){t=e.createSVGMatrix()}var n=-t.e%1,i=-t.f%1;(n||i)&&(n&&(this._left=(this._left+n)%1,r.left=this._left+"px"),i&&(this._top=(this._top+i)%1,r.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(t._g.doc.createTextNode("Created with Raphaël "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=g("defs"))},t.prototype.remove=function(){for(var e in m("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var T=t.st;for(var C in M)M[e](C)&&!T[e](C)&&(T[C]=function(t){return function(){var e=arguments;return this.forEach((function(r){r[t].apply(r,e)}))}}(C))}}.apply(e,n))||(t.exports=i)},function(t,e,r){var n,i;n=[r(0)],void 0===(i=function(t){if(!t||t.vml){var e="hasOwnProperty",r=String,n=parseFloat,i=Math,o=i.round,a=i.max,s=i.min,l=i.abs,c=/[, ]+/,m=t.eve,h=" ",d="",u={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},p=/([clmz]),?([^clmz]*)/gi,f=/ progid:\S+Blur\([^\)]+\)/g,g=/-?[^,\s-]+/g,y="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",x=21600,v={path:1,rect:1,image:1},_={circle:1,ellipse:1},b=function(e,r,n){var i=t.matrix();return i.rotate(-e,.5,.5),{dx:i.x(r,n),dy:i.y(r,n)}},w=function(t,e,r,n,i,o){var a=t._,s=t.matrix,c=a.fillpos,m=t.node,d=m.style,u=1,p="",f=x/e,g=x/r;if(d.visibility="hidden",e&&r){if(m.coordsize=l(f)+h+l(g),d.rotation=o*(e*r<0?-1:1),o){var y=b(o,n,i);n=y.dx,i=y.dy}if(e<0&&(p+="x"),r<0&&(p+=" y")&&(u=-1),d.flip=p,m.coordorigin=n*-f+h+i*-g,c||a.fillsize){var v=m.getElementsByTagName("fill");v=v&&v[0],m.removeChild(v),c&&(y=b(o,s.x(c[0],c[1]),s.y(c[0],c[1])),v.position=y.dx*u+h+y.dy*u),a.fillsize&&(v.size=a.fillsize[0]*l(e)+h+a.fillsize[1]*l(r)),m.appendChild(v)}d.visibility="visible"}};t.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var k,S=function(t,e,n){for(var i=r(e).toLowerCase().split("-"),o=n?"end":"start",a=i.length,s="classic",l="medium",c="medium";a--;)switch(i[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=i[a];break;case"wide":case"narrow":c=i[a];break;case"long":case"short":l=i[a]}var m=t.node.getElementsByTagName("stroke")[0];m[o+"arrow"]=s,m[o+"arrowlength"]=l,m[o+"arrowwidth"]=c},q=function(i,l){i.attrs=i.attrs||{};var m=i.node,f=i.attrs,y=m.style,b=v[i.type]&&(l.x!=f.x||l.y!=f.y||l.width!=f.width||l.height!=f.height||l.cx!=f.cx||l.cy!=f.cy||l.rx!=f.rx||l.ry!=f.ry||l.r!=f.r),q=_[i.type]&&(f.cx!=l.cx||f.cy!=l.cy||f.r!=l.r||f.rx!=l.rx||f.ry!=l.ry),M=i;for(var T in l)l[e](T)&&(f[T]=l[T]);if(b&&(f.path=t._getPath[i.type](i),i._.dirty=1),l.href&&(m.href=l.href),l.title&&(m.title=l.title),l.target&&(m.target=l.target),l.cursor&&(y.cursor=l.cursor),"blur"in l&&i.blur(l.blur),(l.path&&"path"==i.type||b)&&(m.path=function(e){var n=/[ahqstv]/gi,i=t._pathToAbsolute;if(r(e).match(n)&&(i=t._path2curve),n=/[clmz]/g,i==t._pathToAbsolute&&!r(e).match(n)){var a=r(e).replace(p,(function(t,e,r){var n=[],i="m"==e.toLowerCase(),a=u[e];return r.replace(g,(function(t){i&&2==n.length&&(a+=n+u["m"==e?"l":"L"],n=[]),n.push(o(t*x))})),a+n}));return a}var s,l,c=i(e);a=[];for(var m=0,f=c.length;m<f;m++){s=c[m],"z"==(l=c[m][0].toLowerCase())&&(l="x");for(var y=1,v=s.length;y<v;y++)l+=o(s[y]*x)+(y!=v-1?",":d);a.push(l)}return a.join(h)}(~r(f.path).toLowerCase().indexOf("r")?t._pathToAbsolute(f.path):f.path),i._.dirty=1,"image"==i.type&&(i._.fillpos=[f.x,f.y],i._.fillsize=[f.width,f.height],w(i,1,1,0,0,0))),"transform"in l&&i.transform(l.transform),q){var C=+f.cx,A=+f.cy,B=+f.rx||+f.r||0,E=+f.ry||+f.r||0;m.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((C-B)*x),o((A-E)*x),o((C+B)*x),o((A+E)*x),o(C*x)),i._.dirty=1}if("clip-rect"in l){var I=r(l["clip-rect"]).split(c);if(4==I.length){I[2]=+I[2]+ +I[0],I[3]=+I[3]+ +I[1];var D=m.clipRect||t._g.doc.createElement("div"),j=D.style;j.clip=t.format("rect({1}px {2}px {3}px {0}px)",I),m.clipRect||(j.position="absolute",j.top=0,j.left=0,j.width=i.paper.width+"px",j.height=i.paper.height+"px",m.parentNode.insertBefore(D,m),D.appendChild(m),m.clipRect=D)}l["clip-rect"]||m.clipRect&&(m.clipRect.style.clip="auto")}if(i.textpath){var R=i.textpath.style;l.font&&(R.font=l.font),l["font-family"]&&(R.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,d)+'"'),l["font-size"]&&(R.fontSize=l["font-size"]),l["font-weight"]&&(R.fontWeight=l["font-weight"]),l["font-style"]&&(R.fontStyle=l["font-style"])}if("arrow-start"in l&&S(M,l["arrow-start"]),"arrow-end"in l&&S(M,l["arrow-end"],1),null!=l.opacity||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var P=m.getElementsByTagName("fill");if(!(P=P&&P[0])&&(P=k("fill")),"image"==i.type&&l.src&&(P.src=l.src),l.fill&&(P.on=!0),null!=P.on&&"none"!=l.fill&&null!==l.fill||(P.on=!1),P.on&&l.fill){var O=r(l.fill).match(t._ISURL);if(O){P.parentNode==m&&m.removeChild(P),P.rotate=!0,P.src=O[1],P.type="tile";var N=i.getBBox(1);P.position=N.x+h+N.y,i._.fillpos=[N.x,N.y],t._preload(O[1],(function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]}))}else P.color=t.getRGB(l.fill).hex,P.src=d,P.type="solid",t.getRGB(l.fill).error&&(M.type in{circle:1,ellipse:1}||"r"!=r(l.fill).charAt())&&L(M,l.fill,P)&&(f.fill="none",f.gradient=l.fill,P.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var F=((+f["fill-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);F=s(a(F,0),1),P.opacity=F,P.src&&(P.color="none")}m.appendChild(P);var $=m.getElementsByTagName("stroke")&&m.getElementsByTagName("stroke")[0],H=!1;!$&&(H=$=k("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&($.on=!0),("none"==l.stroke||null===l.stroke||null==$.on||0==l.stroke||0==l["stroke-width"])&&($.on=!1);var z=t.getRGB(l.stroke);$.on&&l.stroke&&($.color=z.hex),F=((+f["stroke-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+z.o+1||2)-1);var U=.75*(n(l["stroke-width"])||1);if(F=s(a(F,0),1),null==l["stroke-width"]&&(U=f["stroke-width"]),l["stroke-width"]&&($.weight=U),U&&U<1&&(F*=U)&&($.weight=1),$.opacity=F,l["stroke-linejoin"]&&($.joinstyle=l["stroke-linejoin"]||"miter"),$.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&($.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),"stroke-dasharray"in l){var V={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};$.dashstyle=V[e](l["stroke-dasharray"])?V[l["stroke-dasharray"]]:d}H&&m.appendChild($)}if("text"==M.type){M.paper.canvas.style.display=d;var X=M.paper.span,J=f.font&&f.font.match(/\d+(?:\.\d*)?(?=px)/);y=X.style,f.font&&(y.font=f.font),f["font-family"]&&(y.fontFamily=f["font-family"]),f["font-weight"]&&(y.fontWeight=f["font-weight"]),f["font-style"]&&(y.fontStyle=f["font-style"]),J=n(f["font-size"]||J&&J[0])||10,y.fontSize=100*J+"px",M.textpath.string&&(X.innerHTML=r(M.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var W=X.getBoundingClientRect();M.W=f.w=(W.right-W.left)/100,M.H=f.h=(W.bottom-W.top)/100,M.X=f.x,M.Y=f.y+M.H/2,("x"in l||"y"in l)&&(M.path.v=t.format("m{0},{1}l{2},{1}",o(f.x*x),o(f.y*x),o(f.x*x)+1));for(var G=["x","y","text","font","font-family","font-weight","font-style","font-size"],Y=0,Q=G.length;Y<Q;Y++)if(G[Y]in l){M._.dirty=1;break}switch(f["text-anchor"]){case"start":M.textpath.style["v-text-align"]="left",M.bbx=M.W/2;break;case"end":M.textpath.style["v-text-align"]="right",M.bbx=-M.W/2;break;default:M.textpath.style["v-text-align"]="center",M.bbx=0}M.textpath.style["v-text-kern"]=!0}},L=function(e,o,a){e.attrs=e.attrs||{},e.attrs;var s=Math.pow,l="linear",c=".5 .5";if(e.attrs.gradient=o,o=(o=r(o).replace(t._radial_gradient,(function(t,e,r){return l="radial",e&&r&&(e=n(e),r=n(r),s(e-.5,2)+s(r-.5,2)>.25&&(r=i.sqrt(.25-s(e-.5,2))*(2*(r>.5)-1)+.5),c=e+h+r),d}))).split(/\s*\-\s*/),"linear"==l){var m=o.shift();if(m=-n(m),isNaN(m))return null}var u=t._parseDots(o);if(!u)return null;if(e=e.shape||e.node,u.length){e.removeChild(a),a.on=!0,a.method="none",a.color=u[0].color,a.color2=u[u.length-1].color;for(var p=[],f=0,g=u.length;f<g;f++)u[f].offset&&p.push(u[f].offset+h+u[f].color);a.colors=p.length?p.join():"0% "+a.color,"radial"==l?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=c,a.angle=0):(a.type="gradient",a.angle=(270-m)%360),e.appendChild(a)}return 1},M=function(e,r){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=r,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},T=t.el;M.prototype=T,T.constructor=M,T.transform=function(e){if(null==e)return this._.transform;var n,i=this.paper._viewBoxShift,o=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:d;i&&(n=e=r(e).replace(/\.{3}|\u2026/g,this._.transform||d)),t._extractTransform(this,o+e);var a,s=this.matrix.clone(),l=this.skew,c=this.node,m=~r(this.attrs.fill).indexOf("-"),u=!r(this.attrs.fill).indexOf("url(");if(s.translate(1,1),u||m||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",a=s.split(),m&&a.noRotation||!a.isSimple){c.style.filter=s.toFilter();var p=this.getBBox(),f=this.getBBox(1),g=p.x-f.x,y=p.y-f.y;c.coordorigin=g*-x+h+y*-x,w(this,1,1,g,y,0)}else c.style.filter=d,w(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else c.style.filter=d,l.matrix=r(s),l.offset=s.offset();return null!==n&&(this._.transform=n,t._extractTransform(this,n)),this},T.rotate=function(t,e,i){if(this.removed)return this;if(null!=t){if((t=r(t).split(c)).length-1&&(e=n(t[1]),i=n(t[2])),t=n(t[0]),null==i&&(e=i),null==e||null==i){var o=this.getBBox(1);e=o.x+o.width/2,i=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,i]])),this}},T.translate=function(t,e){return this.removed||((t=r(t).split(c)).length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]]))),this},T.scale=function(t,e,i,o){if(this.removed)return this;if((t=r(t).split(c)).length-1&&(e=n(t[1]),i=n(t[2]),o=n(t[3]),isNaN(i)&&(i=null),isNaN(o)&&(o=null)),t=n(t[0]),null==e&&(e=t),null==o&&(i=o),null==i||null==o)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",t,e,i,o]])),this._.dirtyT=1,this},T.hide=function(){return!this.removed&&(this.node.style.display="none"),this},T.show=function(){return!this.removed&&(this.node.style.display=d),this},T.auxGetBBox=t.el.getBBox,T.getBBox=function(){var t=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var e={},r=1/this.paper._viewBoxShift.scale;return e.x=t.x-this.paper._viewBoxShift.dx,e.x*=r,e.y=t.y-this.paper._viewBoxShift.dy,e.y*=r,e.width=t.width*r,e.height=t.height*r,e.x2=e.x+e.width,e.y2=e.y+e.height,e}return t},T._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},T.remove=function(){if(!this.removed&&this.node.parentNode){for(var e in this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},T.attr=function(r,n){if(this.removed)return this;if(null==r){var i={};for(var o in this.attrs)this.attrs[e](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==n&&t.is(r,"string")){if("fill"==r&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=r.split(c),s={},l=0,h=a.length;l<h;l++)(r=a[l])in this.attrs?s[r]=this.attrs[r]:t.is(this.paper.customAttributes[r],"function")?s[r]=this.paper.customAttributes[r].def:s[r]=t._availableAttrs[r];return h-1?s:s[a[0]]}if(this.attrs&&null==n&&t.is(r,"array")){for(s={},l=0,h=r.length;l<h;l++)s[r[l]]=this.attr(r[l]);return s}var d;for(var u in null!=n&&((d={})[r]=n),null==n&&t.is(r,"object")&&(d=r),d)m("raphael.attr."+u+"."+this.id,this,d[u]);if(d){for(u in this.paper.customAttributes)if(this.paper.customAttributes[e](u)&&d[e](u)&&t.is(this.paper.customAttributes[u],"function")){var p=this.paper.customAttributes[u].apply(this,[].concat(d[u]));for(var f in this.attrs[u]=d[u],p)p[e](f)&&(d[f]=p[f])}d.text&&"text"==this.type&&(this.textpath.string=d.text),q(this,d)}return this},T.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},T.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this},T.insertAfter=function(e){return this.removed||(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper)),this},T.insertBefore=function(e){return this.removed||(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper)),this},T.blur=function(e){var r=this.node.runtimeStyle,n=r.filter;return n=n.replace(f,d),0!=+e?(this.attrs.blur=e,r.filter=n+h+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+e||1.5)+")",r.margin=t.format("-{0}px 0 0 -{0}px",o(+e||1.5))):(r.filter=n,r.margin=0,delete this.attrs.blur),this},t._engine.path=function(t,e){var r=k("shape");r.style.cssText=y,r.coordsize=x+h+x,r.coordorigin=e.coordorigin;var n=new M(r,e),i={fill:"none",stroke:"#000"};t&&(i.path=t),n.type="path",n.path=[],n.Path=d,q(n,i),e.canvas&&e.canvas.appendChild(r);var o=k("skew");return o.on=!0,r.appendChild(o),n.skew=o,n.transform(d),n},t._engine.rect=function(e,r,n,i,o,a){var s=t._rectPath(r,n,i,o,a),l=e.path(s),c=l.attrs;return l.X=c.x=r,l.Y=c.y=n,l.W=c.width=i,l.H=c.height=o,c.r=a,c.path=s,l.type="rect",l},t._engine.ellipse=function(t,e,r,n,i){var o=t.path();return o.attrs,o.X=e-n,o.Y=r-i,o.W=2*n,o.H=2*i,o.type="ellipse",q(o,{cx:e,cy:r,rx:n,ry:i}),o},t._engine.circle=function(t,e,r,n){var i=t.path();return i.attrs,i.X=e-n,i.Y=r-n,i.W=i.H=2*n,i.type="circle",q(i,{cx:e,cy:r,r:n}),i},t._engine.image=function(e,r,n,i,o,a){var s=t._rectPath(n,i,o,a),l=e.path(s).attr({stroke:"none"}),c=l.attrs,m=l.node,h=m.getElementsByTagName("fill")[0];return c.src=r,l.X=c.x=n,l.Y=c.y=i,l.W=c.width=o,l.H=c.height=a,c.path=s,l.type="image",h.parentNode==m&&m.removeChild(h),h.rotate=!0,h.src=r,h.type="tile",l._.fillpos=[n,i],l._.fillsize=[o,a],m.appendChild(h),w(l,1,1,0,0,0),l},t._engine.text=function(e,n,i,a){var s=k("shape"),l=k("path"),c=k("textpath");n=n||0,i=i||0,a=a||"",l.v=t.format("m{0},{1}l{2},{1}",o(n*x),o(i*x),o(n*x)+1),l.textpathok=!0,c.string=r(a),c.on=!0,s.style.cssText=y,s.coordsize=x+h+x,s.coordorigin="0 0";var m=new M(s,e),u={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:a};m.shape=s,m.path=l,m.textpath=c,m.type="text",m.attrs.text=r(a),m.attrs.x=n,m.attrs.y=i,m.attrs.w=1,m.attrs.h=1,q(m,u),s.appendChild(c),s.appendChild(l),e.canvas.appendChild(s);var p=k("skew");return p.on=!0,s.appendChild(p),m.skew=p,m.transform(d),m},t._engine.setSize=function(e,r){var n=this.canvas.style;return this.width=e,this.height=r,e==+e&&(e+="px"),r==+r&&(r+="px"),n.width=e,n.height=r,n.clip="rect(0 "+e+" "+r+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,r,n,i,o){t.eve("raphael.setViewBox",this,this._viewBox,[e,r,n,i,o]);var a,s,l=this.getSize(),c=l.width,m=l.height;return o&&(n*(a=m/i)<c&&(e-=(c-n*a)/2/a),i*(s=c/n)<m&&(r-=(m-i*s)/2/s)),this._viewBox=[e,r,n,i,!!o],this._viewBoxShift={dx:-e,dy:-r,scale:l},this.forEach((function(t){t.transform("...")})),this},t._engine.initWin=function(t){var e=t.document;e.styleSheets.length<31?e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):e.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),k=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(r){k=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),r=e.container,n=e.height,i=e.width,o=e.x,a=e.y;if(!r)throw new Error("VML container not found.");var s=new t._Paper,l=s.canvas=t._g.doc.createElement("div"),c=l.style;return o=o||0,a=a||0,i=i||512,n=n||342,s.width=i,s.height=n,i==+i&&(i+="px"),n==+n&&(n+="px"),s.coordsize=216e5+h+216e5,s.coordorigin="0 0",s.span=t._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(s.span),c.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,n),1==r?(t._g.doc.body.appendChild(l),c.left=o+"px",c.top=a+"px",c.position="absolute"):r.firstChild?r.insertBefore(l,r.firstChild):r.appendChild(l),s.renderfix=function(){},s},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=d,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){for(var e in t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var C=t.st;for(var A in T)T[e](A)&&!C[e](A)&&(C[A]=function(t){return function(){var e=arguments;return this.forEach((function(r){r[t].apply(r,e)}))}}(A))}}.apply(e,n))||(t.exports=i)}])),raphael_min.exports}function requireFlowchart_helpers(){if(hasRequiredFlowchart_helpers)return flowchart_helpers;return hasRequiredFlowchart_helpers=1,flowchart_helpers={defaults:function t(e,r){if(!e||"function"==typeof e)return r;var n={};for(var i in r)n[i]=r[i];for(i in e)e[i]&&("object"==typeof n[i]?n[i]=t(n[i],e[i]):n[i]=e[i]);return n},inherits:function(t,e){if("function"==typeof Object.create)t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},flowchart_helpers}function requireFlowchart_defaults(){return hasRequiredFlowchart_defaults?flowchart_defaults:(hasRequiredFlowchart_defaults=1,flowchart_defaults={x:0,y:0,"line-width":3,"line-length":50,"text-margin":10,"font-size":14,"font-color":"black","line-color":"black","element-color":"black",fill:"white","yes-text":"yes","no-text":"no","arrow-end":"block",class:"flowchart",scale:1,symbols:{start:{},end:{},condition:{},inputoutput:{},input:{},output:{},operation:{},subroutine:{},parallel:{}}})}function requireFlowchart_functions(){if(hasRequiredFlowchart_functions)return flowchart_functions;return hasRequiredFlowchart_functions=1,flowchart_functions={drawPath:function(t,e,r){var n,i,o="M{0},{1}";for(n=2,i=2*r.length+2;n<i;n+=2)o+=" L{"+n+"},{"+(n+1)+"}";var a=[e.x,e.y];for(n=0,i=r.length;n<i;n++)a.push(r[n].x),a.push(r[n].y);var s=t.paper.path(o,a);s.attr("stroke",t.options["element-color"]),s.attr("stroke-width",t.options["line-width"]);var l=t.options.font,c=t.options["font-family"],m=t.options["font-weight"];return l&&s.attr({font:l}),c&&s.attr({"font-family":c}),m&&s.attr({"font-weight":m}),s},drawLine:function(t,e,r,n){var i,o;"[object Array]"!==Object.prototype.toString.call(r)&&(r=[r]);var a="M{0},{1}";for(i=2,o=2*r.length+2;i<o;i+=2)a+=" L{"+i+"},{"+(i+1)+"}";var s=[e.x,e.y];for(i=0,o=r.length;i<o;i++)s.push(r[i].x),s.push(r[i].y);var l=t.paper.path(a,s);l.attr({stroke:t.options["line-color"],"stroke-width":t.options["line-width"],"arrow-end":t.options["arrow-end"]});var c=t.options.font,m=t.options["font-family"],h=t.options["font-weight"];if(c&&l.attr({font:c}),m&&l.attr({"font-family":m}),h&&l.attr({"font-weight":h}),n){var d=t.paper.text(0,0,n),u="start",p=!1,f=r[0];e.y===f.y&&(p=!0);var g=0,y=0;g=e.x,y=e.y,p?(e.x>f.x?(g-=t.options["text-margin"]/2,u="end"):g+=t.options["text-margin"]/2,y-=t.options["text-margin"]):(g+=t.options["text-margin"]/2,y+=t.options["text-margin"],e.y>f.y&&(y-=2*t.options["text-margin"])),d.attr({"text-anchor":u,"font-size":t.options["font-size"],fill:t.options["font-color"],x:g,y:y}),c&&d.attr({font:c}),m&&d.attr({"font-family":m}),h&&d.attr({"font-weight":h})}return l},checkLineIntersection:function(t,e,r,n,i,o,a,s){var l,c,m,h,d={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(l=(s-o)*(r-t)-(a-i)*(n-e))||(h=(r-t)*(c=e-o)-(n-e)*(m=t-i),c=((a-i)*c-(s-o)*m)/l,m=h/l,d.x=t+c*(r-t),d.y=e+c*(n-e),c>0&&c<1&&(d.onLine1=!0),m>0&&m<1&&(d.onLine2=!0)),d}}}function requireFlowchart_symbol(){if(hasRequiredFlowchart_symbol)return flowchart_symbol;hasRequiredFlowchart_symbol=1;var t=requireFlowchart_functions(),e=t.drawLine,r=t.checkLineIntersection;function n(t,e,r){this.chart=t,this.group=this.chart.paper.set(),this.symbol=r,this.connectedTo=[],this.symbolType=e.symbolType,this.flowstate=e.flowstate||"future",this.lineStyle=e.lineStyle||{},this.key=e.key||"",this.leftLines=[],this.rightLines=[],this.topLines=[],this.bottomLines=[],this.params=e.params,this.next_direction=e.next&&e.direction_next?e.direction_next:void 0,this.text=this.chart.paper.text(0,0,e.text),e.key&&(this.text.node.id=e.key+"t"),this.text.node.setAttribute("class",this.getAttr("class")+"t"),this.text.attr({"text-anchor":"start",x:this.getAttr("text-margin"),fill:this.getAttr("font-color"),"font-size":this.getAttr("font-size")});var n=this.getAttr("font"),i=this.getAttr("font-family"),o=this.getAttr("font-weight");n&&this.text.attr({font:n}),i&&this.text.attr({"font-family":i}),o&&this.text.attr({"font-weight":o}),e.link&&this.text.attr("href",e.link),e.function&&(this.text.attr({cursor:"pointer"}),this.text.node.addEventListener("click",(function(t){window[e.function](t,e)}),!1)),e.target&&this.text.attr("target",e.target);var a=this.getAttr("maxWidth");if(a){for(var s=e.text.split(" "),l="",c=0,m=s.length;c<m;c++){var h=s[c];this.text.attr("text",l+" "+h),this.text.getBBox().width>a?l+="\n"+h:l+=" "+h}this.text.attr("text",l.substring(1))}if(this.group.push(this.text),r){var d=this.getAttr("text-margin");r.attr({fill:this.getAttr("fill"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*d,height:this.text.getBBox().height+2*d}),r.node.setAttribute("class",this.getAttr("class"));var u=this.getAttr("roundness");isNaN(u)||(r.node.setAttribute("ry",u),r.node.setAttribute("rx",u)),e.link&&r.attr("href",e.link),e.target&&r.attr("target",e.target),e.function&&(r.node.addEventListener("click",(function(t){window[e.function](t,e)}),!1),r.attr({cursor:"pointer"})),e.key&&(r.node.id=e.key),this.group.push(r),r.insertBefore(this.text),this.text.attr({y:r.getBBox().height/2}),this.initialize()}}return n.prototype.getAttr=function(t){if(this.chart){var e,r=this.chart.options?this.chart.options[t]:void 0,n=this.chart.options.symbols?this.chart.options.symbols[this.symbolType][t]:void 0;return this.chart.options.flowstate&&this.chart.options.flowstate[this.flowstate]&&(e=this.chart.options.flowstate[this.flowstate][t]),e||n||r}},n.prototype.initialize=function(){this.group.transform("t"+this.getAttr("line-width")+","+this.getAttr("line-width")),this.width=this.group.getBBox().width,this.height=this.group.getBBox().height},n.prototype.getCenter=function(){return{x:this.getX()+this.width/2,y:this.getY()+this.height/2}},n.prototype.getX=function(){return this.group.getBBox().x},n.prototype.getY=function(){return this.group.getBBox().y},n.prototype.shiftX=function(t){this.group.transform("t"+(this.getX()+t)+","+this.getY())},n.prototype.setX=function(t){this.group.transform("t"+t+","+this.getY())},n.prototype.shiftY=function(t){this.group.transform("t"+this.getX()+","+(this.getY()+t))},n.prototype.setY=function(t){this.group.transform("t"+this.getX()+","+t)},n.prototype.getTop=function(){var t=this.getY();return{x:this.getX()+this.width/2,y:t}},n.prototype.getBottom=function(){var t=this.getY()+this.height;return{x:this.getX()+this.width/2,y:t}},n.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX(),y:t}},n.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.group.getBBox().width,y:t}},n.prototype.render=function(){if(this.next){var t=this,e=this.getAttr("line-length");if("right"===this.next_direction){var r=this.getRight();this.next.isPositioned||(this.next.setY(r.y-this.next.height/2),this.next.shiftX(this.group.getBBox().x+this.width+e),function r(){for(var n,i=!1,o=0,a=t.chart.symbols.length;o<a;o++){n=t.chart.symbols[o];var s=Math.abs(n.getCenter().x-t.next.getCenter().x);if(n.getCenter().y>t.next.getCenter().y&&s<=t.next.width/2){i=!0;break}}if(i){if("end"===t.next.symbolType)return;t.next.setX(n.getX()+n.width+e),r()}}(),this.next.isPositioned=!0,this.next.render())}else if("left"===this.next_direction){var n=this.getLeft();this.next.isPositioned||(this.next.setY(n.y-this.next.height/2),this.next.shiftX(-(this.group.getBBox().x+this.width+e)),function r(){for(var n,i=!1,o=0,a=t.chart.symbols.length;o<a;o++){n=t.chart.symbols[o];var s=Math.abs(n.getCenter().x-t.next.getCenter().x);if(n.getCenter().y>t.next.getCenter().y&&s<=t.next.width/2){i=!0;break}}if(i){if("end"===t.next.symbolType)return;t.next.setX(n.getX()+n.width+e),r()}}(),this.next.isPositioned=!0,this.next.render())}else{var i=this.getBottom();this.next.isPositioned||(this.next.shiftY(this.getY()+this.height+e),this.next.setX(i.x-this.next.width/2),this.next.isPositioned=!0,this.next.render())}}},n.prototype.renderLines=function(){this.next&&(this.next_direction?this.drawLineTo(this.next,this.getAttr("arrow-text")||"",this.next_direction):this.drawLineTo(this.next,this.getAttr("arrow-text")||""))},n.prototype.drawLineTo=function(t,n,i){this.connectedTo.indexOf(t)<0&&this.connectedTo.push(t);var o,a,s=this.getCenter().x,l=this.getCenter().y,c=this.getRight(),m=this.getBottom(),h=this.getTop(),d=this.getLeft(),u=t.getCenter().x,p=t.getCenter().y,f=t.getTop(),g=t.getRight(),y=t.getLeft(),x=s===u,v=l===p,_=l<p,b=l>p||this===t,w=s>u,k=s<u,S=0,q=this.getAttr("line-length"),L=this.getAttr("line-width");if(i&&"bottom"!==i||!x||!_)if(i&&"right"!==i||!v||!k)if(i&&"left"!==i||!v||!w)if(i&&"right"!==i||!x||!b)if(i&&"right"!==i||!x||!_)if(i&&"bottom"!==i||!w)if(i&&"bottom"!==i||!k||!_)if(i&&"bottom"!==i||!k)if(i&&"right"===i&&w)a=10*Math.max(t.topLines.length,this.rightLines.length),o=e(this.chart,c,[{x:c.x+q/2,y:c.y},{x:c.x+q/2,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n),this.rightLines.push(o),t.topLines.push(o),this.rightStart=!0,t.topEnd=!0,S=c.x+q/2;else if(i&&"right"===i&&k)a=10*Math.max(t.topLines.length,this.rightLines.length),o=e(this.chart,c,[{x:f.x,y:c.y-a},{x:f.x,y:f.y-a}],n),this.rightLines.push(o),t.topLines.push(o),this.rightStart=!0,t.topEnd=!0,S=c.x+q/2;else if(i&&"bottom"===i&&x&&b)a=10*Math.max(t.topLines.length,this.bottomLines.length),o=e(this.chart,m,[{x:m.x,y:m.y+q/2-a},{x:c.x+q/2,y:m.y+q/2-a},{x:c.x+q/2,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n),this.bottomLines.push(o),t.topLines.push(o),this.bottomStart=!0,t.topEnd=!0,S=m.x+q/2;else if("left"===i&&x&&b){var M=d.x-q/2;y.x<d.x&&(M=y.x-q/2),a=10*Math.max(t.topLines.length,this.leftLines.length),o=e(this.chart,d,[{x:M,y:d.y-a},{x:M,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n),this.leftLines.push(o),t.topLines.push(o),this.leftStart=!0,t.topEnd=!0,S=d.x}else"left"===i?(a=10*Math.max(t.topLines.length,this.leftLines.length),o=e(this.chart,d,[{x:f.x+(d.x-f.x)/2,y:d.y},{x:f.x+(d.x-f.x)/2,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n),this.leftLines.push(o),t.topLines.push(o),this.leftStart=!0,t.topEnd=!0,S=d.x):"top"===i&&(a=10*Math.max(t.topLines.length,this.topLines.length),o=e(this.chart,h,[{x:h.x,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n),this.topLines.push(o),t.topLines.push(o),this.topStart=!0,t.topEnd=!0,S=h.x);else a=10*Math.max(t.topLines.length,this.bottomLines.length),o=e(this.chart,m,[{x:m.x,y:m.y+q/2-a},{x:m.x+(m.x-f.x)/2,y:m.y+q/2-a},{x:m.x+(m.x-f.x)/2,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n),this.bottomLines.push(o),t.topLines.push(o),this.bottomStart=!0,t.topEnd=!0,S=m.x+(m.x-f.x)/2;else a=10*Math.max(t.topLines.length,this.bottomLines.length),o=e(this.chart,m,[{x:m.x,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n),this.bottomLines.push(o),t.topLines.push(o),this.bottomStart=!0,t.topEnd=!0,S=m.x,f.x>S&&(S=f.x);else a=10*Math.max(t.topLines.length,this.bottomLines.length),o=this.leftEnd&&b?e(this.chart,m,[{x:m.x,y:m.y+q/2-a},{x:m.x+(m.x-f.x)/2,y:m.y+q/2-a},{x:m.x+(m.x-f.x)/2,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n):e(this.chart,m,[{x:m.x,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n),this.bottomLines.push(o),t.topLines.push(o),this.bottomStart=!0,t.topEnd=!0,S=m.x+(m.x-f.x)/2;else a=10*Math.max(t.topLines.length,this.rightLines.length),o=e(this.chart,c,[{x:c.x+q/2,y:c.y-a},{x:c.x+q/2,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n),this.rightLines.push(o),t.topLines.push(o),this.rightStart=!0,t.topEnd=!0,S=c.x+q/2;else a=10*Math.max(t.topLines.length,this.rightLines.length),o=e(this.chart,c,[{x:c.x+q/2,y:c.y-a},{x:c.x+q/2,y:f.y-q/2-a},{x:f.x,y:f.y-q/2-a},{x:f.x,y:f.y}],n),this.rightLines.push(o),t.topLines.push(o),this.rightStart=!0,t.topEnd=!0,S=c.x+q/2;else 0===t.rightLines.length&&0===this.leftLines.length?o=e(this.chart,d,g,n):(a=10*Math.max(t.rightLines.length,this.leftLines.length),o=e(this.chart,c,[{x:c.x,y:c.y-a},{x:c.x,y:g.y-a},{x:g.x,y:g.y-a},{x:g.x,y:g.y}],n)),this.leftLines.push(o),t.rightLines.push(o),this.leftStart=!0,t.rightEnd=!0,S=g.x;else 0===t.leftLines.length&&0===this.rightLines.length?o=e(this.chart,c,y,n):(a=10*Math.max(t.leftLines.length,this.rightLines.length),o=e(this.chart,c,[{x:c.x,y:c.y-a},{x:c.x,y:y.y-a},{x:y.x,y:y.y-a},{x:y.x,y:y.y}],n)),this.rightLines.push(o),t.leftLines.push(o),this.rightStart=!0,t.leftEnd=!0,S=y.x;else 0===t.topLines.length&&0===this.bottomLines.length?o=e(this.chart,m,f,n):(a=10*Math.max(t.topLines.length,this.bottomLines.length),o=e(this.chart,m,[{x:f.x,y:f.y-a},{x:f.x,y:f.y}],n)),this.bottomLines.push(o),t.topLines.push(o),this.bottomStart=!0,t.topEnd=!0,S=m.x;if(this.lineStyle[t.key]&&o&&o.attr(this.lineStyle[t.key]),o){for(var T=0,C=this.chart.lines.length;T<C;T++)for(var A=this.chart.lines[T].attr("path"),B=o.attr("path"),E=0,I=A.length-1;E<I;E++){var D=[];D.push(["M",A[E][1],A[E][2]]),D.push(["L",A[E+1][1],A[E+1][2]]);for(var j=D[0][1],R=D[0][2],P=D[1][1],O=D[1][2],N=0,F=B.length-1;N<F;N++){var $=[];$.push(["M",B[N][1],B[N][2]]),$.push(["L",B[N+1][1],B[N+1][2]]);var H,z=$[0][1],U=$[0][2],V=$[1][1],X=$[1][2],J=r(j,R,P,O,z,U,V,X);if(J.onLine1&&J.onLine2)U===X?z>V?(H=["L",J.x+2*L,U],B.splice(N+1,0,H),H=["C",J.x+2*L,U,J.x,U-4*L,J.x-2*L,U],B.splice(N+2,0,H),o.attr("path",B)):(H=["L",J.x-2*L,U],B.splice(N+1,0,H),H=["C",J.x-2*L,U,J.x,U-4*L,J.x+2*L,U],B.splice(N+2,0,H),o.attr("path",B)):U>X?(H=["L",z,J.y+2*L],B.splice(N+1,0,H),H=["C",z,J.y+2*L,z+4*L,J.y,z,J.y-2*L],B.splice(N+2,0,H),o.attr("path",B)):(H=["L",z,J.y-2*L],B.splice(N+1,0,H),H=["C",z,J.y-2*L,z+4*L,J.y,z,J.y+2*L],B.splice(N+2,0,H),o.attr("path",B)),N+=2}}this.chart.lines.push(o),(void 0===this.chart.minXFromSymbols||this.chart.minXFromSymbols>d.x)&&(this.chart.minXFromSymbols=d.x)}(!this.chart.maxXFromLine||this.chart.maxXFromLine&&S>this.chart.maxXFromLine)&&(this.chart.maxXFromLine=S)},flowchart_symbol=n}function requireFlowchart_symbol_condition(){if(hasRequiredFlowchart_symbol_condition)return flowchart_symbol_condition;hasRequiredFlowchart_symbol_condition=1;var t=requireFlowchart_symbol(),e=requireFlowchart_helpers().inherits,r=requireFlowchart_functions().drawPath;function n(e,n){n=n||{},t.call(this,e,n),this.yes_annotation=n.yes_annotation,this.no_annotation=n.no_annotation,this.textMargin=this.getAttr("text-margin"),this.yes_direction=n.direction_yes,this.no_direction=n.direction_no,this.no_direction||"right"!==this.yes_direction?this.yes_direction||"bottom"!==this.no_direction||(this.yes_direction="right"):this.no_direction="bottom",this.yes_direction=this.yes_direction||"bottom",this.no_direction=this.no_direction||"right",this.text.attr({x:2*this.textMargin});var i=this.text.getBBox().width+3*this.textMargin;i+=i/2;var o=this.text.getBBox().height+2*this.textMargin;o+=o/2;var a=i/4,s=(o=Math.max(.5*i,o))/4;this.text.attr({x:a+this.textMargin/2});var l=r(e,{x:a,y:s},[{x:a-i/4,y:s+o/4},{x:a-i/4+i/2,y:s+o/4+o/2},{x:a-i/4+i,y:s+o/4},{x:a-i/4+i/2,y:s+o/4-o/2},{x:a-i/4,y:s+o/4}]);l.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),n.link&&l.attr("href",n.link),n.target&&l.attr("target",n.target),n.key&&(l.node.id=n.key),l.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:l.getBBox().height/2}),this.group.push(l),l.insertBefore(this.text),this.symbol=l,this.initialize()}return e(n,t),n.prototype.render=function(){var t=this;this.yes_direction&&(this[this.yes_direction+"_symbol"]=this.yes_symbol),this.no_direction&&(this[this.no_direction+"_symbol"]=this.no_symbol);var e=this.getAttr("line-length");if(this.bottom_symbol){var r=this.getBottom();this.bottom_symbol.isPositioned||(this.bottom_symbol.shiftY(this.getY()+this.height+e),this.bottom_symbol.setX(r.x-this.bottom_symbol.width/2),this.bottom_symbol.isPositioned=!0,this.bottom_symbol.render())}if(this.right_symbol){var n=this.getRight();this.right_symbol.isPositioned||(this.right_symbol.setY(n.y-this.right_symbol.height/2),this.right_symbol.shiftX(this.group.getBBox().x+this.width+e),function r(){for(var n,i=!1,o=0,a=t.chart.symbols.length;o<a;o++)if(n=t.chart.symbols[o],!t.params["align-next"]||"no"!==t.params["align-next"]){var s=Math.abs(n.getCenter().x-t.right_symbol.getCenter().x);if(n.getCenter().y>t.right_symbol.getCenter().y&&s<=t.right_symbol.width/2){i=!0;break}}if(i){if("end"===t.right_symbol.symbolType)return;t.right_symbol.setX(n.getX()+n.width+e),r()}}(),this.right_symbol.isPositioned=!0,this.right_symbol.render())}if(this.left_symbol){var i=this.getLeft();this.left_symbol.isPositioned||(this.left_symbol.setY(i.y-this.left_symbol.height/2),this.left_symbol.shiftX(-(this.group.getBBox().x+this.width+e)),function r(){for(var n,i=!1,o=0,a=t.chart.symbols.length;o<a;o++)if(n=t.chart.symbols[o],!t.params["align-next"]||"no"!==t.params["align-next"]){var s=Math.abs(n.getCenter().x-t.left_symbol.getCenter().x);if(n.getCenter().y>t.left_symbol.getCenter().y&&s<=t.left_symbol.width/2){i=!0;break}}if(i){if("end"===t.left_symbol.symbolType)return;t.left_symbol.setX(n.getX()+n.width+e),r()}}(),this.left_symbol.isPositioned=!0,this.left_symbol.render())}},n.prototype.renderLines=function(){this.yes_symbol&&this.drawLineTo(this.yes_symbol,this.yes_annotation?this.yes_annotation:this.getAttr("yes-text"),this.yes_direction),this.no_symbol&&this.drawLineTo(this.no_symbol,this.no_annotation?this.no_annotation:this.getAttr("no-text"),this.no_direction)},flowchart_symbol_condition=n}function requireFlowchart_symbol_parallel(){if(hasRequiredFlowchart_symbol_parallel)return flowchart_symbol_parallel;hasRequiredFlowchart_symbol_parallel=1;var t=requireFlowchart_symbol();function e(e,r){var n=e.paper.rect(0,0,0,0);r=r||{},t.call(this,e,r,n),this.path1_annotation=r.path1_annotation||"",this.path2_annotation=r.path2_annotation||"",this.path3_annotation=r.path3_annotation||"",this.textMargin=this.getAttr("text-margin"),this.path1_direction="bottom",this.path2_direction="right",this.path3_direction="top",this.params=r.params,"path1"===r.direction_next&&!r[r.direction_next]&&r.next&&(r[r.direction_next]=r.next),"path2"===r.direction_next&&!r[r.direction_next]&&r.next&&(r[r.direction_next]=r.next),"path3"===r.direction_next&&!r[r.direction_next]&&r.next&&(r[r.direction_next]=r.next),r.path1&&r.direction_path1&&r.path2&&!r.direction_path2&&r.path3&&!r.direction_path3?"right"===r.direction_path1?(this.path2_direction="bottom",this.path1_direction="right",this.path3_direction="top"):"top"===r.direction_path1?(this.path2_direction="right",this.path1_direction="top",this.path3_direction="bottom"):"left"===r.direction_path1?(this.path2_direction="right",this.path1_direction="left",this.path3_direction="bottom"):(this.path2_direction="right",this.path1_direction="bottom",this.path3_direction="top"):r.path1&&!r.direction_path1&&r.path2&&r.direction_path2&&r.path3&&!r.direction_path3?"right"===r.direction_path2?(this.path1_direction="bottom",this.path2_direction="right",this.path3_direction="top"):"left"===r.direction_path2?(this.path1_direction="bottom",this.path2_direction="left",this.path3_direction="right"):(this.path1_direction="right",this.path2_direction="bottom",this.path3_direction="top"):r.path1&&!r.direction_path1&&r.path2&&!r.direction_path2&&r.path3&&r.direction_path3?"right"===r.direction_path2?(this.path1_direction="bottom",this.path2_direction="top",this.path3_direction="right"):"left"===r.direction_path2?(this.path1_direction="bottom",this.path2_direction="right",this.path3_direction="left"):(this.path1_direction="right",this.path2_direction="bottom",this.path3_direction="top"):(this.path1_direction=r.direction_path1,this.path2_direction=r.direction_path2,this.path3_direction=r.direction_path3),this.path1_direction=this.path1_direction||"bottom",this.path2_direction=this.path2_direction||"right",this.path3_direction=this.path3_direction||"top",this.initialize()}return(0,requireFlowchart_helpers().inherits)(e,t),e.prototype.render=function(){this.path1_direction&&(this[this.path1_direction+"_symbol"]=this.path1_symbol),this.path2_direction&&(this[this.path2_direction+"_symbol"]=this.path2_symbol),this.path3_direction&&(this[this.path3_direction+"_symbol"]=this.path3_symbol);var t=this.getAttr("line-length");if(this.bottom_symbol){var e=this.getBottom();this.bottom_symbol.isPositioned||(this.bottom_symbol.shiftY(this.getY()+this.height+t),this.bottom_symbol.setX(e.x-this.bottom_symbol.width/2),this.bottom_symbol.isPositioned=!0,this.bottom_symbol.render())}if(this.top_symbol){var r=this.getTop();this.top_symbol.isPositioned||(this.top_symbol.shiftY(this.getY()-this.top_symbol.height-t),this.top_symbol.setX(r.x+this.top_symbol.width),this.top_symbol.isPositioned=!0,this.top_symbol.render())}var n=this;if(this.left_symbol){var i=this.getLeft();this.left_symbol.isPositioned||(this.left_symbol.setY(i.y-this.left_symbol.height/2),this.left_symbol.shiftX(-(this.group.getBBox().x+this.width+t)),function e(){for(var r,i=!1,o=0,a=n.chart.symbols.length;o<a;o++)if(r=n.chart.symbols[o],!n.params["align-next"]||"no"!==n.params["align-next"]){var s=Math.abs(r.getCenter().x-n.left_symbol.getCenter().x);if(r.getCenter().y>n.left_symbol.getCenter().y&&s<=n.left_symbol.width/2){i=!0;break}}if(i){if("end"===n.left_symbol.symbolType)return;n.left_symbol.setX(r.getX()+r.width+t),e()}}(),this.left_symbol.isPositioned=!0,this.left_symbol.render())}if(this.right_symbol){var o=this.getRight();this.right_symbol.isPositioned||(this.right_symbol.setY(o.y-this.right_symbol.height/2),this.right_symbol.shiftX(this.group.getBBox().x+this.width+t),function e(){for(var r,i=!1,o=0,a=n.chart.symbols.length;o<a;o++)if(r=n.chart.symbols[o],!n.params["align-next"]||"no"!==n.params["align-next"]){var s=Math.abs(r.getCenter().x-n.right_symbol.getCenter().x);if(r.getCenter().y>n.right_symbol.getCenter().y&&s<=n.right_symbol.width/2){i=!0;break}}if(i){if("end"===n.right_symbol.symbolType)return;n.right_symbol.setX(r.getX()+r.width+t),e()}}(),this.right_symbol.isPositioned=!0,this.right_symbol.render())}},e.prototype.renderLines=function(){this.path1_symbol&&this.drawLineTo(this.path1_symbol,this.path1_annotation,this.path1_direction),this.path2_symbol&&this.drawLineTo(this.path2_symbol,this.path2_annotation,this.path2_direction),this.path3_symbol&&this.drawLineTo(this.path3_symbol,this.path3_annotation,this.path3_direction)},flowchart_symbol_parallel=e}function requireFlowchart_chart(){if(hasRequiredFlowchart_chart)return flowchart_chart;hasRequiredFlowchart_chart=1;var t=requireRaphael_min(),e=requireFlowchart_helpers().defaults,r=requireFlowchart_defaults(),n=requireFlowchart_symbol_condition(),i=requireFlowchart_symbol_parallel();function o(n,i){i=i||{},this.paper=new t(n),this.options=e(i,r),this.symbols=[],this.lines=[],this.start=null}return o.prototype.handle=function(t){this.symbols.indexOf(t)<=-1&&this.symbols.push(t);var e=this;return t instanceof n?(t.yes=function(r){return t.yes_symbol=r,t.no_symbol&&(t.pathOk=!0),e.handle(r)},t.no=function(r){return t.no_symbol=r,t.yes_symbol&&(t.pathOk=!0),e.handle(r)}):t instanceof i?(t.path1=function(r){return t.path1_symbol=r,t.path2_symbol&&(t.pathOk=!0),e.handle(r)},t.path2=function(r){return t.path2_symbol=r,t.path3_symbol&&(t.pathOk=!0),e.handle(r)},t.path3=function(r){return t.path3_symbol=r,t.path1_symbol&&(t.pathOk=!0),e.handle(r)}):t.then=function(r){return t.next=r,t.pathOk=!0,e.handle(r)},t},o.prototype.startWith=function(t){return this.start=t,this.handle(t)},o.prototype.render=function(){var t,e,r,n,i=0,o=0,a=0,s=0,l=0,c=0,m=0,h=0;for(a=0,s=this.symbols.length;a<s;a++)(t=this.symbols[a]).width>i&&(i=t.width),t.height>o&&(o=t.height);for(a=0,s=this.symbols.length;a<s;a++)(t=this.symbols[a]).shiftX(this.options.x+(i-t.width)/2+this.options["line-width"]),t.shiftY(this.options.y+(o-t.height)/2+this.options["line-width"]);for(this.start.render(),a=0,s=this.symbols.length;a<s;a++)(t=this.symbols[a]).renderLines();for(l=this.maxXFromLine,a=0,s=this.symbols.length;a<s;a++){var d=(t=this.symbols[a]).getX();d<m&&(m=d),(r=d+t.width)>l&&(l=r),(n=t.getY()+t.height)>c&&(c=n)}for(a=0,s=this.lines.length;a<s;a++){r=(e=this.lines[a].getBBox()).x,n=e.y;var u=e.x2,p=e.y2;r<m&&(m=r),n<h&&(h=n),u>l&&(l=u),p>c&&(c=p)}var f=this.options.scale,g=this.options["line-width"];this.minXFromSymbols<m&&(m=this.minXFromSymbols),m<0&&(m-=g),h<0&&(h-=g);var y=l+g-m,x=c+g-h;this.paper.setSize(y*f,x*f),this.paper.setViewBox(m,h,y,x,!0)},o.prototype.clean=function(){if(this.paper){var t=this.paper.canvas;t.parentNode&&t.parentNode.removeChild(t)}},flowchart_chart=o}function requireFlowchart_symbol_start(){if(hasRequiredFlowchart_symbol_start)return flowchart_symbol_start;hasRequiredFlowchart_symbol_start=1;var t=requireFlowchart_symbol();function e(e,r){var n=e.paper.rect(0,0,0,0,20);(r=r||{}).text=r.text||"Start",t.call(this,e,r,n)}return(0,requireFlowchart_helpers().inherits)(e,t),flowchart_symbol_start=e}function requireFlowchart_symbol_end(){if(hasRequiredFlowchart_symbol_end)return flowchart_symbol_end;hasRequiredFlowchart_symbol_end=1;var t=requireFlowchart_symbol();function e(e,r){var n=e.paper.rect(0,0,0,0,20);(r=r||{}).text=r.text||"End",t.call(this,e,r,n)}return(0,requireFlowchart_helpers().inherits)(e,t),flowchart_symbol_end=e}function requireFlowchart_symbol_operation(){if(hasRequiredFlowchart_symbol_operation)return flowchart_symbol_operation;hasRequiredFlowchart_symbol_operation=1;var t=requireFlowchart_symbol();function e(e,r){var n=e.paper.rect(0,0,0,0);r=r||{},t.call(this,e,r,n)}return(0,requireFlowchart_helpers().inherits)(e,t),flowchart_symbol_operation=e}function requireFlowchart_symbol_inputoutput(){if(hasRequiredFlowchart_symbol_inputoutput)return flowchart_symbol_inputoutput;hasRequiredFlowchart_symbol_inputoutput=1;var t=requireFlowchart_symbol(),e=requireFlowchart_helpers().inherits,r=requireFlowchart_functions().drawPath;function n(e,n){n=n||{},t.call(this,e,n),this.textMargin=this.getAttr("text-margin"),this.text.attr({x:3*this.textMargin});var i=this.text.getBBox().width+4*this.textMargin,o=this.text.getBBox().height+2*this.textMargin,a=this.textMargin,s=o/2,l={x:a,y:s},c=[{x:a-this.textMargin,y:o},{x:a-this.textMargin+i,y:o},{x:a-this.textMargin+i+2*this.textMargin,y:0},{x:a-this.textMargin+2*this.textMargin,y:0},{x:a,y:s}],m=r(e,l,c);m.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),n.link&&m.attr("href",n.link),n.target&&m.attr("target",n.target),n.key&&(m.node.id=n.key),m.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:m.getBBox().height/2}),this.group.push(m),m.insertBefore(this.text),this.symbol=m,this.initialize()}return e(n,t),n.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.textMargin,y:t}},n.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.group.getBBox().width-this.textMargin,y:t}},flowchart_symbol_inputoutput=n}function requireFlowchart_symbol_input(){if(hasRequiredFlowchart_symbol_input)return flowchart_symbol_input;hasRequiredFlowchart_symbol_input=1;var t=requireFlowchart_symbol(),e=requireFlowchart_helpers().inherits,r=requireFlowchart_functions().drawPath;function n(e,n){n=n||{},t.call(this,e,n),this.textMargin=this.getAttr("text-margin"),this.text.attr({x:3*this.textMargin});var i=this.text.getBBox().width+4*this.textMargin,o=this.text.getBBox().height+2*this.textMargin,a=this.textMargin,s=o/2,l={x:a,y:s},c=[{x:a-this.textMargin+2*this.textMargin,y:o},{x:a-this.textMargin+i,y:o},{x:a-this.textMargin+i+2*this.textMargin,y:0},{x:a-this.textMargin,y:0},{x:a,y:s}],m=r(e,l,c);m.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),n.link&&m.attr("href",n.link),n.target&&m.attr("target",n.target),n.key&&(m.node.id=n.key),m.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:m.getBBox().height/2}),this.group.push(m),m.insertBefore(this.text),this.symbol=m,this.initialize()}return e(n,t),n.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.textMargin,y:t}},n.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.group.getBBox().width-this.textMargin,y:t}},flowchart_symbol_input=n}function requireFlowchart_symbol_output(){if(hasRequiredFlowchart_symbol_output)return flowchart_symbol_output;hasRequiredFlowchart_symbol_output=1;var t=requireFlowchart_symbol(),e=requireFlowchart_helpers().inherits,r=requireFlowchart_functions().drawPath;function n(e,n){n=n||{},t.call(this,e,n),this.textMargin=this.getAttr("text-margin"),this.text.attr({x:3*this.textMargin});var i=this.text.getBBox().width+4*this.textMargin,o=this.text.getBBox().height+2*this.textMargin,a=this.textMargin,s=o/2,l={x:a,y:s},c=[{x:a-this.textMargin,y:o},{x:a-this.textMargin+i+2*this.textMargin,y:o},{x:a-this.textMargin+i,y:0},{x:a-this.textMargin+2*this.textMargin,y:0},{x:a,y:s}],m=r(e,l,c);m.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),n.link&&m.attr("href",n.link),n.target&&m.attr("target",n.target),n.key&&(m.node.id=n.key),m.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:m.getBBox().height/2}),this.group.push(m),m.insertBefore(this.text),this.symbol=m,this.initialize()}return e(n,t),n.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.textMargin,y:t}},n.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.group.getBBox().width-this.textMargin,y:t}},flowchart_symbol_output=n}function requireFlowchart_symbol_subroutine(){if(hasRequiredFlowchart_symbol_subroutine)return flowchart_symbol_subroutine;hasRequiredFlowchart_symbol_subroutine=1;var t=requireFlowchart_symbol();function e(e,r){var n=e.paper.rect(0,0,0,0);r=r||{},t.call(this,e,r,n),n.attr({width:this.text.getBBox().width+4*this.getAttr("text-margin")}),this.text.attr({x:2*this.getAttr("text-margin")});var i=e.paper.rect(0,0,0,0);i.attr({x:this.getAttr("text-margin"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*this.getAttr("text-margin"),height:this.text.getBBox().height+2*this.getAttr("text-margin"),fill:this.getAttr("fill")}),r.key&&(i.node.id=r.key+"i");var o=this.getAttr("font"),a=this.getAttr("font-family"),s=this.getAttr("font-weight");o&&i.attr({font:o}),a&&i.attr({"font-family":a}),s&&i.attr({"font-weight":s}),r.link&&i.attr("href",r.link),r.target&&i.attr("target",r.target),this.group.push(i),i.insertBefore(this.text),this.initialize()}return(0,requireFlowchart_helpers().inherits)(e,t),flowchart_symbol_subroutine=e}function requireFlowchart_parse(){if(hasRequiredFlowchart_parse)return flowchart_parse;hasRequiredFlowchart_parse=1;var t=requireFlowchart_chart(),e=requireFlowchart_symbol_start(),r=requireFlowchart_symbol_end(),n=requireFlowchart_symbol_operation(),i=requireFlowchart_symbol_inputoutput(),o=requireFlowchart_symbol_input(),a=requireFlowchart_symbol_output(),s=requireFlowchart_symbol_subroutine(),l=requireFlowchart_symbol_condition(),c=requireFlowchart_symbol_parallel();return flowchart_parse=function(m){m=(m=m||"").trim();for(var h,d,u,p={symbols:{},start:null,drawSVG:function(m,h){var d=this;this.diagram&&this.diagram.clean();var u=new t(m,h);this.diagram=u;var p={};!function t(m,h,f){var g=function(t){if(p[t.key])return p[t.key];switch(t.symbolType){case"start":p[t.key]=new e(u,t);break;case"end":p[t.key]=new r(u,t);break;case"operation":p[t.key]=new n(u,t);break;case"inputoutput":p[t.key]=new i(u,t);break;case"input":p[t.key]=new o(u,t);break;case"output":p[t.key]=new a(u,t);break;case"subroutine":p[t.key]=new s(u,t);break;case"condition":p[t.key]=new l(u,t);break;case"parallel":p[t.key]=new c(u,t);break;default:return new Error("Wrong symbol type!")}return p[t.key]}(m);return d.start===m?u.startWith(g):h&&f&&!h.pathOk&&(h instanceof l?(f.yes===m&&h.yes(g),f.no===m&&h.no(g)):h instanceof c?(f.path1===m&&h.path1(g),f.path2===m&&h.path2(g),f.path3===m&&h.path3(g)):h.then(g)),g.pathOk||(g instanceof l?(m.yes&&t(m.yes,g,m),m.no&&t(m.no,g,m)):g instanceof c?(m.path1&&t(m.path1,g,m),m.path2&&t(m.path2,g,m),m.path3&&t(m.path3,g,m)):m.next&&t(m.next,g,m)),g}(this.start),u.render()},clean:function(){this.diagram.clean()},options:function(){return this.diagram.options}},f=[],g=0,y=1,x=m.length;y<x;y++)if("\n"===m[y]&&"\\"!==m[y-1]){var v=m.substring(g,y);g=y+1,f.push(v.replace(/\\\n/g,"\n"))}g<m.length&&f.push(m.substr(g));for(var _=1,b=f.length;_<b;){var w=f[_];w.indexOf("->")<0&&w.indexOf("=>")<0&&w.indexOf("@>")<0?(f[_-1]+="\n"+w,f.splice(_,1),b--):_++}function k(t){var e=t.indexOf("(")+1,r=t.indexOf(")");return e>=0&&r>=0?t.substring(e,r):"{}"}function S(t){var e=t.indexOf("(")+1,r=t.indexOf(")");return e>=0&&r>=0?p.symbols[t.substring(0,e-1)]:p.symbols[t]}function q(t){var e="next",r=t.indexOf("(")+1,n=t.indexOf(")");return r>=0&&n>=0&&(e=H.substring(r,n)).indexOf(",")<0&&"yes"!==e&&"no"!==e&&(e="next, "+e),e}function L(t){var e=t.indexOf("(")+1,r=t.indexOf(")"),n=t.substring(e,r);n.indexOf(",")>0&&(n=n.substring(0,n.indexOf(",")));var i=n.split("@");if(i.length>1)return e>=0&&r>=0?i[1]:""}for(;f.length>0;){var M=f.splice(0,1)[0].trim();if(M.indexOf("=>")>=0){var T,C=M.split("=>"),A={key:C[0].replace(/\(.*\)/,""),symbolType:C[1],text:null,link:null,target:null,flowstate:null,function:null,lineStyle:{},params:{}},B=C[0].match(/\((.*)\)/);if(B&&B.length>1)for(var E=B[1].split(","),I=0;I<E.length;I++){var D=E[I].split("=");2==D.length&&(A.params[D[0]]=D[1])}if(A.symbolType.indexOf(": ")>=0&&(T=A.symbolType.split(": "),A.symbolType=T.shift(),A.text=T.join(": ")),A.text&&A.text.indexOf(":$")>=0?(T=A.text.split(":$"),A.text=T.shift(),A.function=T.join(":$")):A.symbolType.indexOf(":$")>=0?(T=A.symbolType.split(":$"),A.symbolType=T.shift(),A.function=T.join(":$")):A.text&&A.text.indexOf(":>")>=0?(T=A.text.split(":>"),A.text=T.shift(),A.link=T.join(":>")):A.symbolType.indexOf(":>")>=0&&(T=A.symbolType.split(":>"),A.symbolType=T.shift(),A.link=T.join(":>")),A.symbolType.indexOf("\n")>=0&&(A.symbolType=A.symbolType.split("\n")[0]),A.link){var j=A.link.indexOf("[")+1,R=A.link.indexOf("]");j>=0&&R>=0&&(A.target=A.link.substring(j,R),A.link=A.link.substring(0,j-1))}if(A.text&&A.text.indexOf("|")>=0){var P=A.text.split("|");A.flowstate=P.pop().trim(),A.text=P.join("|")}p.symbols[A.key]=A}else if(M.indexOf("->")>=0){var O=L(M);O&&(M=M.replace("@"+O,""));for(var N=M.split("->"),F=0,$=N.length;F<$;F++){var H=N[F],z=(d=void 0,u=void 0,d=(h=H).indexOf("(")+1,u=h.indexOf(")"),d>=0&&u>=0?h.substring(d,u):"");"true"!==z&&"false"!==z||(H=(H=H.replace("true","yes")).replace("false","no"));var U=q(H),V=S(H),X=null;if(U.indexOf(",")>=0){var J=U.split(",");U=J[0],X=J[1].trim()}if(O&&("condition"===V.symbolType?"yes"===U||"true"===U?V.yes_annotation=O:V.no_annotation=O:"parallel"===V.symbolType&&("path1"===U?V.path1_annotation=O:"path2"===U?V.path2_annotation=O:"path3"===U&&(V.path3_annotation=O)),O=null),p.start||(p.start=V),F+1<$){var W=N[F+1];V[U]=S(W),V["direction_"+U]=X,X=null}}}else if(M.indexOf("@>")>=0)for(var G=M.split("@>"),Y=0,Q=G.length;Y<Q;Y++)if(Y+1!==Q){var Z=S(G[Y]),K=S(G[Y+1]);Z.lineStyle[K.key]=JSON.parse(k(G[Y+1]))}}return p}}var jqueryPlugin={},hasRequiredJqueryPlugin,flowchart_js,hasRequiredFlowchart_js;function requireJqueryPlugin(){if(hasRequiredJqueryPlugin)return jqueryPlugin;if(hasRequiredJqueryPlugin=1,"undefined"!=typeof jQuery){var t=requireFlowchart_parse();!function(e){function r(t,e){return t==e||Array.isArray(e)&&(e.includes(t)||e.includes(Number(t)))}var n={init:function(r){return this.each((function(){var n=e(this);this.chart=t(n.text()),n.html(""),this.chart.drawSVG(this,r)}))},setFlowStateByParam:function(t,e,n){return this.each((function(){var i=this.chart,o=["next","yes","no","path1","path2","path3"];for(var a in i.symbols)if(i.symbols.hasOwnProperty(a)){var s=i.symbols[a];if(r(s.params[t],e)){s.flowstate=n;for(var l=0;l<o.length;l++){var c=o[l];s[c]&&s[c].params&&s[c].params[t]&&r(s[c].params[t],e)&&(s.lineStyle[s[c].key]={stroke:i.options().flowstate[n].fill})}}}i.clean(),i.drawSVG(this)}))},clearFlowState:function(){return this.each((function(){var t=this.chart;for(var e in t.symbols){if(t.symbols.hasOwnProperty(e))t.symbols[e].flowstate=""}t.clean(),t.drawSVG(this)}))}};e.fn.flowChart=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.flowChart"):n.init.apply(this,arguments)}}(jQuery)}return jqueryPlugin}function requireFlowchart_js(){if(hasRequiredFlowchart_js)return flowchart_js;hasRequiredFlowchart_js=1,requireFlowchart_shim();var t=requireFlowchart_parse();requireJqueryPlugin();var e={parse:t};return"undefined"!=typeof window&&(window.flowchart=e),flowchart_js=e}var flowchart_jsExports=requireFlowchart_js();const flowchart=getDefaultExportFromCjs(flowchart_jsExports);var qrcode,hasRequiredQrcode;function requireQrcode(){return hasRequiredQrcode?qrcode:(hasRequiredQrcode=1,function(){function e(t){this.mode=n.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var i=[],o=this.data.charCodeAt(e);o>65536?(i[0]=240|(1835008&o)>>>18,i[1]=128|(258048&o)>>>12,i[2]=128|(4032&o)>>>6,i[3]=128|63&o):o>2048?(i[0]=224|(61440&o)>>>12,i[1]=128|(4032&o)>>>6,i[2]=128|63&o):o>128?(i[0]=192|(1984&o)>>>6,i[1]=128|63&o):i[0]=o,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}e.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}},r.prototype={addData:function(t){var r=new e(t);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[t+r][e+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=u.getLostPoint(this);(0==r||t>n)&&(t=n,e=r)}return e},createMovieClip:function(t,e,r){var n=t.createEmptyMovieClip(e,r);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,a=0;a<this.modules[i].length;a++){var s=1*a;this.modules[i][a]&&(n.beginFill(0,100),n.moveTo(s,o),n.lineTo(s+1,o),n.lineTo(s+1,o+1),n.lineTo(s,o+1),n.endFill())}return n},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=u.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var n=t[e],i=t[r];if(null==this.modules[n][i])for(var o=-2;o<=2;o++)for(var a=-2;a<=2;a++)this.modules[n+o][i+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a}},setupTypeNumber:function(t){for(var e=u.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(r=0;r<18;r++){n=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=u.getBCHTypeInfo(r),i=0;i<15;i++){var o=!t&&1==(n>>i&1);i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(i=0;i<15;i++){o=!t&&1==(n>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,n=this.moduleCount-1,i=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;s<2;s++)if(null==this.modules[n][a-s]){var l=!1;o<t.length&&(l=1==(t[o]>>>i&1)),u.getMask(e,n,a-s)&&(l=!l),this.modules[n][a-s]=l,-1==--i&&(o++,i=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(t,e,n){for(var i=y.getRSBlocks(t,e),o=new x,a=0;a<n.length;a++){var s=n[a];o.put(s.mode,4),o.put(s.getLength(),u.getLengthInBits(s.mode,t)),s.write(o)}var l=0;for(a=0;a<i.length;a++)l+=i[a].dataCount;if(o.getLengthInBits()>8*l)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*l+")");for(o.getLengthInBits()+4<=8*l&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*l||(o.put(r.PAD0,8),o.getLengthInBits()>=8*l));)o.put(r.PAD1,8);return r.createBytes(o,i)},r.createBytes=function(t,e){for(var r=0,n=0,i=0,o=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s++){var l=e[s].dataCount,c=e[s].totalCount-l;n=Math.max(n,l),i=Math.max(i,c),o[s]=new Array(l);for(var m=0;m<o[s].length;m++)o[s][m]=255&t.buffer[m+r];r+=l;var h=u.getErrorCorrectPolynomial(c),d=new g(o[s],h.getLength()-1).mod(h);a[s]=new Array(h.getLength()-1);for(m=0;m<a[s].length;m++){var p=m+d.getLength()-a[s].length;a[s][m]=p>=0?d.get(p):0}}var f=0;for(m=0;m<e.length;m++)f+=e[m].totalCount;var y=new Array(f),x=0;for(m=0;m<n;m++)for(s=0;s<e.length;s++)m<o[s].length&&(y[x++]=o[s][m]);for(m=0;m<i;m++)for(s=0;s<e.length;s++)m<a[s].length&&(y[x++]=a[s][m]);return y};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},o=0,a=1,s=2,l=3,c=4,m=5,h=6,d=7,u={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;u.getBCHDigit(e)-u.getBCHDigit(u.G15)>=0;)e^=u.G15<<u.getBCHDigit(e)-u.getBCHDigit(u.G15);return(t<<10|e)^u.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;u.getBCHDigit(e)-u.getBCHDigit(u.G18)>=0;)e^=u.G18<<u.getBCHDigit(e)-u.getBCHDigit(u.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return u.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case o:return(e+r)%2==0;case a:return e%2==0;case s:return r%3==0;case l:return(e+r)%3==0;case c:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case m:return e*r%2+e*r%3==0;case h:return(e*r%2+e*r%3)%2==0;case d:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new g([1],0),r=0;r<t;r++)e=e.multiply(new g([1,p.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var o=0,a=t.isDark(n,i),s=-1;s<=1;s++)if(!(n+s<0||e<=n+s))for(var l=-1;l<=1;l++)i+l<0||e<=i+l||0==s&&0==l||a==t.isDark(n+s,i+l)&&o++;o>5&&(r+=3+o-5)}for(n=0;n<e-1;n++)for(i=0;i<e-1;i++){var c=0;t.isDark(n,i)&&c++,t.isDark(n+1,i)&&c++,t.isDark(n,i+1)&&c++,t.isDark(n+1,i+1)&&c++,0!=c&&4!=c||(r+=3)}for(n=0;n<e;n++)for(i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(r+=40);for(i=0;i<e;i++)for(n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(r+=40);var m=0;for(i=0;i<e;i++)for(n=0;n<e;n++)t.isDark(n,i)&&m++;return r+=10*(Math.abs(100*m/e/e-50)/5)}},p={glog:function(t){if(t<1)throw new Error("glog("+t+")");return p.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return p.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},f=0;f<8;f++)p.EXP_TABLE[f]=1<<f;for(f=8;f<256;f++)p.EXP_TABLE[f]=p.EXP_TABLE[f-4]^p.EXP_TABLE[f-5]^p.EXP_TABLE[f-6]^p.EXP_TABLE[f-8];for(f=0;f<255;f++)p.LOG_TABLE[p.EXP_TABLE[f]]=f;function g(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r]}function y(t,e){this.totalCount=t,this.dataCount=e}function x(){this.buffer=[],this.length=0}g.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=p.gexp(p.glog(this.get(r))+p.glog(t.get(n)));return new g(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=p.glog(this.get(0))-p.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(n=0;n<t.getLength();n++)r[n]^=p.gexp(p.glog(t.get(n))+e);return new g(r,0).mod(t)}},y.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],y.getRSBlocks=function(t,e){var r=y.getRsBlockTable(t,e);if(null==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,i=[],o=0;o<n;o++)for(var a=r[3*o+0],s=r[3*o+1],l=r[3*o+2],c=0;c<a;c++)i.push(new y(s,l));return i},y.getRsBlockTable=function(t,e){switch(e){case i.L:return y.RS_BLOCK_TABLE[4*(t-1)+0];case i.M:return y.RS_BLOCK_TABLE[4*(t-1)+1];case i.Q:return y.RS_BLOCK_TABLE[4*(t-1)+2];case i.H:return y.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},x.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function _(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var r=e.toString().match(/android ([0-9]\.[0-9])/i);r&&r[1]&&(t=parseFloat(r[1]))}return t}var b,w=((b=function(t,e){this._el=t,this._htOption=e}).prototype.draw=function(t){var e=this._htOption,r=this._el,n=t.getModuleCount();function i(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e)e.hasOwnProperty(n)&&r.setAttribute(n,e[n]);return r}Math.floor(e.width/n),Math.floor(e.height/n),this.clear();var o=i("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:e.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.appendChild(o),o.appendChild(i("rect",{fill:e.colorLight,width:"100%",height:"100%"})),o.appendChild(i("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;a<n;a++)for(var s=0;s<n;s++)if(t.isDark(a,s)){var l=i("use",{x:String(s),y:String(a)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(l)}},b.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},b),k="svg"===document.documentElement.tagName.toLowerCase()?w:"undefined"==typeof CanvasRenderingContext2D?function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,r=this._el,n=t.getModuleCount(),i=Math.floor(e.width/n),o=Math.floor(e.height/n),a=['<table style="border:0;border-collapse:collapse;">'],s=0;s<n;s++){a.push("<tr>");for(var l=0;l<n;l++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+o+"px;background-color:"+(t.isDark(s,l)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),r.innerHTML=a.join("");var c=r.childNodes[0],m=(e.width-c.offsetWidth)/2,h=(e.height-c.offsetHeight)/2;m>0&&h>0&&(c.style.margin=h+"px "+m+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}():function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,r=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,n,i,o,a,s,l,c,m){if("nodeName"in t&&/img/i.test(t.nodeName))for(var h=arguments.length-1;h>=1;h--)arguments[h]=arguments[h]*e;else void 0===c&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);r.apply(this,arguments)}}function n(t,e){var r=this;if(r._fFail=e,r._fSuccess=t,null===r._bSupportDataURI){var n=document.createElement("img"),i=function(){r._bSupportDataURI=!1,r._fFail&&r._fFail.call(r)};return n.onabort=i,n.onerror=i,n.onload=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)},void(n.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===r._bSupportDataURI&&r._fSuccess?r._fSuccess.call(r):!1===r._bSupportDataURI&&r._fFail&&r._fFail.call(r)}var i=function(t,e){this._bIsPainted=!1,this._android=_(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return i.prototype.draw=function(t){var e=this._elImage,r=this._oContext,n=this._htOption,i=t.getModuleCount(),o=n.width/i,a=n.height/i,s=Math.round(o),l=Math.round(a);e.style.display="none",this.clear();for(var c=0;c<i;c++)for(var m=0;m<i;m++){var h=t.isDark(c,m),d=m*o,u=c*a;r.strokeStyle=h?n.colorDark:n.colorLight,r.lineWidth=1,r.fillStyle=h?n.colorDark:n.colorLight,r.fillRect(d,u,o,a),r.strokeRect(Math.floor(d)+.5,Math.floor(u)+.5,s,l),r.strokeRect(Math.ceil(d)-.5,Math.ceil(u)-.5,s,l)}this._bIsPainted=!0},i.prototype.makeImage=function(){this._bIsPainted&&n.call(this,t)},i.prototype.isPainted=function(){return this._bIsPainted},i.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},i.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},i}();function S(t,e){for(var r=1,n=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),o=0,a=v.length;o<=a;o++){var s=0;switch(e){case i.L:s=v[o][0];break;case i.M:s=v[o][1];break;case i.Q:s=v[o][2];break;case i.H:s=v[o][3]}if(n<=s)break;r++}if(r>v.length)throw new Error("Too long data");return r}(t=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(k=w),this._android=_(),this._el=t,this._oQRCode=null,this._oDrawing=new k(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(t){this._oQRCode=new r(S(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},t.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},t.prototype.clear=function(){this._oDrawing.clear()},t.CorrectLevel=i}(),qrcode=t);var t}var qrcodeExports=requireQrcode();const QRCode=getDefaultExportFromCjs(qrcodeExports);var _hmt=_hmt||[],ElementProto;function timeAgo(t){var e={prefix:"",suffix:"前",seconds:"几秒",minute:"1分钟",minutes:"%d分钟",hour:"1小时",hours:"%d小时",day:"1天",days:"%d天",month:"1个月",months:"%d个月",year:"1年",years:"%d年"},r=function(t,r){return e[t]&&e[t].replace(/%d/i,Math.abs(Math.round(r)))},n=function(t){if(t){t=(t=(t=(t=t.replace(/\.\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),t=new Date(1e3*t||t);var n=.001*((new Date).getTime()-t)|0,i=n/60,o=i/60,a=o/24,s=a/365;return e.prefix+(n<45&&r("seconds",n)||n<90&&r("minute",1)||i<45&&r("minutes",i)||i<90&&r("hour",1)||o<24&&r("hours",o)||o<42&&r("day",1)||a<30&&r("days",a)||a<45&&r("month",1)||a<365&&r("months",a/30)||s<1.5&&r("year",1)||r("years",s))+e.suffix}},i=document.getElementsByClassName("timeago");for(var o in i){var a=i[o];"object"==typeof a&&(a.innerHTML=n(a.getAttribute("datetime")))}setTimeout(timeAgo,6e4)}function getQuery(t){for(var e=window.location.search.substring(1).split("&"),r=0;r<e.length;r++){var n=e[r].split("=");if(n[0]==t)return n[1]}return!1}if(Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[r]:("00"+e[r]).substr((""+e[r]).length)));return t},ElementProto=window.Element.prototype,"function"!=typeof ElementProto.matches&&(ElementProto.matches=ElementProto.msMatchesSelector||ElementProto.mozMatchesSelector||ElementProto.webkitMatchesSelector||function(t){for(var e=this,r=(e.document||e.ownerDocument).querySelectorAll(t),n=0;r[n]&&r[n]!==e;)++n;return Boolean(r[n])}),"function"!=typeof ElementProto.closest&&(ElementProto.closest=function(t){for(var e=this;e&&1===e.nodeType;){if(e.matches(t))return e;e=e.parentNode}return null}),browser.wechat&&location.origin==site.home){var xhrwesign=new XMLHttpRequest;xhrwesign.onreadystatechange=function(){if(4==xhrwesign.readyState&&200==xhrwesign.status){var t=JSON.parse(xhrwesign.responseText);wx$1.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["chooseImage","previewImage"]})}},xhrwesign.open("GET",site.api+"/wechat/jssdk.php?url="+location.href,!0),xhrwesign.send(),wx$1.ready((function(){}))}window.addEventListener("beforeunload",(function(t){document.getElementById("menu").checked=!1})),document.addEventListener("DOMContentLoaded",(function(t){if(browser.mobile){var e=document.querySelector(".jd-ads-link");e&&(e.href=e.dataset.mobileUrl)}var r=new iDisqus("comment",{forum:site.forum,site:site.home,api:site.api+"/disqus",title:page.title,url:page.url,mode:2,timeout:3e3,slug:page.url.slice(1).split(".")[0],init:!0,toggle:"comment-toggle",sort:"newest",emoji_path:site.api+"/emoji/unicode/"});r.count(),timeAgo();var n=(new Date).getFullYear(),i=Date.parse("01 Jan "+n+" 00:00:00"),o=Date.parse("31 Dec "+n+" 23:59:59"),a=(Date.now()-i)/(o-i)*100,s=a.toFixed(2)+"%",l=document.styleSheets;l[l.length-1].insertRule(".page-header .page-title:before{width:"+s+"}",0),l[l.length-1].insertRule(".page-header .page-title:after{left:"+s+"}",0),l[l.length-1].insertRule('.page-header .page-title:after{content:"'+parseInt(a)+'%"}',0);var c=document.querySelector(".post-toc"),m=document.querySelectorAll(".page-content h2,.page-content h3"),h=document.documentElement.clientHeight;function d(){var t=document.documentElement.clientWidth/2-410-c.offsetWidth;t<15?c.style.visibility="hidden":(c.style.visibility="visible",c.style.left=t+"px")}c&&(document.addEventListener("scroll",(function(){for(var t=[],e=[],r=0;r<m.length;r++)t.push(m[r].id),e.push(m[r].offsetTop);var n=document.documentElement.scrollTop||document.body.scrollTop,i=document.body.offsetHeight-m[m.length-1].offsetTop;for(r=0;r<e.length;r++)r===m.length-1&&h>i&&(n+=h-i),e[r]<=n&&e[r]<n+h&&(document.querySelector(".active")&&document.querySelector(".active").classList.remove("active"),document.querySelector('[href="#'+t[r]+'"]').classList.add("active"))}),!1),window.addEventListener("resize",d,!1),d()),"参考资料"===document.querySelectorAll("h2")[document.querySelectorAll("h2").length-1].innerHTML&&document.querySelectorAll("h2")[document.querySelectorAll("h2").length-1].insertAdjacentHTML("afterend",'<ol id="refs"></ol>');for(var u=document.getElementsByTagName("a"),p=[],f=0;f<u.length;f++)if(u[f].hostname!=location.hostname&&!1===/^javascript/.test(u[f].href)){var g=u[f].innerHTML;if(/\[[0-9]*\]/.test(g)){var y=parseInt(g.slice(1,-1));p.push({num:y,title:u[f].title,href:u[f].href}),u[f].classList.add("ref"),u[f].href="#note-"+y,u[f].id="ref-"+y}else u[f].target="_blank"}p=p.sort((function(t,e){return+(t.num>e.num)||+(t.num===e.num)-1}));for(f=0;f<p.length;f++)document.getElementById("refs").insertAdjacentHTML("beforeend",'<li id="note-'+p[f].num+'" class="note"><a href="#ref-'+p[f].num+'">^</a> <a href="'+p[f].href+'" title="'+p[f].title+'" class="exf-text" target="_blank">'+p[f].title+"</a></li>");if("post"==page.layout){let t=function(t,e){var r=[],n=[];for(N.forEach((function(e,i){e.tags.some((function(e){return t.indexOf(e)>-1}))&&e.url!=location.pathname&&(r.push(e),n.push(i))}));r.length<5;){var i=Math.floor(Math.random()*N.length),o=N[i];"-1"==n.indexOf(i)&&o.category==e&&o.url!=location.pathname&&(r.push(o),n.push(i))}return r},e=function(t){for(var e=[],r=0,n="";r<5;){var i=Math.floor(Math.random()*t.length);"-1"==e.indexOf(i)&&(n+='<li class="post-extend-item"><a class="post-extend-link" href="'+t[i].url+'" title="'+t[i].title+'">'+t[i].title+"</a></li>\n",e.push(i),r++)}document.querySelector("#random-posts").insertAdjacentHTML("beforeend",n)};var x=document.querySelectorAll('.post-content img[data-src]:not([class="emoji"])'),v={src:[],thumb:[],title:[],coord:[]};for(f=0;f<x.length;f++)v.thumb[f]=x[f].src,v.src[f]=x[f].dataset.src;v.jpg=v.src.filter((function(t){return t.indexOf(".jpg")>-1&&new RegExp(site.img,"i").test(t)})),[].forEach.call(x,(function(t,e){v.title[e]=t.title||t.parentElement.textContent.trim()||t.alt,t.title=v.title[e],t.classList.add("post-image"),t.parentElement.outerHTML=t.parentElement.outerHTML.replace("<p>",'<figure class="post-figure" data-index='+e+">").replace("</p>","</figure>").replace(t.parentElement.textContent,"");var r=document.querySelector('.post-image[data-src="'+v.src[e]+'"]');new RegExp(site.img,"i").test(v.src[e])&&r.insertAdjacentHTML("afterend",'<figcaption class="post-figcaption">&#9650; '+v.title[e]+"</figcaption>"),r.addEventListener("click",(function(){browser.wechat&&browser.mobile?wx$1.previewImage({current:v.src[e],urls:v.src}):window.open(v.src[e])}))}));var _=function(t){if(t<v.jpg.length){var e=v.jpg[t],r=new XMLHttpRequest;r.open("GET",e+"?exif",!0),r.onreadystatechange=function(){if(4==this.readyState){if(200==this.status){var r=JSON.parse(this.responseText),n=function(t){return t?t.val:"无"};if(r.DateTimeOriginal){var i=r.DateTimeOriginal.val.split(/\:|\s/),o=i[0]+"-"+i[1]+"-"+i[2]+" "+i[3]+":"+i[4],a=n(r.Make),s=n(r.Model),l=n(r.FNumber),c=n(r.ExposureTime),m=n(r.ISOSpeedRatings),h=n(r.FocalLength);document.querySelector('.post-image[data-src="'+e+'"]').closest(".post-figure").dataset.exif="时间: "+o+" 器材: "+(s.indexOf(a)>-1?"":a)+" "+s+" 光圈: "+l+" 快门: "+c+" 感光度: "+m+" 焦距: "+h}if(r.GPSLongitude){for(var d=r.GPSLatitude.val.split(", "),u=r.GPSLongitude.val.split(", "),p=0,f=0,g=0;g<d.length;g++)p+=d[g]/Math.pow(60,g),f+=u[g]/Math.pow(60,g);p=r.GPSLatitudeRef&&"S"==r.GPSLatitudeRef.val?-p:p,f=r.GPSLongitudeRef&&"W"==r.GPSLongitudeRef.val?-f:f,v.coord[t]=coordtransform.wgs84togcj02(f,p).join(",")}}t++,_(t)}},r.send()}else{var n=new XMLHttpRequest;n.open("GET",site.api+"/regeo.php?coords="+v.coord.filter((function(){return!0})).join("|"),!0),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);if("OK"==t.info)for(var e,r,n,i,o=0,a=0;o<v.jpg.length;o++)e=t.regeocodes[a],o in v.coord&&e&&(r=(e=e.addressComponent).city||"",n=e.district||"",i=e.township||"",document.querySelector('[data-src="'+v.jpg[o]+'"]').title="摄于"+r+n+i,a++)}},n.send()}};v.jpg.length>0&&_(0);var b=document.getElementsByClassName("language-flow");[].forEach.call(b,(function(t,e){var r="flow-"+(e+1),n=document.createElement("div");n.classList.add("flow"),n.id=r;var i=t.parentNode;i.insertAdjacentElement("beforebegin",n),i.style.display="none",flowchart.parse(t.innerText).drawSVG(r,{"yes-text":"是","no-text":"否"})})),window.addEventListener("load",(function(){var t=document.querySelectorAll(".flow a");[].forEach.call(t,(function(t){/^#/i.test(t.href)&&(t.target="_self")}))})),($=new XMLHttpRequest).open("GET","/posts.json",!0),$.onreadystatechange=function(){4==$.readyState&&200==$.status&&(N=JSON.parse($.responseText),e(t(page.tags,page.category)))},$.send(null),new QRCode("qrcode",{text:document.getElementById("qrcode").dataset.qrcodeUrl,width:160,height:160,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.L,useSVG:!1}),document.getElementById("wechat-qrcode")&&new QRCode("wechat-qrcode",{text:document.getElementById("wechat-qrcode").dataset.qrcodeUrl,width:240,height:240,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.L,useSVG:!1})}if("/archive.html"==page.url&&document.querySelector(".page-search-input").addEventListener("keyup",(function(t){for(var e=document.getElementsByClassName("archive-item-link"),r=0;r<e.length;r++)e[r].title.toLowerCase().indexOf(this.value.toLowerCase())>-1?e[r].closest("li").style.display="block":e[r].closest("li").style.display="none";13==t.keyCode&&(location.href="/search.html?keyword="+this.value)})),"/search.html"==page.url){let t=function(t){q.innerHTML="";var e="搜索："+t+" | "+site.title,r="/search.html?keyword="+t;q.length;var n="";w.forEach((function(e){if((e.title+e.tags.join("")+e.content).toLowerCase().indexOf(t.toLowerCase())>-1){var r=e.content.toLowerCase().indexOf(t.toLowerCase()),i=e.content.substr(r,t.length),o=r>75?r-75:0,a=o+150;n+='<div class="search-result-item">      <i class="search-result-thumb" data-src="'+e.thumb+'" style="background-image:url('+e.thumb+')"></i>      <div class="search-result-content">        <div class="search-result-header">           <div class="search-result-title"><a class="search-result-link" target="_blank" href="'+e.url+'">'+e.title+'</a></div>           <div class="search-result-comment"></div>        </div>        <div class="search-result-desc">'+e.content.slice(o,a).replace(new RegExp(i,"g"),'<span class="search-result-highlight">'+i+"</span>")+"</div>      </div>    </div>"}})),q.innerHTML=n,document.title=e,history.replaceState({title:e,url:r},e,r),site.home===location.origin&&window.parent==window&&_hmt.push(["_trackPageview",r])};var w,k=getQuery("keyword"),S=document.querySelector(".search-input"),q=document.querySelector(".search-result"),L=new XMLHttpRequest;L.open("GET","/search.json",!0),L.onreadystatechange=function(){4==L.readyState&&200==L.status&&(w=JSON.parse(L.responseText),k&&(S.value=decodeURI(k),t(decodeURI(k))),S.placeholder="请输入关键词，回车搜索")},L.send(null),document.querySelector(".search-input").addEventListener("keyup",(function(e){13==e.keyCode&&t(decodeURI(this.value))}))}if("/tags.html"==page.url){let t=function(t){var e="标签："+t+" | "+site.title,r="/tags.html?keyword="+t,n=document.getElementById("tags-table");n.style.display="table",n.querySelector("thead tr").innerHTML="<th colspan=2>以下是标签含有“"+t+"”的所有文章</th>";var i="";M.forEach((function(e){if(e.tags.indexOf(t)>-1){var r=e.date.slice(0,10).split("-");r=r[0]+" 年 "+r[1]+" 月 "+r[2]+" 日",i+="<tr><td><time>"+r+'</time></td><td><a href="'+e.url+'" title="'+e.title+'">'+e.title+"</a></td></tr>"}})),n.getElementsByTagName("tbody")[0].innerHTML=i,document.title=e,history.replaceState({title:e,url:r},e,r),site.home===location.origin&&window.parent==window&&_hmt.push(["_trackPageview",r])};var M;k=getQuery("keyword");($=new XMLHttpRequest).open("GET","/posts.json",!0),$.onreadystatechange=function(){4==$.readyState&&200==$.status&&(M=JSON.parse($.responseText),k&&t(decodeURI(k)))},$.send(null);var T=document.getElementsByClassName("post-tags-item"),C=T.length;for(f=0;f<C;f++)T[f].addEventListener("click",(function(e){t(e.currentTarget.title),e.preventDefault()}),!1)}var A=function(t){return t?t<10?"0"+t:t:"00"};if("/running.html"==page.url){var B=document.querySelector(".running-table-container"),E=new XMLHttpRequest;E.open("GET",site.api+"/nike/best.php",!0),E.onreadystatechange=function(){if(4==E.readyState&&200==E.status){for(var t=JSON.parse(E.responseText).records,e="",r="",n=0;n<t.length;n++){var i=t[n];switch(i.type_id){case"fastest.run.continuous.5k":e+="<th>5 公里</th>";break;case"fastest.run.continuous.10k":e+="<th>10 公里</th>";break;case"fastest.run.continuous.half_marathon":e+="<th>半马</th>";break;case"fastest.run.continuous.marathon":e+="<th>全马</th>";break;case"longest.run.distance.activity":e+="<th>最远记录</th>";break;case"longest.run.duration.activity":e+="<th>最久记录</th>"}if(i.type_id.indexOf("distance")>-1)r+="<td>"+(i.value/1e3).toFixed(2)+" 公里</td>";if(/5k|10k|marathon|duration/.test(i.type_id)){var o=i.value,a=parseInt(o/60),s=parseInt(o%60),l=parseInt(a%60),c=parseInt(a/60);r+="<td>"+A(c)+":"+A(l)+":"+A(s)+"</td>"}}e="<thead><tr>"+e+"</tr></thead>",r="<tbody><tr>"+r+"</tr></tbody>",B.innerHTML="<table>"+e+r+"</table>"}},E.send();var I=new Date,D="",j=[],R=document.querySelector(".running-list"),P=document.querySelector(".running-loadmore-link"),O=function(){P.style.display="none";var t="",e=new XMLHttpRequest;e.open("GET",site.api+"/nike/posts.php"+D,!0),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&((j=JSON.parse(e.responseText)).forEach((function(e,r){if(I=new Date(e.published),0==r&&""==D){var n='<span class="page-title-desc">没跑</span>';i=I,o=new Date,i.getYear()==o.getYear()&&i.getMonth()==o.getMonth()&&i.getDay()==o.getDay()&&(n='<span class="page-title-desc">跑了</span>'),document.querySelector(".page-title").insertAdjacentHTML("beforeend",n)}var i,o;t+='<div class="running-item"><a class="running-item-thumb" href="'+e.tags.image.url+'" target="_blank"><img class="running-item-image" src="'+e.tags.image.thumb+'"></a><div class="running-item-intro"><p>'+I.Format("yyyy-MM-dd hh:mm")+'</p><p><a href="/running-map.html?id='+e.object.id+'" target="_blank" title="跑步路径详情"><svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M552.279379 912.204821c-13.853519-0.723477-27.333532-1.896186-40.054251-3.480264-11.007705-1.622964-20.9788 6.393617-22.338774 17.381879-1.369184 10.988262 6.423293 20.979824 17.391089 22.349007 13.659091 1.700735 28.088732 2.971681 42.888809 3.75451 0.36225 0.019443 0.714268 0.019443 1.075495 0.019443 10.56973 0 19.407002-8.290827 19.973914-18.965957C571.803038 922.196383 563.328016 912.771733 552.279379 912.204821zM435.441347 891.459335c-12.717649-4.555759-24.292266-9.893324-34.391275-15.818267-9.54233-5.650697-21.811772-2.385327-27.40414 7.117095-5.602601 9.54233-2.40477 21.820981 7.128351 27.41335 12.239765 7.175423 26.083052 13.549597 41.138956 18.9854 2.238994 0.781806 4.514827 1.153266 6.765077 1.153266 8.211009 0 15.905248-5.064342 18.848277-13.256932C451.260637 906.671805 445.854511 895.173936 435.441347 891.459335zM949.942307 313.422316c-5.083785-9.854439-17.166985-13.70514-26.963095-8.641821 0 0-6.843872 3.539616-18.222013 10.011005-9.600659 5.473665-12.964266 17.695011-7.488555 27.316136 3.694135 6.471388 10.460236 10.088776 17.420765 10.088776 3.361561 0 6.765077-0.841158 9.893324-2.620687 10.285251-5.846148 16.542768-9.092076 16.738219-9.190313C951.135482 335.322092 955.007673 323.256288 949.942307 313.422316zM716.209962 511.901763c3.207042 1.877767 6.707772 2.777253 10.16757 2.777253 6.843872 0 13.531178-3.499707 17.265222-9.81453 5.964852-10.128685 13.491269-20.590967 22.328541-31.148417 7.118118-8.466835 6.004761-21.097504-2.463098-28.214599-8.485255-7.118118-21.116947-5.982248-28.195156 2.482541-10.264784 12.221346-19.065218 24.51944-26.160823 36.506449C703.539384 494.012324 706.687074 506.271532 716.209962 511.901763zM351.513866 812.818253c-0.167822-10.910491-9.073656-19.72832-20.022009-19.72832-11.057847 0-20.022009 8.974395-20.022009 20.041452 0 1.896186 0.261966 12.0832 5.542226 26.357298 2.991124 8.095375 10.645454 13.080923 18.780739 13.080923 2.306532 0 4.663206-0.410346 6.951319-1.270946 10.371208-3.832282 15.661701-15.329127 11.82942-25.731034C351.863836 818.292941 351.531262 813.287951 351.513866 812.818253zM332.116073 192.214766c-77.409021 0-140.154064 62.724577-140.154064 140.116201 0 77.388555 62.745043 140.133597 140.154064 140.133597 77.409021 0 140.154064-62.745043 140.154064-140.133597C472.270137 254.939343 409.525094 192.214766 332.116073 192.214766zM332.116073 432.165744c-55.285141 0-100.110045-44.853557-100.110045-100.168374 0-55.314817 44.824905-100.169397 100.110045-100.169397 55.29435 0 100.110045 44.855604 100.110045 100.169397C432.226119 387.31321 387.410424 432.165744 332.116073 432.165744zM834.777381 760.064772c-10.831696 2.248204-17.793248 12.845563-15.545044 23.678282 1.349741 6.472412 2.034333 12.827143 2.034333 18.868743 0 4.927219-0.470721 9.854439-1.369184 14.566764-2.112104 10.871605 4.985548 21.37175 15.857153 23.443945 1.270946 0.273223 2.561335 0.37146 3.811816 0.37146 9.406231 0 17.793248-6.627954 19.631106-16.20917 1.407046-7.234775 2.112104-14.665001 2.112104-22.172999 0-8.759501-0.958838-17.851577-2.855024-27.001981C856.186993 764.757654 845.511863 757.874897 834.777381 760.064772zM781.535783 870.850971c-9.42465 6.53074-20.490683 12.435217-32.868595 17.519002-10.226922 4.223185-15.09479 15.915481-10.892071 26.161846 3.187599 7.722892 10.657734 12.396331 18.516726 12.396331 2.542916 0 5.14416-0.48914 7.626701-1.505283 15.036461-6.198166 28.64541-13.510712 40.416502-21.644973 9.092076-6.335289 11.358699-18.809391 5.063319-27.882024C803.100938 866.823238 790.586926 864.554568 781.535783 870.850971zM736.211505 603.369987c-5.728468-10.245342-9.228175-20.88261-10.381441-31.655977-1.173732-10.988262-10.813277-18.927071-22.035876-17.754363-11.007705 1.172709-18.96698 11.028171-17.773805 22.035876 1.739621 16.170285 6.863315 31.969109 15.270798 46.946218 3.656273 6.550183 10.459213 10.245342 17.479093 10.245342 3.305279 0 6.667863-0.821715 9.757225-2.561335C738.187509 625.229854 741.627864 613.028974 736.211505 603.369987zM831.922357 361.444029c-11.164271 8.016581-22.680559 16.736173-34.099632 26.024723-8.565073 6.999414-9.854439 19.611663-2.87549 28.17469 3.970428 4.868891 9.718339 7.371898 15.545044 7.371898 4.439102 0 8.916067-1.467421 12.629645-4.497431 10.753925-8.759501 21.606087-16.993023 32.145118-24.538883 8.973372-6.433526 11.048637-18.946514 4.594645-27.922956C853.430206 357.063255 840.936661 355.011526 831.922357 361.444029zM817.96139 693.546799c-8.464789-11.105942-18.24248-22.25077-29.05371-33.219589-7.744381-7.879458-20.413935-7.958252-28.312836-0.214894-7.880481 7.742335-7.958252 20.451798-0.196475 28.331255 9.620102 9.757225 18.301831 19.689435 25.76992 29.427216 3.950985 5.161556 9.894348 7.860015 15.917528 7.860015 4.242627 0 8.523117-1.348718 12.141528-4.125971C823.026756 714.859197 824.688605 702.3063 817.96139 693.546799zM673.056116 907.883399c-12.748349 1.818415-26.160823 3.167133-39.887452 4.047176-11.036357 0.723477-19.404955 10.245342-18.692734 21.292955 0.684592 10.597359 9.494235 18.73162 19.963681 18.73162 0.430812 0 0.870834-0.038886 1.309832-0.038886 14.743796-0.977257 29.191856-2.424212 42.938951-4.379751 10.948353-1.564635 18.554588-11.692297 17.010419-22.641673C694.1352 913.944442 684.025958 906.240993 673.056116 907.883399zM332.116073 71.770604c-143.752008 0-260.286118 117.354801-260.286118 262.10351 0 212.967416 260.286118 418.643776 260.286118 418.643776s260.286118-205.675336 260.286118-418.643776C592.402191 189.125405 475.868081 71.770604 332.116073 71.770604zM332.076164 699.882088c-23.824615-21.25407-61.619406-57.230446-99.347682-102.475929-55.138808-66.107627-120.854509-165.494195-120.854509-263.532045 0-122.418121 98.800213-222.059492 220.2421-222.059492 121.440863 0 220.2421 99.641371 220.2421 222.059492C552.358173 487.871463 394.352533 644.234697 332.076164 699.882088z"></path></svg></a>'+e.tags.text+"</p></div></div>"})),R.insertAdjacentHTML("beforeend",t),j.length<12?(P.innerHTML="没有更多啦",P.style.display="inline",P.style.pointerEvents="none"):P.style.display="inline",I.setTime(I.getTime()-1),D="?start_time="+I.toISOString())},e.send(null)};P.addEventListener("click",O,!1),O()}if("/tech.html"==page.url||"/life.html"==page.url||"/album.html"==page.url){let t=function(e){var n="",i="",o=10;switch(page.url){case"/tech.html":n="技术",i="post-tech";break;case"/life.html":n="生活",o=12,i="post-life";break;case"/album.html":n="相册",i="post-album"}var a=1==e?n+" | "+site.title:n+"：第"+e+"页 | "+site.title,s=1==e?page.url:page.url+"?page="+e,l="",c=j.length,m=(e-1)*o,h=c>e*o?e*o:c;if("/life.html"==page.url)for(var d=m;d<h;d++){l+='<article class="post-item">    <i class="post-item-thumb" data-src="'+(u=j[d]).image+'" style="background-image:url('+(u.image.indexOf("svg")>-1?u.image:u.image+"?imageView2/1/w/400/h/266")+')"></i>    <section class="post-item-summary">    <h3 class="post-item-title"><a class="post-item-link" href="'+u.url+'" title="'+u.title+'">'+u.title+(u.images>30&&"life"==u.category?"["+u.images+"P]":"")+'</a></h3>    </section>    <section class="post-item-footer"><time class="post-item-date timeago" datetime="'+u.date+'"></time><a class="post-item-cmt" title="查看评论" href="'+u.url+'#comment"><span data-disqus-url="'+u.url+'"></span><span>条评论</span></a></section></article>'}else for(d=m;d<h;d++){var u;l+='<article class="post-item">    <i class="post-item-thumb" data-src="'+(u=j[d]).thumb+'" style="background-image:url('+u.thumb+')"></i>    <section class="post-item-summary">    <h3 class="post-item-title"><a class="post-item-link" href="'+u.url+'" title="'+u.title+'">'+u.title+(u.images>30&&"life"==u.category?"["+u.images+"P]":"")+'</a></h3>    <time class="post-item-date timeago" datetime="'+u.date+'"></time>    </section>    <a class="post-item-comment" title="查看评论" data-disqus-url="'+u.url+'" href="'+u.url+'#comment"></a></article>'}var p=Math.ceil(c/o),f=e>1?e-1:0,g=e<p?e+1:0,y=f?'<a class="pagination-item-link" href="'+page.url+"?page="+f+'" data-page="'+f+'">较新文章 &raquo;</a>':"",x='<ul class="pagination-list"><li class="pagination-item">'+(g?'<a class="pagination-item-link" href="'+page.url+"?page="+g+'" data-page="'+g+'">&laquo; 较旧文章</a>':"")+'</li><li class="pagination-item">'+e+" / "+p+'</li><li class="pagination-item">'+y+"</li></ul>";document.querySelector(".post-list").classList.add(i),document.querySelector(".post-list").innerHTML=l,document.querySelector(".pagination").innerHTML=x,timeAgo(),r.count();var v=document.getElementsByClassName("pagination-item-link");for(d=0;d<v.length;d++)v[d].addEventListener("click",(function(e){var r=parseInt(e.currentTarget.dataset.page);t(r),e.preventDefault()}));document.title=a,history.replaceState({title:a,url:s},a,s),site.home===location.origin&&window.parent==window&&_hmt.push(["_trackPageview",s])};var N,F=getQuery("page")?parseInt(getQuery("page")):1,$=(j=[],new XMLHttpRequest),H=page.url.slice(1,-5);$.open("GET","/posts.json",!0),$.onreadystatechange=function(){4==$.readyState&&200==$.status&&((N=JSON.parse($.responseText)).forEach((function(t){t.category==H&&j.push(t)})),t(F))},$.send(null)}})),site.home===location.origin&&window.parent==window&&setTimeout((function(){var t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="//hm.baidu.com/hm.js?"+site.tongji,t.parentNode.insertBefore(e,t);var r,n,i,o,a,s,l=document.createElement("script");l.src="https://zz.bdstatic.com/linksubmit/push.js",t.parentNode.insertBefore(l,t),r=window,n=document,i="script",o="ga",r.GoogleAnalyticsObject=o,r[o]=r[o]||function(){(r[o].q=r[o].q||[]).push(arguments)},r[o].l=1*new Date,a=n.createElement(i),s=n.getElementsByTagName(i)[0],a.async=1,a.src="//www.google-analytics.com/analytics.js",s.parentNode.insertBefore(a,s),ga("create",site.analytics,"auto"),ga("send","pageview")}),1e3);const updateZoom=()=>{const t=(window.innerHeight/966).toFixed(2);window.innerHeight>966?document.documentElement.style.setProperty("zoom",parseFloat(t)):document.documentElement.style.removeProperty("zoom")};updateZoom(),window.addEventListener("resize",updateZoom);
